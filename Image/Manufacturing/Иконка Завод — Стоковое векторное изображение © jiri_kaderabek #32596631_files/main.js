var dp={pages:[],init:function(){dp.helpers.launchPages();dp.helpers.initEvents();dp.helpers.initConsole();dp.helpers.initVars();dp.helpers.initLoader();dp.helpers.setBackUrl();dp.track.init();dp.lastViewed.init();$(function(){dp.onReady();});},onReady:function(){dp.helpers.bindOnResize();dp.widgetCache=dp.cache({lifetime:-1});dp.config.session=$.cookie('dEEn2wbX')||false;dp.loader.ajax.init();dp.loader.run();dp.observer.fire('queueLoaded');dp.langurl.init();dp.social.init();dp.captcha.init();dp.novelty.init();dp.header.init();dp.staticPage.init();dp.helpers.npTools();dp.helpers.popupAutoShow();dp.tips.init();dp.observer.fire('pageFullReload');var dropAdminCookies=function(){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].split('=');if(cookie[0].indexOf('11_')!==0){continue;}
$.removeCookie(cookie[0]);$.cookie(cookie[0],cookie[1],{expires:365,path:'/',domain:'admin'+dp.config.domain.local});}};if(document.cookie.indexOf('11_')!==-1){setTimeout(dropAdminCookies,100);}},widgetCache:undefined,config:{lang:'en',uid:false,portalId:undefined,testMode:false,session:undefined,search:{},widgets:{}},lang:{},tr:function(key){if(dp.lang.hasOwnProperty(key))return dp.lang[key];else return key;},helpers:{launchPages:function(){for(var i=0;i<dp.pages.length;i++){if(typeof dp.pages[i]==='function'){dp.pages[i]();}}},initEvents:function(){window.onload=function(){dp.observer.fire('windowOnload');if(window.addEventListener){setTimeout(function(){window.addEventListener('popstate',function(){dp.observer.fire('popstate');})},1)}}},initConsole:function(){if(!window.console){window.console={log:function(){}}}},initVars:function(){dp.config.domain={current:document.domain,basic:undefined,local:undefined};dp.config.domain.basic=/([a-z0-9-]+\.[a-z0-9-]+)\.?$/.exec(dp.config.domain.current)[0];dp.config.domain.local='.'+dp.config.domain.basic;window.tr=dp.tr;if(dp.config.environment&&dp.config.environment==='development'){dp.loader.ajax.options.timeouts.ajax=15000;}
dp.config.deferPopups=['searchFeedback','login','password-recovery','signup','need_auth','siteFeedback','signup-form','order_error'];},setBackUrl:function(){dp.observer.add('dpSetBackUrl','pagePartReload',function(){dp.helpers.setBackUrl();});var points={set:['cart','view_item'],ignore:['signup','subscribe']};if(!dp.config.action||points.ignore.indexOf(dp.config.action)!==-1){return false;}
if(points.set.indexOf(dp.config.action)!==-1&&!dp.config.user.id){var now=new Date();var time=now.getTime()+30*60*1000;now.setTime(time);return dp.storage.set('backUrl',window.location.href,true,now);}
dp.storage.remove('backUrl');},getBackUrl:function(){return dp.storage.get('backUrl');},initLoader:function(){dp.loader.add({target:'.d_text_overflow_ellipsis',handlers:'textOverflow',enabled:!('textOverflow'in document.documentElement.style)},0);dp.loader.add({target:'.d_placeholder',handlers:'placeholder'},0);dp.loader.add({target:'.d_disabled',handlers:'disabled'},0);dp.loader.add({target:'.d_gaLabel',handlers:'gaLabel'},0);dp.loader.add({target:'.d_loading',handlers:'depositLoading'},0);dp.loader.add({target:'.d_slidable',handlers:'depositSlidable'},0);dp.loader.add({target:'.for-popup',handlers:'depositPopup'},0);dp.loader.add({target:'.d-has-balance',handlers:'depositInHeader',enabled:!!dp.config.user.id},0);dp.loader.add({target:'.d_has_title, .d_html_tips_custom',handlers:'depositTips'},0);dp.loader.add({target:'.shopping-cart-menu',handlers:'depositInCart'},0);dp.loader.add({target:'.to-top-bicon',handlers:'depositLiftUpButton'},0);dp.loader.add({target:'.d_html_tips',handlers:'depositTips',options:{pointer:{priority:['lt','lm','tm','rm','bl','br','tl','tr','rt','rb','lb','auto']},template:{priority:['rt','rm','bm','bl','br','tm','lm','tl','tr','rb','lt','lb','wright','wleft','auto']},display:{force:false}}},0);dp.loader.add({target:'.search-input',handlers:[{name:'depositSearchHints',options:{mode:'simple',sizeObject:'div.search-left'}}]},0);dp.loader.add({target:'[data-mask]',handlers:function(){$(this).each(function(){var $this=$(this);$this.mask($this.attr('data-mask'))})},enabled:function(){return typeof($.fn.mask)=='function'}},0);dp.loader.add({target:'.livechat-link, .open-livechat',handlers:'depositLiveChat',options:{id:dp.config.livechat,lang:dp.config.lang,logged:dp.config.user.id}},0);dp.loader.add({target:'body',handlers:'depositSearchForms',force:function($on){return($on instanceof jQuery&&$on.filter('[data-role]').not('[data-role="ajax"]').not('[data-role="related-content"]').not('[data-role="inline-view-item"]').length>0)}},0);dp.loader.add({target:'.series',handlers:'depositSeries'},0);dp.loader.add(function(){$('.call-link').off('click.dp').on('click.dp',function(){window.open(dp.helpers.zingaya.url(),'_blank',dp.helpers.zingaya.props).focus();return false;});});dp.loader.add({target:{},handlers:dp.track.search,force:true},0);dp.loader.add({target:'[data-popup]',handlers:function(){dp.popup.dispatch($(this));}},0);dp.loader.add({target:'.pager-v2.pager-master',handlers:'depositPager'},0);},bindOnResize:function(){var resizeTimer;var resizeHandler=function(first){$.event.remove(this,'resize',handler);$('.d_binded_resize').trigger('resize',first);$(window).trigger('_resize',first);$.event.add(this,'resize',handler);};var handler=function(e,first){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){resizeHandler(first);},10);};$(window).off('resize.dp').on('resize.dp',handler);handler({},true);},zingaya:{options:{},url:function(){var id=this.options[dp.config.lang]?this.options[dp.config.lang].id:this.options['en'].id;var lang=this.options[dp.config.lang]?this.options[dp.config.lang].lang:this.options['en'].lang;return'http://zingaya.com/widget/'+id+'?_lang='+lang+'#referrer='+escape(window.location.href);},props:'resizable=no,toolbar=no,menubar=no,location=no,status=no,width=944,height=563,top='+
Number((screen.height/2)-(563/2))+',left='+Number((screen.width/2)-(944/2))},npTools:function(){dp.observer.add('netPeakTools','pageFullReload, pagePartReload',function(){var $npHref=$('[data-np-href]');if($npHref.length===0)return false;$npHref.each(function(){var $npHrefElement=$(this);if(this.tagName.toLowerCase()==='a'){dp.tools.getTransition($npHrefElement);this.setAttribute('href',this.getAttribute('data-np-href'));this.removeAttribute('data-np-href');dp.tools.setTransition($npHrefElement);}else{$npHrefElement.off('.np').on('click.np',function(){window.location.href=this.getAttribute('data-np-href');});}});});},popupAutoShow:function(){if(window.location.hash.length){var hashParam=window.location.hash.replace('#','');if(dp.config.deferPopups.indexOf(hashParam)>=0||dp.popup.data[hashParam]){var index=window.location.href.indexOf('#');if(index&&history&&history.replaceState){history.replaceState({},document.title,window.location.href.substring(0,index));}
dp.popup.show(hashParam);}}},updateBalanceHandler:function($tips){$tips.find('a').each(function(index,item){var $el=$(item);var method=$el.attr('data-pack')||$el.attr('data-method');if(dp.config.user.activeSubscription){if(method==='subscription'){var subscriptionId=dp.tools.number($el.attr('data-subscription-id'));var balanceItem=dp.config.user.subscriptionFilesCount[subscriptionId];$el.find('span[data-balance]').html(balanceItem);}else{var balanceItem=(method==='credits')?dp.tools.number(dp.config.user.credits):dp.tools.number(dp.config.user.imagePacksCount);$el.find('[data-balance="'+method+'"]').html((method==='credits')?balanceItem.dpNumberFormat(2,'.',''):balanceItem);}}});}}};
;dp.core={binder:function(targets,handlers,ns){this.launch(targets,handlers,ns,'_bind');},unbinder:function(targets,handlers,ns){this.launch(targets,handlers,ns,'_unbind');},launch:function(targets,handlers,ns,f1){if(typeof targets==='object'&&typeof handlers==='object'){if(this._isDeepLevel(targets)){this[f1](targets,handlers,ns);}
for(var i in handlers){if(handlers.hasOwnProperty(i)&&targets.hasOwnProperty(i)){arguments.callee.call(this,targets[i],handlers[i],ns,f1);}}}},_isDeepLevel:function(object){for(var i in object){if(object.hasOwnProperty(i)&&i.charAt(0)==='$'){return true;}}
return false;},_bind:function(targets,handlers,ns){var trigger=[];var run=[];for(var i in targets){var _i=i.replace(/^\$/,'');if(!targets.hasOwnProperty(i)||!handlers.hasOwnProperty(_i)){continue;}
var handlerData=handlers[_i];var $target=targets[i];if(!$target||$target.length===0||handlerData.enabled===false){continue;}
if(handlerData.hasOwnProperty('handler')){var events=this._detectEvents($target,handlerData.events);if(events){for(var j=0;j<events.length;j++){var eventName=events[j]+'.'+ns;if(events[j].search('\\.')!==-1){eventName=events[j];}
$target.off(eventName).on(eventName,handlerData.handler);if(handlerData.trigger===events[j]||handlerData.trigger===true){trigger.push({$target:$target,event:events[j]});}}}}
if(handlerData.hasOwnProperty('run')){run.push({$target:$target,_fn:handlerData.run});}}
for(var i=0;i<run.length;i++){var _fn=run[i]._fn;var $target=run[i].$target;switch(typeof _fn){case'string':$target[_fn].call($target);break;case'function':_fn.call($target);break;}}
for(var i=0;i<trigger.length;i++){trigger[i].$target.trigger(trigger[i].event);}},_unbind:function(targets,handlers,ns){for(var i in targets){if(targets.hasOwnProperty(i)){var $target=targets[i];if($target&&$target.length>0&&$target instanceof jQuery){if(typeof ns==='string'){$target.off('.'+ns);}else{for(var j=0;j<ns.length;j++){$target.off('.'+ns[j]);}}}}}},_detectEvents:function($target,events){if(events){if(typeof events==='object'){return events;}else{return[events];}}else{var nodeName=$target.prop('nodeName').toLowerCase();if(['a','i','tr','td','click','p'].indexOf(nodeName)!=-1){return['click'];}else if(['input','select'].indexOf(nodeName)!=-1){return['change'];}}
return false;},ajax:function(options){if(options.$caller){options.$caller.trigger('loading');}
if(typeof options.data!=='object'){options.data={};}
if(options.dataType==='html'){options.data.ajax=true;}
var jsonTypes=['put','delete','update'];var ajaxData=$.extend({url:'',dataType:'json',type:'post'},options,{accepts:{'xml':'application/xml','html':'text/html','text':'text/plain','json':'application/json','jsonp':'text/javascript','script':'application/javascript'},success:function(data){if(options.type==='head'){return;}
if(!data){if(typeof options.error==='function'){options.error();}
if(options.$caller){options.$caller.trigger('loaded',false);}
return $.error('dp.core.ajax: Cannot parse response. Data: '+data);}
if(data.hasOwnProperty('events')){for(var i in data.events){if(!data.events.hasOwnProperty(i))continue;dp.observer.fire(i,data.events[i]);}}
if(typeof options.success==='function'){options.success(data,options.$caller,options.params);}},error:function(jqXHR,textStatus,errorThrown){if(options.$caller){options.$caller.trigger('loaded',false);}
if(typeof options.error==='function'){options.error(jqXHR,textStatus,errorThrown);}
return $.error('dp.core.ajax: Cannot send request.',jqXHR,textStatus,errorThrown);}});if(jsonTypes.indexOf(ajaxData.type.toLowerCase())!==-1){ajaxData.data=JSON.stringify(options.data)||undefined;}
if(options.timeoutTime){ajaxData.timeout=options.timeoutTime;}
if(typeof options.timeout==='function'){ajaxData.error=options.timeout;}
return $.ajax(ajaxData);}}
;(function(window,dp){dp.cache=function(options){return new dpCache(options||{});};var dpCache=function(options){this.options=this._mergeOptions(options);this._debug('_mergeOptions',options);this.data=[];};dpCache.prototype.defaultOptions={debug:false,lifetime:10};dpCache.prototype._mergeOptions=function(userOptions){var options={};for(var i in this.defaultOptions){if(userOptions.hasOwnProperty(i)){options[i]=userOptions[i];}else{options[i]=this.defaultOptions[i];}}
return options;};dpCache.prototype._getIndexByKey=function(key){for(var i=0;i<this.data.length;i++){if(this.data[i].key===key){this._debug('_getIndexByKey',key,i);return i;}}
this._debug('_getIndexByKey',key,false);return false;};dpCache.prototype._truncate=function(){var result=this.data.length>this.options.lifetime-1?this.data.splice(0,1):false;this._debug('_truncate',result);return result;};dpCache.prototype._debug=function(){if(this.options.debug===true){console.log('dp.cache.'+arguments[0]+':',arguments[1],arguments[2]);}};dpCache.prototype.set=function(key,value){if(this.options.lifetime===0){return false;}
this.remove(key);if(this.options.lifetime>0){this._truncate();}
this._debug('set',key,[value]);return this.data.push({key:key,value:value});};dpCache.prototype.get=function(key){var index=this._getIndexByKey(key);var result=index!==false?this.data[index].value:false;this._debug('get',key,[result]);return result;};dpCache.prototype.remove=function(key){var index=this._getIndexByKey(key);var result=index!==false?this.data.splice(index,1):false;this._debug('remove',key,result);return result;};dpCache.prototype.clear=function(){this._debug('clear',true);return this.data=[];};})(window,dp)
;dp.captcha={data:{},init:function(){dp.observer.add('dp.captcha','showCaptcha',function(params){dp.captcha.show(params.name);});dp.observer.add('dp.captcha','renewCaptcha',function(params){dp.captcha.renew(params.name);});},add:function(name,$block){dp.captcha.data[name]=$block;},get:function(name){return this._check(name)?dp.captcha.data[name]:false;},show:function(name){return this._check(name)?dp.captcha.data[name].trigger('show'):false;},renew:function(name){return this._check(name)?dp.captcha.data[name].trigger('renew'):false;},_check:function(name){return dp.captcha.data.hasOwnProperty(name);},callback:function(name,callback){if(this._check(name)){dp.captcha.data[name].trigger('callback',[callback]);}}};
;dp.lastViewed={pushTimeout:5000,lifeLength:3000,stackMaxSize:50,init:function(){dp.observer.add('lastViewed','itemViewed',function(itemId){dp.lastViewed.unshift(itemId);});dp.lastViewed.pushState();},pushState:function(){var stack=dp.storage.get('lastViewedItems');if(stack===null){return;}
stack=JSON.parse(stack);if(stack.user!==dp.config.user.id){dp.storage.remove('lastViewedItems',!stack.hasOwnProperty('user'));dp.lastViewed.pushState();return;}
if(stack.upToDate||(Date.now()-stack.updateTime)<=dp.lastViewed.pushTimeout){return;}
stack.upToDate=true;stack.updateTime=Date.now();dp.storage.set('lastViewedItems',JSON.stringify(stack),false,dp.lastViewed.lifeLength);},unshift:function(itemId){var buffer=JSON.parse(dp.storage.get('lastViewedItems'));if(!buffer){buffer={data:[],updateTime:Date.now(),upToDate:true,user:dp.config.user.id}}
if(buffer.data.indexOf(itemId)!==-1){buffer.data.splice(buffer.data.indexOf(itemId),1);}
buffer.data.unshift(itemId);if(buffer.data.length>dp.lastViewed.stackMaxSize){buffer.data.splice(dp.lastViewed.stackMaxSize,buffer.data.length-dp.lastViewed.stackMaxSize);}
buffer.upToDate=false;dp.storage.set('lastViewedItems',JSON.stringify(buffer),true,dp.lastViewed.lifeLength);},clear:function(){dp.storage.remove('lastViewedItems',true);}};
;dp.loader={level:1,queue:[],oldQueue:undefined,add:function(data,level){if(typeof level!='number')level=dp.loader.level;if(!dp.loader.queue.hasOwnProperty(level))dp.loader.queue[level]=[];if(data instanceof Array){for(var i=0;i<data.length;i++){return dp.loader._addToQueue(dp.loader.queue[level],data[i]);}}else{return dp.loader._addToQueue(dp.loader.queue[level],data);}},run:function($on){var traceCounter=$on?2:1;dp.trace.start();dp.loader._runQueue(dp.loader.queue[0],$on);dp.trace.push('Loader queue 1',traceCounter);dp.loader._runQueue(dp.loader.queue[dp.loader.queue.length-1],$on);dp.trace.push('Loader queue 2',traceCounter);dp.loader.oldQueue=dp.loader.queue[dp.loader.level];dp.loader.queue[dp.loader.level]=[];dp.trace.push('Loader end',traceCounter);dp.trace.end();},destroy:function($on){dp.loader._runQueueDestroy(dp.loader.queue[0],$on);dp.loader._runQueueDestroy(dp.loader.oldQueue,$on);dp.loader.oldQueue=undefined;},_runQueue:function(queue,$on){var traceCounter=$on?4:3;var force=false;var $target;queue=dp.loader._sortQueue(queue);dp.trace.push('Loader queue start',traceCounter);for(var i=0;i<queue.length;i++){var queueItem=queue[i];$target=null;if(typeof queueItem=='function'){if(!$on){dp.loader._processHandlers(undefined,queueItem);}}else{switch(typeof queueItem.target){case'string':if($on&&typeof queueItem.force==='function'){force=queueItem.force($on);}else{force=false;}
$target=$(queueItem.target,force?undefined:$on);break;case'function':if(!$on||queueItem.force)$target=queueItem.target();break;case'object':if(!$on||queueItem.force)$target=queueItem.target;break;default:return false;break;}
var enabled=typeof(queueItem.enabled)!='undefined'?(typeof(queueItem.enabled)=='function'?queueItem.enabled():!!queueItem.enabled):true;var handlers=queueItem.handlers;if(!$target||$target.length==0){enabled=false;}
if(!enabled){continue;}
dp.trace.push('Loader queue item'+dp.trace.short(queueItem.target)+':'+dp.trace.short(queueItem.handlers),traceCounter);dp.loader._processHandlers($target,handlers,queueItem.options);}}
dp.trace.push('Loader queue end',traceCounter);},_runQueueDestroy:function(queue,$on){if(!queue||!queue.length>0)return false;for(var i=0;i<queue.length;i++){var queueItem=queue[i];var $target;if(typeof queueItem=='function')continue;switch(typeof queueItem.target){case'string':$target=$(queueItem.target,$on);break;case'function':continue;break;case'object':$target=queueItem.target;break;};var handlers=queueItem.handlers;if(!$target||$target.length==0)continue;dp.loader._processHandlersDestroy($target,handlers);}},_addToQueue:function(queue,data){switch(typeof data){case'function':queue.push(data);return true;case'object':if(!data.hasOwnProperty('target')||!data.hasOwnProperty('handlers')){throw new TypeError('Invalid data '+data);}
break;default:throw new TypeError('Invalid type of data '+typeof data);return false;};queue.push(data);return true;},_sortQueue:function(queue){var out=[];var a1=[],a2=[];for(var i=0;i<queue.length;i++){if(queue[i].hasOwnProperty('order')){a1.push(queue[i]);}else{a2.push(queue[i]);}};if(a1.length==0)return a2;a1.sort(function(a,b){return a.order-b.order});var aux=a1[0].order;while(a1.length||a2.length){if((a1.length&&a1[0].order==aux)||a2.length==0){if(a1[1]&&a1[1].order>a1[0].order)aux++;out.push(a1.shift());}else if(a2.length){out.push(a2.shift());aux++;}};return out;},_processHandlers:function($target,handlers,options){switch(typeof handlers){case'object':for(var i=0;i<handlers.length;i++){if(!handlers.hasOwnProperty(i))continue;dp.loader._processHandlers($target,handlers[i].name,handlers[i].options)}
break;case'function':handlers.call($target)
break;default:if($target&&$target[handlers]){$target[handlers].call($target,options);}
break;}},_processHandlersDestroy:function($target,handlers){switch(typeof handlers){case'object':for(var i=0;i<handlers.length;i++){if(!handlers.hasOwnProperty(i))continue;dp.loader._processHandlersDestroy($target,handlers[i].name)}
break;default:if($target[handlers]){var data=$target.data();var found=false;for(var name in data){if(data.hasOwnProperty(name)&&name.toLowerCase().search(handlers.toLowerCase())!=-1)found=true;}
if(!found)return false;$target[handlers].call($target,'destroy');}
break;}}}
;dp.loader.ajax={options:{overlay:{$icon:$('<i class="d-ajax-icon" />'),$overlay:$('<div class="d-ajax-overlay" />'),$invisible:$('<div class="d-js-hidden" />')},timeouts:{load:800,ajax:5000,global:7000,cache:1000},lifetime:50,stopWindowScroll:false,stopShowOverlay:false},depends:'',enabled:false,isOldBrowser:false,popstate:false,__counter:0,__jqXHR:{direct:undefined,cache:undefined},__prevUrl:{direct:undefined,cache:undefined,handled:undefined},__loaded:false,__locked:false,__loadTimeout:undefined,__cacheTimeout:undefined,__cacheRequestLocked:false,_oldHref:window.location.href,_requestUrlMap:{},init:function(){this.cache={content:dp.cache({lifetime:this.options.lifetime}),includes:dp.cache({lifetime:-1})};if(!history.pushState){this.isOldBrowser=true;}
this.enabled=true;this._prepareScriptCache();this._addObserver();this._prepare();if(dp.config.pager&&dp.config.pager.cacheEnabled===true)this._updatePagerCache();},_addObserver:function(){var _this=this;dp.observer.add('dpLoaderAjax','popstate',function(){var state=history.state;var href=window.location.href;if(state&&typeof(state)==='object'&&state.hasOwnProperty('from')&&state.from==='ajaxLoader'){dp.loader.ajax.popstate=true;dp.loader.ajax.load(href);}else{if(dp.loader.ajax._oldHref!==href&&href.search('#')===-1){_this.bruteLoad(href);}}})},_prepareScriptCache:function(){var _this=this;if(this.cache.includes.data.length>0)return true;var less=[];var css=[];var js=[];$(document).find('link, script').each(function(){switch(this.nodeName.toLowerCase()){case'link':if(this.rel&&this.rel==='stylesheet'&&this.href)css.push(_this._prepareLink(this.href));if(this.rel&&this.rel==='stylesheet/less'&&this.href)less.push(_this._prepareLink(this.href));break;case'script':if(this.src)js.push(_this._prepareLink(this.src));break;}});this.cache.includes.set('less',less);this.cache.includes.set('css',css);this.cache.includes.set('js',js);},_prepare:function($context){this.options.overlay.$invisible.appendTo('body');if(['search','view_item'].indexOf(dp.config.action)===-1){this.cache.content.options.lifetime=0;}else{this.cache.content.options.lifetime=this.options.lifetime;}
this.targets=this._gather($context);this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,'dpLoaderAjax');},_gather:function($context){var $roles=$('[data-role]');var addContext=function($el,$set){if($el.length>0)$set=$set.add($el);return $set;};if($context){$roles=addContext($('[data-role]',$context),$roles);$roles=addContext($context.filter('[data-role]'),$roles);}
var $links=$('[data-ajax]',$context);return{main:{$roles:$roles,$links:$links},roles:{$content:$roles.filter('[data-role="content"]')},external:{$viewport:$('.d_w745')}}},_handlers:function(){var _this=this;return{main:{links:{handler:function(e){if(e&&(e.metaKey===true||e.shiftKey===true||e.ctrlKey===true||e.altKey===true))return;var href=this.getAttribute('href');var target=this.getAttribute('target');if(href&&href.search('javascript:')===-1&&target!=='_blank'){e.preventDefault();var depends=this.getAttribute('data-depends');if(depends)_this.depends=depends;switch(this.getAttribute('data-ajax')){case'clearCache':_this.cache.content.clear();break;default:break;}
_this.load(href);}},events:'click'}}}},bruteLoad:function(href){this._abortRequests(Object.keys(this.__jqXHR));return window.location.href=href;},load:function(href,callback,forceLoad,isPartialReload){var _this=this;if(this.__counter++>this.options.lifetime)this.enabled=false;if((this.isOldBrowser||!this.enabled)&&!forceLoad){return this.bruteLoad(href);}
if(!forceLoad){if(!href||this.__locked)return false;this._toggleOverlay(true);}
dp.observer.fire('load');clearTimeout(this.__ajaxTimeout);this.__ajaxTimeout=setTimeout(function(){if(!_this.__loaded)_this._ajaxFailed(href,'Ajax timeout',forceLoad);},_this.options.timeouts.global);if(!this.popstate&&history&&history.replaceState){var replaceParams={from:'ajaxLoader'};if(!this.options.stopWindowScroll){replaceParams.scroll=$(window).scrollTop();}
history.replaceState(replaceParams,document.title,window.location.href);}
var cached=this._getCached(href);if(cached!==false){this._handle(cached,href,callback,forceLoad,isPartialReload);}else{this._abortRequests('cache');this._makeRequest('direct',{url:href,data:{depends:this.depends},type:'get',dataType:'html',timeout:_this.options.timeouts.ajax,success:function(data,$caller,params){_this.cache.content.set(_this._makeCacheId(href),data);_this._handle(data,href,callback,forceLoad,isPartialReload);},error:function(jqXHR,textStatus){if(textStatus!=='abort')_this._ajaxFailed(href,'Ajax error',forceLoad);}},forceLoad);}
this.depends='';},reload:function(){if(this.enabled!==true){window.location.reload();return false;}
this.load(this._oldHref);},_handle:function(data,requestedHref,callback,forceLoad,isPartialReload){var _this=this;if(!data)return this._ajaxFailed(requestedHref,'No data in _handle',forceLoad);this.__loaded=false;this.__locked=true;if(!forceLoad){this.__prevUrl.handled=requestedHref;}
try{var parsed=this._parseData(data);if(!parsed.html)return this._ajaxFailed(requestedHref,'Bad parsed data',forceLoad);var loadedLess=0;var loadedCss=0;var loadedJs=0;var link;var img;var handle=function(){var $html=$($.parseHTML(parsed.html,null,true));var $roles=$html.filter('[data-role]');var $scripts=$html.filter('script');var roleName;dp.observer.fire('destroy');$roles.css('visibility','hidden').each(function(){roleName=this.getAttribute('data-role');var $role=_this.targets.main.$roles.filter('[data-role="'+roleName+'"]');if($role.length>0){dp.loader.destroy($role);$(this).insertAfter($role);$role.remove();dp.observer.clean(roleName);}});$('[data-from-ajax]').remove();$scripts.attr('data-from-ajax','true');$scripts.appendTo('body');var isStateChanged=!_this.popstate&&_this._oldHref!==parsed.url&&parsed.url;if(isStateChanged){if(history&&history.pushState){history.pushState({from:'ajaxLoader'},parsed.title||false,parsed.url);dp.observer.fire('pushstate',parsed.url);}
_this._requestUrlMap[_this._makeCacheId(parsed.url)]=_this._makeCacheId(requestedHref);}
if(parsed.title&&forceLoad!==true){document.title=parsed.title;}
if(parsed.action&&forceLoad!==true){dp.config.action=parsed.action;}
_this._oldHref=parsed.url;dp.loader.run($roles);if(isStateChanged&&!isPartialReload){dp.observer.fire('queueLoaded');}
dp.loader.ajax._prepare($roles);_this.__loaded=true;_this.__locked=false;$roles.css('visibility','visible');if(!forceLoad){if(!_this.popstate&&!_this.options.stopWindowScroll){window.scroll(0,0);}
_this._toggleOverlay(false);dp.observer.fire('pagePartReload',[$roles]);}
if(_this.popstate&&history&&history.state&&history.state.scroll&&history.state.scroll>0&&!_this.options.stopWindowScroll){window.scrollTo(0,history.state.scroll-10);window.scrollTo(0,history.state.scroll);}
if(_this.options.stopWindowScroll){_this.options.stopWindowScroll=false;}
_this.popstate=false;if(typeof callback==='function')callback($roles);if(dp.config.pager&&dp.config.pager.cacheEnabled===true)_this._updatePagerCache();if(window.less&&typeof window.less.refresh==='function'&&parsed.less&&parsed.less.length)window.less.refresh();};if(parsed.js&&parsed.js.length>0){var _check=function(){loadedJs++;if(loadedJs>=parsed.js.length&&loadedCss>=parsed.css.length)handle();};for(var i=0;i<parsed.js.length;i++){var script=document.createElement("script");script.type="text/javascript";script.async=false;script.src=parsed.js[i];if($.browser.msie){script.onreadystatechange=function(){if(this.readyState!=='complete')return false;_check();}}else{script.onload=function(){_check();}}
document.body.appendChild(script);}}
if(parsed.css&&parsed.css.length>0){for(var i=0;i<parsed.css.length;i++){link=document.createElement('link');link.type='text/css';link.rel='stylesheet';link.href=parsed.css[i];document.getElementsByTagName('head')[0].appendChild(link);img=document.createElement('img');img.onerror=function(){loadedCss++;if(loadedJs>=parsed.js.length&&loadedCss>=parsed.css.length&&loadedLess>=parsed.less.length)handle();};img.src=parsed.css[i];}}
if(parsed.less&&parsed.less.length>0){for(var i=0;i<parsed.less.length;i++){link=document.createElement('link');link.type='text/css';link.rel='stylesheet/less';link.href=parsed.less[i];document.getElementsByTagName('head')[0].appendChild(link);if(window.less&&window.less.sheets&&typeof window.less.sheets==='object'){window.less.sheets.push(link);}
img=document.createElement('img');img.onerror=function(){loadedLess++;if(loadedJs>=parsed.js.length&&loadedCss>=parsed.css.length&&loadedLess>=parsed.less.length)handle();};img.src=parsed.less[i];}}
if(parsed.css.length===0&&parsed.js.length===0&&parsed.less.length===0)handle();}catch(e){this._ajaxFailed(requestedHref,e,forceLoad);}},_parseData:function(data){var splited=data.split('%%%%');data=splited[4];var includesLess=[];var includesCss=[];var includesJs=[];var includesArray=splited[0].replace(/[\r\n]+/gmi,'').split('|');var title=splited[1];var url=splited[2];var action=splited[3];var less=[];var css=[];var js=[];var newCss;var newJs;var i;var newLess;var lessCache=this.cache.includes.get('less');var cssCache=this.cache.includes.get('css');var jsCache=this.cache.includes.get('js');for(i=0;i<includesArray.length;i++){if(includesArray[i].search(/\.less/g)!==-1&&!this._isExistInCache(lessCache,includesArray[i])){less.push(this._prepareLink(includesArray[i]));}
if(includesArray[i].search(/\.css/g)!==-1&&!this._isExistInCache(cssCache,includesArray[i])){css.push(this._prepareLink(includesArray[i]));}
if(includesArray[i].search(/\.js/g)!==-1&&!this._isExistInCache(jsCache,includesArray[i])){js.push(this._prepareLink(includesArray[i]));}}
newLess=lessCache.concat(less).unique();newCss=cssCache.concat(css).unique();newJs=jsCache.concat(js).unique();less=newLess.diff(lessCache);css=newCss.diff(cssCache);js=newJs.diff(jsCache);this.cache.includes.set('less',newLess);this.cache.includes.set('css',newCss);this.cache.includes.set('js',newJs);for(i=0;i<less.length;i++)includesLess.push(less[i]);for(i=0;i<css.length;i++)includesCss.push(css[i]);for(i=0;i<js.length;i++)includesJs.push(js[i]);if(includesLess.length>0)console.log('dp.loader.ajax.js: less to attach: '+includesLess);if(includesCss.length>0)console.log('dp.loader.ajax.js: css to attach: '+includesCss);if(includesJs.length>0)console.log('dp.loader.ajax.js: js to attach: '+includesJs);return{action:action,url:url,title:title,html:data,js:includesJs,css:includesCss,less:includesLess};},_isExistInCache:function(cache,filename){var cleanFilename=dp.url(filename).attr('path');for(var i=0;i<cache.length;i++){if(cache[i].search(cleanFilename)!==-1)return true;}
return false;},_prepareLink:function(link){return link.replace(/(http|https):/,'');},_toggleOverlay:function(show){var _this=this;if(show&&this.options.stopShowOverlay){this.options.stopShowOverlay=false;return false;}
clearTimeout(_this.__loadTimeout);if(show===true){this.__loadTimeout=setTimeout(function(){var $content=_this.targets.roles.$content;var $viewport=_this.targets.external.$viewport;$content.addClass('d-ajax-loading');_this.options.overlay.$overlay.appendTo($content);_this.options.overlay.$icon.appendTo($content);if($viewport.length>0){var iconLeft=parseInt($viewport.offset().left+($viewport.width()/2)+(_this.options.overlay.$icon.width()/2));_this.options.overlay.$icon.css('left',iconLeft);}},_this.options.timeouts.load);}else{_this.targets.roles.$content.removeClass('d-ajax-loading');_this.options.overlay.$overlay.detach();_this.options.overlay.$icon.detach();}},_updatePagerCache:function(){if(!dp.config.pager||!this.enabled)return false;var offset=dp.config.pager.offset;var newOffset=dp.config.pager.offset+dp.config.pager.itemsLimit;var prevOffset=0;var match=this._oldHref.match(/(?:-st([0-9]+))/);if(match&&match.length===2)prevOffset=parseInt(match[1]);if(offset!==0&&prevOffset>offset)newOffset=dp.config.pager.offset-dp.config.pager.itemsLimit;if(newOffset<0||newOffset>dp.config.pager.itemsCount)return false;var st=newOffset!==0?'-st'+newOffset:'';this.makeCache(dp.config.pager.pages.current.replace(/(?:-st[0-9]+)?(\.html|php)/,st+'$1'));},_makeCache:function(url,timeout){var _this=this;clearTimeout(this.__cacheTimeout);this.__cacheTimeout=setTimeout(function(){_this._makeRequest('cache',{url:url,type:'get',dataType:'html',timeout:_this.options.timeouts.ajax,success:function(data){if(!_this.__cacheRequestLocked){_this.cache.content.set(_this._makeCacheId(url),data);_this.options.overlay.$invisible.empty().append($($.parseHTML(data)).find('img'));}else{_this.__cacheRequestLocked=false;}}});},timeout||_this.options.timeouts.cache);},_makeRequest:function(ns,data){if(ns!=='direct'&&data.url===this.__prevUrl[ns])return;if(data.data&&!data.data.depends)delete data.data.depends;this._abortRequests(ns);this.__prevUrl[ns]=data.url;this.__jqXHR[ns]=dp.core.ajax(data);},_abortRequests:function(nsArr){if(!(nsArr instanceof Array)){nsArr=[nsArr];}
for(var i=0;i<nsArr.length;i++){if(this.__jqXHR[nsArr[i]]&&this.__jqXHR[nsArr[i]].hasOwnProperty('abort')){this.__jqXHR[nsArr[i]].abort();}}},_makeCacheId:function(url){var dpUrl=dp.url(url);var cacheId=dpUrl.attr('directory')+dpUrl.attr('file');if(!dpUrl.attr('directory').match(/\/\d+\//)){cacheId+=dpUrl.attr('query');}
return cacheId;},_getCached:function(href){var cachedHref=this._makeCacheId(href);var cached=this.cache.content.get(cachedHref);return(cached===false&&this._requestUrlMap[cachedHref])?this.cache.content.get(this._requestUrlMap[cachedHref]):cached;},removeCached:function(url){var cachedId=this._makeCacheId(url);delete this._requestUrlMap[cachedId];return this.cache.content.remove(cachedId);},getLastProcessedUrl:function(){return this.__prevUrl.handled;},makeCache:function(url,timeout){if(this._getCached(url)===false){this._makeCache(url,timeout);}},updateCache:function(url,timeout){url=url||this.__prevUrl.handled||window.location.href;this.removeCached(this._makeCacheId(url));this._makeCache(url,timeout);},_ajaxFailed:function(href,e,forceLoad){this._toggleOverlay(false);$.error('dp.loader.ajax.js: Ajax fail '+e?e.toString():'');this.__locked=false;if(forceLoad||!this.enabled){return false;}
this.enabled=false;this.bruteLoad(href);}};
;dp.observer={watchers:{},watchersByRoles:{},error:function(ns,param){var errors={ns:'Invalid type of namespace param, must be string',event:'Invalid type of event name param, must be string',handler:'Invalid type of handler param, must be function'};return new TypeError(errors[ns]+', given: '+param);},add:function(ns,event,handler,role){if(!ns||typeof ns!=='string')throw this.error('ns',ns);if(!event||typeof event!=='string')throw this.error('event',event);if(!handler||typeof handler!=='function')throw this.error('handler',handler);if(!role||typeof role!=='string')role=false;var watcherRequest={};var eventNames=event.split(',');for(var i=0;i<eventNames.length;i++)watcherRequest[eventNames[i].trim()]=handler;this.watchers[ns]=$.extend(true,this.watchers[ns],watcherRequest);if(role){if(typeof this.watchersByRoles[role]=='undefined')this.watchersByRoles[role]={};if(typeof this.watchersByRoles[role][ns]=='undefined')this.watchersByRoles[role][ns]=1;}},remove:function(ns,event){if(!ns||typeof ns!=='string')throw this.error('ns',ns);if(event)delete this.watchers[ns][event];else delete this.watchers[ns];},fire:function(event,args){if(!event||typeof event!=='string')throw this.error('event',event);args=(args instanceof Array)?[].slice.call(args):[args];for(var ns in this.watchers){if(this.watchers.hasOwnProperty(ns)){if(this.watchers[ns].hasOwnProperty(event)){this.watchers[ns][event].apply(null,args);}}}},clean:function(roleName){if(typeof this.watchersByRoles[roleName]!=='undefined'){for(var ns in this.watchersByRoles[roleName]){if(this.watchersByRoles[roleName].hasOwnProperty(ns))this.remove(ns);}
delete this.watchersByRoles[roleName];}}}
;dp.tools={xor:function(a,b){return(a||b)&&!(a&&b);},base_convert:function(number,frombase,tobase){return parseInt(number+'',frombase|0).toString(tobase|0);},mergeToArray:function(){var array=[];var processor=function(result,merge){if(typeof merge=='object'){if(merge instanceof Array){result=result.concat(merge);}else{for(var i in merge){result.push(merge[i]);}}}else{result.push(merge);}
return result;}
for(var i=0;i<arguments.length;i++){if(arguments[i]){array=processor(array,arguments[i]);}}
return array;},capitalize:function(str){return str.charAt(0).toUpperCase()+str.slice(1);},shorten:function(str,max){if(!max)max=39;return str.length>max?str.substring(0,max)+'...':str;},number:function(str){return str-0;},string:function(value){return value+'';},focusOnStraightBrowsersInput:function($input){if($.support.placeholder&&!navigator.userAgent.match(/Trident\/[6,7]\./)&&$input.length&&$input.is(':visible')){$input.focus();if($input[0].setSelectionRange){var len=$input.val().length;$input[0].setSelectionRange(len,len);}else{$input.val($input.val());}}},extend:function(){var target=arguments[0]||{};var i=1;var length=arguments.length;var deep=false;if(typeof target==='boolean'){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=='object'&&typeof target==='function'){target={};}
for(;i<length;i++){var options;var src;var copy;var copyIsArray;var clone;if((options=arguments[i])!=null){for(var name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(typeof copy==='object'||(copyIsArray=copy instanceof Array))){if(copyIsArray){copyIsArray=false;clone=src&&src instanceof Array?src:[];}else{clone=src&&typeof src==='object'?src:{};}
target[name]=dp.tools.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;},mergeObjectIntoString:function(str,obj,callerName){try{str=str.replace(/%(.*?)%/g,function(match,match2){return obj[match2];});}catch(e){if(window.onerror){window.onerror('mergeObjectIntoString '+(e.message||e),(callerName||''),42);}}
return str;},getTransition:function($element){var transition=$element.css('transition');$element.css('transition','none');$element.attr('data-transition',transition);},setTransition:function($element){if(typeof $element.attr('data-transition')==='undefined'){return false;}
setTimeout(function(){$element.css('transition',$element.attr('data-transition')).removeAttr('data-transition');},1);}};(function(String,Array,Object,Function){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++){if(from in this&&this[from]===elt)return from;}
return-1;};}
if(!Array.prototype.filter){Array.prototype.filter=function(fun){'use strict';if(this==null)throw new TypeError();var t=Object(this);var len=t.length>>>0;if(typeof fun!='function')throw new TypeError();var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t))res.push(val);}}
return res;};}
if(!Array.prototype.map){Array.prototype.map=function(callback,thisArg){var T,A,k;if(this==null)throw new TypeError(' this is null or not defined');var O=Object(this);var len=O.length>>>0;if(typeof callback!=='function')throw new TypeError(callback+' is not a function');if(thisArg)T=thisArg;A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue;}
k++;}
return A;};}
if(!Array.prototype.forEach){Array.prototype.forEach=function(fun){'use strict';if(this===void 0||this===null)
throw new TypeError();var t=Object(this);var len=t.length>>>0;if(typeof fun!=='function')
throw new TypeError();var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t)
fun.call(thisArg,t[i],i,t);}};}
if(!Array.prototype.diff){var diffHandler=function(a){return this.filter(function(i){return!(a.indexOf(i)>-1)})};try{Object.defineProperty(Array.prototype,'diff',{value:diffHandler});}catch(e){Array.prototype.diff=diffHandler}}
if(!Array.prototype.unique){var uniqueHandler=function(){var a=this.concat();for(var i=0;i<a.length;++i){for(var j=i+1;j<a.length;++j){if(a[i]===a[j])a.splice(j--,1);}}
return a;};try{Object.defineProperty(Array.prototype,'unique',{value:uniqueHandler});}catch(e){Array.prototype.unique=uniqueHandler}}
if(!Number.prototype.dpNumberFormat){var dpNumberFormatHandler=function(decimals,decPoint,thousandsSep){var number=(this+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousandsSep==='undefined')?',':thousandsSep,dec=(typeof decPoint==='undefined')?'.':decPoint,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec);};try{Object.defineProperty(Number.prototype,'dpNumberFormat',{value:dpNumberFormatHandler});}catch(e){Number.prototype.dpNumberFormat=dpNumberFormatHandler}}
if(!Object.keys){Object.keys=(function(){'use strict';var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!({toString:null}).propertyIsEnumerable('toString'),dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=='object'&&(typeof obj!=='function'||obj===null)){throw new TypeError('Object.keys called on non-object');}
var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop);}}
if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i]);}}}
return result;};}());}
if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}
if(!Date.now){Date.now=function(){return new Date().getTime();};}})(String,Array,Object,Function,Date);
;(function(){'use strict';var Queue=function(){this.detect='.content-type-block .series';this.timers={};this.line={};this.first=0;this.delay=5;this.limitWidth=900;this.loopDelay=20000;var _this=this;var pos;var range=[];$(this.detect).each(function(){pos=parseInt($(this).offset().left);if(!_this.line[pos])_this.line[pos]=[];_this.line[pos].push($(this).data('uiDepositGallery'));range.push(pos);});this.first=Math.min.apply(Math,range);var timer;var checkStop=function(){if(_this.limitWidth>window.innerWidth){if(timer){clearTimeout(timer);timer=0;}
_this.stop();}else{if(!timer){_this.start();}}};dp.core.binder({$window:$(window)},{window:{handler:function(){checkStop();},events:'_resize',run:function(){timer=setTimeout(function(){_this.start();timer=0;},_this.loopDelay);checkStop();}}},'dpQueueEvents');};Queue.prototype.start=function(){var _this=this;for(var level in this.line){if(!this.line.hasOwnProperty(level))
continue;this.startLevel(level);}
clearTimeout(this.watcher);this.watcher=setTimeout(function(){_this.start();},this.loopDelay);};Queue.prototype.startLevel=function(level){var _this=this;var queueDelay=(level-this.first)*this.delay;this.stop(level);this.timers[level]=setTimeout(function(){for(var item=0;item<_this.line[level].length;item++){_this.line[level][item].start(_this.line[level][item]);}},this.line[level][0].maxDelay+queueDelay);};Queue.prototype.stop=function(level){clearTimeout(this.watcher);if(level){clearTimeout(this.timers[level]);}else{for(var timer in this.timers){if(!this.timers.hasOwnProperty(timer))continue;clearTimeout(this.timers[timer]);}}};dp.observer.add('dpQueueInit','queueLoaded',function(){dp.observer.remove('dpQueueInit','queueLoaded');dp.queue=new Queue();});})();
;(function(window,dp){dp.url=function(url,noDecode){return new UrlParser(url,noDecode||false);};var UrlParser=function(url,noDecode){this.data=this._parse(url||window.location.toString(),noDecode);};UrlParser.prototype.options={keys:['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','fragment'],parsers:{url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,query:/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,segment:/^\/+|\/+$/g}};UrlParser.prototype._parse=function(url,noDecode){var _parseComponent=function(str,regex){var result={};var parser=function(a,b,c){if(b)result[b]=c;};str.replace(regex,parser);return result;};var str='';if(noDecode){str=url;}else{try{str=decodeURI(url);}catch(e){str=url;}}
var res=this.options.parsers.url.exec(str);var uri={attr:{},param:{},seg:{}};var i=this.options.keys.length;while(i--)uri.attr[this.options.keys[i]]=res[i]||'';uri.param['query']=_parseComponent(uri.attr['query'],this.options.parsers.query);uri.param['fragment']=_parseComponent(uri.attr['fragment'],this.options.parsers.query);uri.seg['path']=uri.attr.path.replace(this.options.parsers.segment,'').split('/');uri.seg['fragment']=uri.attr.fragment.replace(this.options.parsers.segment,'').split('/');uri.attr['base']=uri.attr.host?(uri.attr.protocol?uri.attr.protocol+'://'+uri.attr.host:uri.attr.host)+(uri.attr.port?':'+uri.attr.port:''):'';return uri;},UrlParser.prototype._rebuild=function(){var queryArray=[];var fragmentArray=[];for(var i in this.data.param.query){if(!this.data.param.query.hasOwnProperty(i))continue;queryArray.push(i+(this.data.param.query[i]!==''?'='+this.data.param.query[i]:''));}
for(var i in this.data.param.fragment){if(!this.data.param.fragment.hasOwnProperty(i))continue;fragmentArray.push(i+(this.data.param.fragment[i]!==''?'='+this.data.param.fragment[i]:''));}
this.data.attr.query=queryArray.join('&');this.data.attr.fragment=fragmentArray.join('&');var url=(this.data.attr.protocol?this.data.attr.protocol+':':'')+
(this.data.attr.host?'//'+this.data.attr.host:'')+
(this.data.attr.directory?this.data.attr.directory:'')+
(this.data.attr.file?this.data.attr.file:'')+
(this.data.attr.query?'?'+this.data.attr.query:'')+
(this.data.attr.fragment?'#'+this.data.attr.fragment:'');this.data=this._parse(url);},UrlParser.prototype.attr=function(attr,value){if(typeof attr!=='undefined'&&typeof value!=='undefined'){this.data.attr[attr]=value;this._rebuild();}
return typeof attr!=='undefined'?this.data.attr[attr]:this.data.attr;},UrlParser.prototype.param=function(param,value){if(typeof param!=='undefined'&&typeof value!=='undefined'){if(value===null)delete this.data.param.query[param];else this.data.param.query[param]=value;this._rebuild();}
return(typeof param!=='undefined'&&value!==null)?this.data.param.query[param]:this.data.param.query;},UrlParser.prototype.fparam=function(param,value){if(typeof param!=='undefined'&&typeof value!=='undefined'){if(value===null)delete this.data.param.fragment[param];else this.data.param.fragment[param]=value;this._rebuild();}
return(typeof param!=='undefined'&&value!==null)?this.data.param.fragment[param]:this.data.param.fragment;},UrlParser.prototype.segment=function(seg){if(typeof seg==='undefined'){return this.data.seg.path;}else{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},UrlParser.prototype.fsegment=function(seg){if(typeof seg==='undefined'){return this.data.seg.fragment;}else{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}})(window,dp)
;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));
;(function(window,dp){var dpStorage=function(){this.busy=false;try{this._storage=this._getStorage();}catch(e){this._storage=null;}};dpStorage.prototype.set=function(key,value,clientOnly,ttl,forceToStorage){var _this=this;this.busy=true;var storage=this._storage;var setItem=function(key,value,storageName){try{storage.setItem(_this._getKey(key),value,storageName);}catch(e){if(e=='QUOTA_EXCEEDED_ERR'){_this.wipeStorage();return false;}}};if(typeof ttl==='undefined')ttl=365;if(!forceToStorage){if(!ttl&&ttl!=='session'&&storage){setItem(key,value,'sessionStorage');}else{$.cookie(this._getKey(key),value,{expires:ttl!=='session'?ttl:undefined,path:'/',domain:dp.config.domain.local});}}else if(storage&&forceToStorage){return setItem(key,value);}else{return false;}
if(clientOnly||!dp.config.user.id){this.busy=false;return true;}
dp.core.ajax({url:'/user_settings.php',data:{method:'setData',key:key,value:value},success:function(){_this.busy=false;dp.observer.fire('storageReady');dp.observer.remove('storageReady');return true;},error:function(jqXHR,textStatus,errorThrown){$.error('jquery.extend.js. ClientStorage set data ajax error.',jqXHR,textStatus,errorThrown);}});};dpStorage.prototype.get=function(key){var storage=this._storage;var portalKey=this._getKey(key);var result=$.cookie(portalKey);if((typeof result==='undefined')&&storage){result=storage.getItem(portalKey);}
if(result===null||typeof result==='undefined'){result=$.cookie(key);}
if((typeof result==='undefined')){result=null;}
return result;};dpStorage.prototype.remove=function(key,fromDb){var _this=this;this.busy=true;var storage=this._storage;var item=this.get(key);if($.cookie(this._getKey(key))!==undefined){$.removeCookie(this._getKey(key),{path:'/',domain:dp.config.domain.local});}else if(storage){storage.removeItem(this._getKey(key));}
if(fromDb){dp.core.ajax({url:'/user_settings.php',data:{method:'deleteData',key:key},success:function(data){dp.observer.fire('storageReady');dp.observer.remove('storageReady');_this.busy=false;return data;},error:function(jqXHR,textStatus,errorThrown){$.error('jquery.extend.js. ClientStorage delete data ajax error.',jqXHR,textStatus,errorThrown);}});}else{this.busy=false;}
return item;};dpStorage.prototype.renew=function(settings){this.oldKeysCleanUp();if(!settings||typeof settings!='object')return;var key;for(var data in settings){if(!settings.hasOwnProperty(data))continue;key=settings[data]['key'].replace(/[0-9][0-9]_/,'');this.set(key,settings[data]['value'],true);}};dpStorage.prototype.oldKeysCleanUp=function(){var oldKeys=['recentHistory','recentHistoryData','slideshow_settings','search_settings','viCenterBnrHidden','viewItemTrialHidden','viRightBnrHidden','viRgImgBnrHidden','viRotationBnrHidden'];for(var i=0;i<oldKeys.length;i++)this.remove(oldKeys[i]);};dpStorage.prototype.wipeStorage=function(){var storage=this._storage;if(!storage)return false;storage.clear();return true;};dpStorage.prototype._getKey=function(key){return dp&&dp.config&&dp.config.portalId?dp.config.portalId+'_'+key:key;};dpStorage.prototype._getStorage=function(){var storageInstances={};var storageTypes=['localStorage','sessionStorage'];var storageType;var isStorageAtAll=false;var i;var _exec=function(storage,method,args){return storage[method](args[0],args[1]);};var setItem=function(key,value,storageName){this._exec(this._storages[storageName]||this._storages[this._defaultStorageName],'setItem',[key,value]);};var getItem=function(key){var result;var i;for(i in this._storages){result=this._exec(this._storages[i],'getItem',[key]);if(result){return result;}}
return null;};var removeItem=function(key){for(i in this._storages){this._exec(this._storages[i],'removeItem',[key]);}};var key=function(key){var result;var i;for(i in this._storages){result=this._exec(this._storages[i],'key',[key]);if(result){return result;}}
return null;};var clear=function(){for(i in this._storages){this._exec(this._storages[i],'clear',[]);}};var testStorage=function(storage){try{var testVal='testStorage';storage.setItem(testVal,testVal);storage.getItem(testVal);storage.removeItem(testVal);}catch(e){return false;}
return true;};for(i=storageTypes.length-1;i>=0;i--){storageType=storageTypes[i];if(storageType in window&&window[storageType]!==null){var storage=window[storageType];if(testStorage(storage)){storageInstances[storageType]=storage;isStorageAtAll=true;}}}
if(isStorageAtAll){return{_defaultStorageName:'localStorage',_storages:storageInstances,_exec:_exec,setItem:setItem,getItem:getItem,removeItem:removeItem,key:key,clear:clear}}else{return null;}};dp.storage=new dpStorage();})(window,dp);
;(function(){"use strict";var track={isPageTrackEnabled:true,init:function(){dp.observer.fire('dpTrackInit');dp.track._addListeners();dp.track._arrangePageTracking();dp.track._arrangeUserEnter();},goal:function(goal){dp.track.perform('goal',goal);dp.track.isPageTrackEnabled=false;},transaction:function(params){dp.track.perform('transaction',params);},fire:function(code,params){dp.track.perform('fire',[code,params])},billingMapper:function(key){var map={'mes':'Merchant','segpayeu':'Segpay','moneybookers':'Scrill','paypal':'Paypal','robokassa':'Robokassa','skrill':'SkrillMoneybookers','webmoney':'Webmoney','yandexmoney':'YandexMoney','paymentwall':'Paymentwall'};return map[key]||key;},trackSearchQuery:function(){var query;var currentPath;var pageToTrack;var types=['image','video','vector'];var typesCounter=0;var i=0;var url;var paramName='content';var makeAsURLComponent=function(str){return str.replace(/&amp;/g,'%26').replace(/&/g,'%26').replace(/ /g,'+');};var checkForbiddenRefferers=function(){var forbidden=['utm_source','glcid','openstat'];var i;for(i=forbidden.length-1;i>=0;i--){if(document.location.href.match(forbidden[i])){return false;}}
return true;};if(dp.config.search.action==='search'&&(!dp.config.pager||(dp.config.pager&&dp.config.pager.page<=1))&&checkForbiddenRefferers()){query=dp.config.search.params.query;currentPath=window.location.pathname;if(dp.config.search.result>0||dp.config.action==='folder'){if(currentPath.search('/category/')!=-1)query='';pageToTrack=currentPath+(query?'?query='+makeAsURLComponent(query):'');url=dp.url(pageToTrack);if(dp.config.search.params.categoryTextName){url.param('img_category',makeAsURLComponent(dp.config.search.params.categoryTextName));pageToTrack=url.data.attr.source;}
for(i;i<types.length;i++){if(dp.config.search.params[types[i]]==='1'){typesCounter++;url.param(paramName,types[i]);}}
if(typesCounter===1){pageToTrack=url.data.attr.source;}
dp.track.page(pageToTrack.toLowerCase());if(query){dp.track.fire('search_result',[query,window.location.href]);}}else{dp.track.fire('search_no_result',[query]);dp.track.page('/ingoing/search/noresult?query=noresult');}}},_addListeners:function(){var lightboxPopupNames=['lightboxes-create-folder-close','lightboxes-share-folder-close','lightboxes-delete-folder-close','lightboxes-edit-folder-close'];var subAccountsPopupNames=['credits-transfer-popup','subscription-transfer-popup','activate-subaccount-popup','deactivate-subaccount-popup','remove-subaccount-popup','edit-subaccount-popup','','',''];dp.observer.add('dpTrackSmartSearch','popupClose',function(popupName){if(lightboxPopupNames.indexOf(popupName)!==-1){dp.track.fire(popupName);}});dp.observer.add('dpTrackSmartSearch','popupClosev2',function(popupName){if(subAccountsPopupNames.indexOf(popupName)!==-1){dp.track.fire('user_menu_subaccounts',[(typeof popupName==='string'?dp.tools.capitalize(popupName).replace(/-/g,' '):'')+' close']);}});dp.observer.add('dpTrackSmartSearch','popupCreate',function(popupName){dp.track.search(dp.popup.get(popupName));});dp.observer.add('dpTrackSearch','dpTipsCollect',function($content){dp.track.search($content);});},_arrangePageTracking:function(){var trackPageString='';var page;var determinePageStr=function(page){trackPageString=page;};var setUsualTrackPage=function(){dp.track.page=page;if(trackPageString){dp.track.page(trackPageString);trackPageString='';}else{if(dp.track.isPageTrackEnabled){dp.track.page('');}}
dp.track.isPageTrackEnabled=true;};dp.track.extraPage=page=function(page){dp.track.perform('page',page);};dp.track.page=determinePageStr;dp.loader.add(function(){if(dp.config.error){setUsualTrackPage();return false;}
dp.track.trackSearchQuery();dp.observer.add('dpTrackQueueLoaded','queueLoaded',function(){setUsualTrackPage();});});dp.observer.add('dpTrackPageCatcher','pushstate',function(){dp.track.page=determinePageStr;dp.track.page();});},_arrangeUserEnter:function(){if(dp.config.user.id){dp.storage.set('ui',dp.config.user.id+','+(dp.config.user.email||''),true);}
dp.observer.add('dpTrackQueueLoadedUserEnter','queueLoaded',function(){dp.observer.remove('dpTrackQueueLoadedUserEnter','queueLoaded');var data=dp.storage.remove('event');if(!data)return false;var data=data.split(',');var event={mapName:data[0],source:data[1],user:data[2]};switch(event.mapName){case'signup':if(event.user==='buyer'){if(dp.config.user.trialAvailable||data[3]==='trial'){if(dp.config.user.activeSubscription){event.trial='trial/yes';dp.track.fire('bssYT');}else{event.trial='trial/no';dp.track.fire('s_trialBilling');dp.track.fire('bssNT');}}else{if(event.source==='direct'){dp.track.fire('buyerss');}}
if(event.trial){event.mapName='register-buyer-trial';}else{event.mapName='register-buyer';}}else{event.mapName='register-seller';if(event.source==='direct'){dp.track.fire('sellerss');}}
break;case'login':event.mapName='user-logged';var loginEvent;switch(event.source){case'google':loginEvent='l_google_s';break;case'fb':loginEvent='l_fb_s';break;case'direct':loginEvent='l_direct_s';break;default:loginEvent='l_not_specified_s';break;}
if(loginEvent){dp.track.fire(loginEvent,[event.source]);}
break;}
dp.track.goal(event);});},perform:function(action,params){if(!action||typeof action!='string')throw new Error('dp.track.perform: invalid action given '+action);dp.observer.fire('dpTrackEvent',[action,params]);},search:function($scope){$('[data-smart-event]',$scope).each(function(){$(this).off('.seTrack').on('click.seTrack',function(){var fireEvents=this.getAttribute('data-smart-event').split(';');$(fireEvents).each(function(){var fireParams=this.split(',');dp.track.fire(fireParams[0],fireParams.slice(1));});});});}};var Tracker=function(name){this.name=name;this.goals=[];};Tracker.prototype.safeExecution=function(fun,scope,args,name){try{fun.apply(scope,args);}catch(e){if(['development','test'].indexOf(dp.config.environment)===-1){dp.track.fire('error_occured',[name||'',window.location.href,e.message||e]);}else{throw new Error(e.message||e);}}};Tracker.prototype.handleGoal=function(goalObj,params){var goalObjClone=dp.tools.extend({},goalObj);if(this.goals[goalObjClone.mapName]){goalObjClone.name=this.goals[goalObjClone.mapName];this.goal(goalObjClone,params);}};Tracker.prototype.goal=function(){};Tracker.prototype.checkLogAllowed=function(){var logName=dp.storage.get("dpTrackTest");return logName&&(logName.search('all')!==-1||logName.search(this.name)!==-1)};Tracker.prototype.log=function(){if(this.checkLogAllowed()){if(arguments.length>=2){console.log('dp.track.'+this.name+' '+arguments[0]+' "'+arguments[1]+'"',arguments[2],' answer is: ',arguments[3])}else{console.log('dp.track.log: ',arguments)}}};Tracker.prototype.listenEvents=function(){var _this=this;dp.observer.add('dpTrack'+dp.tools.capitalize(this.name),'dpTrackEvent',function(action,params){var actionName='handle'+dp.tools.capitalize(action);if(_this[actionName]){_this.safeExecution(_this[actionName],_this,params instanceof Array?params:[params],_this.name);}});};dp.track=track;dp.track.Tracker=Tracker;})();
;(function(){"use strict";var GoogleProto=function(name){this.name=name;this.schema={'s_trialCart':'RegistrationTrial/CartPage/User clicks on banner buy a free trial subscription plan','s_trialPopupClose':'RegistrationTrial/Quit/User closed window','s_trialBilling':'RegistrationTrial/Quit/User leave billing page','s_trialTopBan':'RegistrationTrial/SubscribePageBanner/User clicks on top banner','b_login_header':'Login/Header/User clicks on Login button with fields','b_login_header_fail':'Login/HeaderForm/User clicks on Login button without fields','b_login_info-left-buyer':'Login/QuickMenuBuy/User clicks on OK button with fields','b_login_info-left-buyer_fail':'Login/QuickMenuBuyForm/User clicks on OK button without fields','b_login_info-left-seller':'Login/QuickMenuSell/User clicks on OK button with fields','b_login_info-left-seller_fail':'Login/QuickMenuSellForm/User clicks on OK button without fields','b_login_popup':'Login/Popup/User clicks on login in popup window with fields','b_login_popup_fail':'Login/PopupForm/User clicks on login in popup window without fields','b_login_single':'Login/Single/User clicks on login on single login page','b_login_single_fail':'Login/Single/User clicks on login on single login page without fields','b_login_landing':'Login/Single/User clicks on login on landing page','b_login_landing_fail':'Login/Single/User clicks on login on landing page without fields or incorrect fields','b_login_promoPage':'Login/PromocodePage/User clicks on login under banner','b_login_popupAutoShow':'Login/AutoPopup/User sees popup form for login','b_login_popupClose':'Login/Quit/User closed window','b_login_from_favourites_click':function(){var result;switch(dp.config.action){case'view_item':result='Login/ItemPageAddToLightbox/User clicks on login button after addToLightbox on item page';break;case'cart':result='Login/CartPageAddToLightbox/User clicks on login button after addToLightbox on cart page';break;case'search':result='Login/SearchPageAddToLightbox/User clicks on login button after addToLightbox on search page';break;default:result=['Login/OtherPageAddToLightbox/User clicks on login button after addToLightbox on %s',[dp.config.action+' '+window.location.href]];break;}
return result;},'b_switch_login_pop':'Login/SignupForm/User clicks on Login from Signup page','l_direct_s':'Login/Success/User successfully log in','fb_login_head':'LoginFb/Header/User clicks on login with Fb','fb_login_loginPopup':'LoginFb/LoginForm/User clicks on login popup window login with Fb','fb_login_signPopup':'LoginFb/SignupForm/User clicks on signup popup window login with Fb','fb_login_signPage':'LoginFb/SignupPage/User clicks on signup page login with Fb','l_fb_s':'LoginFb/Success/User successfully log in with Fb','l_google_s':'LoginGoogle/Success/User successfully log in with Google','l_not_specified_s':'LoginSocialNetwork/Success/User successfully log in with %s','buyerss':'RegistrationBuyer/Success/User successfully registered as a buyer','bssYT':'RegistrationBuyer/Success/User successfully registered as a buyer -YesTrial','bssNT':'RegistrationBuyer/Success/User successfully registered as a buyer -NoTrial','b_sign_from_favourites_clck':function(){var result;switch(dp.config.action){case'view_item':result='RegistrationBuyer/ItemPageAddToLightbox/User clicks on Create an acc button after addToLightbox on item page';break;case'cart':result='RegistrationBuyer/CartPageAddToLightbox/User clicks on Create an acc button after addToLightbox on cart page';break;case'search':result='RegistrationBuyer/SearchPageAddToLightbox/User clicks on Create an acc button after addToLightbox on search page';break;default:result=['RegistrationBuyer/OtherPageAddToLightbox/User clicks on Create an acc button after addToLightbox on %s',[dp.config.action+' '+window.location.href]];break;}
return result;},'b_regSubmitBtn':'RegistrationBuyer/Create an account/User clicks on Create an Acc on signup page','b_regQuick_menu':'RegistrationBuyer/QuickMenuBuy/User clicks buy stock files easily','b_regQuick_menu_in':'RegistrationBuyer/QuickMenuBuyCreateAcc/User clicks buy stock files easily and create an account','b_switch_sign_pop':'RegistrationBuyer/LoginForm/User clicks register from login popup','b_regHeader':'RegistrationBuyer/Header/User clicks on register button','b_regSubscribe':'RegistrationBuyer/Subscribe/User clicks on register button','b_regSearchPanel':'RegistrationBuyer/HyperlinkNearSearchPanel/User clicks on register hyperlink near the search panel','b_regFooter':'RegistrationBuyer/Footer/User clicks on register button','b_regSearchCaption':'RegistrationBuyer/UnderFilterSearch/User clicks on register button','b_regTab_image_banner':'RegistrationBuyer/PhotosPage/User clicks on register banner','b_regTab_image_btn':'RegistrationBuyer/PhotosPage/User clicks on register button','b_regTab_vector_banner':'RegistrationBuyer/VectorsPage/User clicks on register banner','b_regTab_vector_btn':'RegistrationBuyer/VectorsPage/User clicks on register button','b_regTab_editorial_banner':'RegistrationBuyer/EditorialPage/User clicks on register banner','b_regTab_editorial_btn':'RegistrationBuyer/EditorialPage/User clicks on register button','b_regTab_video_banner':'RegistrationBuyer/VideosPage/User clicks on register banner','b_regTab_video_btn':'RegistrationBuyer/VideosPage/User clicks on register button','b_regTab_freetrial_banner':'RegistrationTrial/TrialSubscriptionPage/User clicks on banner buy absolutely free rightward of images','b_regTab_freetrial_head':'RegistrationTrial/TrialSubscriptionPage/User clicks on banner download photos and vectors images for free leftward of images','b_regTab_freetrial_sub2':'RegistrationTrial/TrialSubscriptionPage/User clicks on banner sign in or log in down','b_regTab_freetrial_sub3':'RegistrationTrial/TrialSubscriptionPage/User clicks on banner activate free trial down','b_regTab_freetrial_sub4':'RegistrationTrial/TrialSubscriptionPage/User clicks on banner download stock images','b_regAutoPopup':'RegistrationBuyer/AutoPopup/User sees popup form for registration','b_regEmptyCart':'RegistrationBuyer/CartPageCreateAcc/User clicks create an account at the cart page','b_regSubsMonth':'RegistrationBuyer/SubscribePageBuy/User clicks buy monthly subscription plan','b_regSubsDay':'RegistrationBuyer/SubscribePageBuy/User clicks buy daily subscription plan','b_regSubsCred':'RegistrationBuyer/SubscribePageBuy/User clicks buy credits plan','b_regSubsBtn':'RegistrationBuyer/SubscribePageRegAcc/User clicks register an account on subscribe page','b_regPromocodePage':'RegistrationBuyer/PromocodePage/User clicks register a free account','b_regSellerPrice':'RegistrationBuyer/SellerPricePage/User clicks register as a buyer now button','s_regSellerPriceLink':'RegistrationSeller/SellerPricePage/User clicks on contributors account hyperlink','s_regSellerPriceBtn':'RegistrationSeller/SellerPricePage/User clicks register as a contibutor now button','b_regPromo':'RegistrationBuyer/PromoPage/User clicks register as a buyer now button','s_regPromo':'RegistrationSeller/PromoPage/User clicks register as a contributor now button','b_regAffilTop':'RegistrationBuyer/AffiliatePage/User clicks register as a buyer now button in top','b_regAffilBot':'RegistrationBuyer/AffiliatePage/User clicks register as a buyer now button in down','s_regAffilTop':'RegistrationSeller/AffiliatePage/User clicks register as a contributor now button in top','s_regAffilBot':'RegistrationSeller/AffiliatePage/User clicks register as a contributor now button in down','b_regSignupClose':'RegistrationBuyer/Quit/User closed window','sellerss':'RegistrationSeller/Success/User successfully registered as a seller','s_regQuick_menu':'RegistrationSeller/QuickMenuSell/User clicks buy stock files easily','s_regQuick_menu_in':'RegistrationSeller/QuickMenuSellCreateAcc/User clicks buy stock files easily and create an account','s_regFooter':'RegistrationSeller/FooterContibutor/User clicks in footer register as a contibutor','b_reg_index_credit':'RegistrationBuyer/MainPageUnderSliderButton/User clicks on step1 credits','b_reg_index_subscribe':'RegistrationBuyer/MainPageUnderSliderButton/User clicks on step2 plans subscriptions','b_reg_index_banner':'RegistrationBuyer/MainPageUnderSliderButton/User clicks on step3 banner','b_reg_indexPageBtn':'RegistrationBuyer/MainPageUnderSliderButton/User clicks on register button','s_reg_indexPageBtn':'RegistrationSeller/MainPageUnderSliderButton/User clicks on register button','b_reg_themexpert_mainBanner':'RegistrationBuyer/ThemexpertPage/User clicks on banner register','b_reg_themexpert_credit':'RegistrationBuyer/ThemexpertPage/User clicks on step1 credits','b_reg_themexpert_subscribe':'RegistrationBuyer/ThemexpertPage/User clicks on step2 plans subscriptions','b_reg_themexpert_banner':'RegistrationBuyer/ThemexpertPage/User clicks on step3 banner','b_reg_themexpertPageBtn':'RegistrationBuyer/ThemexpertPage/User clicks on button buyer','s_reg_themexpertPageBtn':'RegistrationSeller/ThemexpertPage/User clicks on button seller','b_reg_fotoskaufen_mainBanner':'RegistrationBuyer/FotoskaufenPage/User clicks on banner register','b_reg_fotoskaufen_credit':'RegistrationBuyer/FotoskaufenPage/User clicks on step1 credits','b_reg_fotoskaufen_subscribe':'RegistrationBuyer/FotoskaufenPage/User clicks on step2 plans subscriptions','b_reg_fotoskaufen_banner':'RegistrationBuyer/FotoskaufenPage/User clicks on step3 banner','b_reg_fotoskaufenPageBtn':'RegistrationBuyer/FotoskaufenPage/User clicks on button buyer','s_reg_fotoskaufenPageBtn':'RegistrationSeller/FotoskaufenPage/User clicks on button seller','b_reg_grafiker_mainBanner':'RegistrationBuyer/GrafikerPage/User clicks on banner register','b_reg_grafiker_credit':'RegistrationBuyer/GrafikerPage/User clicks on step1 credits','b_reg_grafiker_subscribe':'RegistrationBuyer/GrafikerPage/User clicks on step2 plans subscriptions','b_reg_grafiker_banner':'RegistrationBuyer/GrafikerPage/User clicks on step3 banner','b_reg_grafikerPageBtn':'RegistrationBuyer/GrafikerPage/User clicks on button buyer','s_reg_grafikerPageBtn':'RegistrationSeller/GrafikerPage/User clicks on button seller','b_reg_stockphotosecrets_mainBanner':'RegistrationBuyer/StockphotosecretsPage/User clicks on banner register','b_reg_stockphotosecrets_credit':'RegistrationBuyer/StockphotosecretsPage/User clicks on step1 credits','b_reg_stockphotosecrets_subscribe':'RegistrationBuyer/StockphotosecretsPage/User clicks on step2 plans subscriptions','b_reg_stockphotosecrets_banner':'RegistrationBuyer/StockphotosecretsPage/User clicks on step3 banner','b_reg_stockphotosecretsPageBtn':'RegistrationBuyer/StockphotosecretsPage/User clicks on button buyer','s_reg_stockphotosecretsPageBtn':'RegistrationSeller/StockphotosecretsPage/User clicks on button seller','b_reg_adv-ps-comp_mainBanner':'RegistrationBuyer/AdvancedPCPage/User clicks on banner register','b_reg_adv-ps-comp_credit':'RegistrationBuyer/AdvancedPCPage/User clicks on step1 credits','b_reg_adv-ps-comp_subscribe':'RegistrationBuyer/AdvancedPCPage/User clicks on step2 plans subscriptions','b_reg_adv-ps-comp_banner':'RegistrationBuyer/AdvancedPCPage/User clicks on step3 banner','b_reg_adv-ps-compPageBtn':'RegistrationBuyer/AdvancedPCPage/User clicks on button buyer','s_reg_adv-ps-compPageBtn':'RegistrationSeller/AdvancedPCPage/User clicks on button seller','b_reg_amp_mainBanner':'RegistrationBuyer/AmpPage/User clicks on banner register','b_reg_amp_credit':'RegistrationBuyer/AmpPage/User clicks on step1 credits','b_reg_amp_subscribe':'RegistrationBuyer/AmpPage/User clicks on step2 plans subscriptions','b_reg_amp_banner':'RegistrationBuyer/AmpPage/User clicks on step3 banner','b_reg_ampPageBtn':'RegistrationBuyer/AmpPage/User clicks on button buyer','s_reg_ampPageBtn':'RegistrationSeller/AmpPage/User clicks on button seller','b_reg_webhostingbuzz_mainBanner':'RegistrationBuyer/WebhostingbuzzPage/User clicks on banner register','b_reg_webhostingbuzz_credit':'RegistrationBuyer/WebhostingbuzzPage/User clicks on step1 register','b_reg_webhostingbuzz_subscribe':'RegistrationBuyer/WebhostingbuzzPage/User clicks on step2 apply your promo code','b_reg_webhostingbuzz_banner':'RegistrationBuyer/WebhostingbuzzPage/User clicks on step3 download','b_reg_tempmonster50_mainBanner':'RegistrationBuyer/TemplatemonsterPage/User clicks on banner register','b_reg_tempmonster50_credit':'RegistrationBuyer/TemplatemonsterPage/User clicks on step1 credits','b_reg_tempmonster50_subscribe':'RegistrationBuyer/TemplatemonsterPage/User clicks on step2 plans subscriptions','b_reg_tempmonster50_banner':'RegistrationBuyer/TemplatemonsterPage/User clicks on step3 banner','b_reg_tempmonster50PageBtn':'RegistrationBuyer/TemplatemonsterPage/User clicks on button buyer','s_reg_tempmonster50PageBtn':'RegistrationSeller/TemplatemonsterPage/User clicks on button seller','b_reg_namecheap_mainBanner':'RegistrationBuyer/NameCheapPage/User clicks on banner register','b_reg_namecheap_credit':'RegistrationBuyer/NameCheapPage/User clicks on step1 register','b_reg_namecheap_subscribe':'RegistrationBuyer/NameCheapPage/User clicks on step2 apply your promo code','b_reg_namecheap_banner':'RegistrationBuyer/NameCheapPage/User clicks on step3 download',mobile_landing:'Mobile/%s/%s','t_show_banner_ViewItemProffer':'ItemPage/Banner - ViewItemProffer/Impression','t_click_banner_ViewItemProffer':'ItemPage/Banner - ViewItemProffer/Click','t_close_banner_ViewItemProffer':'ItemPage/Banner - ViewItemProffer/Close','click_download_button':'ItemPage/Download - AllClicks/%s','show_download_button':'ItemPage/Download - Impressions/%s','click_red_download_button':'ItemPage/Donwload - Red - Clicks/%s','show_red_download_button':'ItemPage/Donwload - Red - Impressions/%s','click_download_button_users':'ItemPage/Download - %s/%s','click_download_button_users_cart':'Cart/Download - %s/%s','click_download_button_preview':'ItemPage/Download - PreviewShow/%s','show_download_button_preview':'ItemPage/Download - PreviewClick/%s','same_photos_click':'SimilarItem/%s/%s','view_item_click':'SearchItem/%s/%s','head_search_click':'SearchPlace/HeaderSearch/%s','main_search_click':'SearchPlace/MainSearch/%s','category_item_click':'Categories/%s/User choose a category','broken_page_error':'Error/404/%s','error_occured':'Tracking error/%s on %s/yells %s','test_event':'%s/%s/%s/%s/%s','FunnelSearchRegistration':'Funnel/Search - Registration/%s','version_3_1_header_event':function(){return'Header/'+'%s/'+dp.config.action;},'version_3_1_subscribe_event':function(){return'Subscribe/'+'%s/'+dp.config.action;},'version_3_1_mainpage_event':'Main Page/%s/%s','version_3_1_footer_event':'Footer/%s/%s','advanced_horizontal_filter_change':'Advanced filter Vertical/%s/%s','advanced_vertical_filter_change':'Advanced filter Horizontal/%s/%s','lightbox_add_icon_click':function(){var map={'view_item':'ItemPage','home':'User Menu'};var mappedAction=map[dp.config.action];return(mappedAction?mappedAction:'Listing')+'/Add to Lightbox/%s';},'cart_add_icon_click':function(){var map={'view_item':'ItemPage','home':'User Menu'};var mappedAction=map[dp.config.action];return(mappedAction?mappedAction:'Listing')+'/Add to Cart/%s';},'viewitem_credits_banner_click':'ItemPage/Banner - Buy - Credits/','viewitem_subscription_banner_click':'ItemPage/Banner - Buy - Subscription/',subscription_click:function(){var data=dp.storage.get('ui');if(!data)return false;data=data.split(',');return'GoToSubscribe/'+data[0]+' or '+data[1]+'/-';},'affiliate_origin':'Afiliates/%s/%s','user_menu_subaccounts':'User Menu/Subaccounts/%s','user_menu_new':'User Menu/Listing - New Files/%s','user_menu_new_more':'User Menu/Listing - New Files/\\more','user_menu_recent':'User Menu/Listing - Recent Collections/%s','user_menu_buy':'User Menu/Buy - Contact/%s','user_menu_main':'User Menu/Main/','user_menu_buyer':'User Menu/Buyer/','user_menu_seller':'User Menu/Seller/','user_menu_profile':'User Menu/Profile/','user_menu_lightboxes':'User Menu/Lightboxes/','user_menu_attr':'User Menu/Attraction/','user_menu_quick':'User Menu/Quick Menu/%s','user_menu_cat':'User Menu/Category/','b_regLpSubmitBtn':'RegistrationBuyer/Create an account/User clicks on Create an Acc on landing page','fb_login_signLanding':'RegistrationBuyer/Create an account/User clicks on Create an Acc by Facebook on landing page','landing_event':'Support/%s/%s','transaction_first':'Buy/1st Purchase/%s/%s','transaction_second':'Buy/2nd+ Purchase/%s/%s','payment_failed':'Payments/PaymentsFailed/%s','search_page_sort_button':'Listing/Tabs/%s','search_page_layout_button':'Listing/Layout/%s','buy_button_clicked':'Buy/%s/%s','lightboxes_select_rows':'User Menu/Lightboxes/select rows','lightboxes_select_row':'User Menu/Lightboxes/select row','lightboxes_icon':'User Menu/Lightboxes/icon','lightboxes_icon_template':'User Menu/Lightboxes/icon template','lightboxes_title':'User Menu/Lightboxes/title','lightboxes_title_template':'User Menu/Lightboxes/title template','lightboxes_add_to_cart':'User Menu/Lightboxes/add to cart','lightboxes_add_to_cart_template':'User Menu/Lightboxes/add to cart template','lightboxes_remove_to_cart':'User Menu/Lightboxes/remove from cart','lightboxes_remove_to_cart_template':'User Menu/Lightboxes/remove from cart template','lightboxes_view':'User Menu/Lightboxes/view','lightboxes_view_template':'User Menu/Lightboxes/view template','lightboxes_delete':'User Menu/Lightboxes/delete','lightboxes_delete_template':'User Menu/Lightboxes/delete template','lightboxes_edit':'User Menu/Lightboxes/edit','lightboxes_edit_template':'User Menu/Lightboxes/edit template','lightboxes_email':'User Menu/Lightboxes/email','lightboxes_email_template':'User Menu/Lightboxes/email template','lightboxes_bottom_delete':'User Menu/Lightboxes/bottom delete','lightboxes_bottom_cart':'User Menu/Lightboxes/bottom cart','lightboxes_bottom_move':'User Menu/Lightboxes/bottom move','lightboxes_top_create':'User Menu/Lightboxes/top create','lightboxes_top_favourites':'User Menu/Lightboxes/top favourites','lightboxes_top_lightboxes':'User Menu/Lightboxes/top lighboxes','lightboxes-create-folder':'User Menu/Lightboxes/popup create','lightboxes-create-folder-close':'User Menu/Lightboxes/popup create close','lightboxes-create-folder-exhibitionis':'User Menu/Lightboxes/popup create show world','lightboxes-delete-folder':'User Menu/Lightboxes/popup delete','lightboxes-delete-folder-close':'User Menu/Lightboxes/popup delete close','lightboxes-share-folder':'User Menu/Lightboxes/popup email','lightboxes-share-folder-close':'User Menu/Lightboxes/popup email close','lightboxes-edit-folder':'User Menu/Lightboxes/popup edit','lightboxes-edit-folder-close':'User Menu/Lightboxes/popup edit close','lightboxes-edit-folder-exhibitionis':'User Menu/Lightboxes/popup edit show world','lightboxes_dragged_and_dropped':'User Menu/Lightboxes/drug-n-drop','lightboxes_remove_favourites':'User Menu/Lightboxes/remove from favourites','google_fall_back':'tracking-script/fallback-loaded/google-analytics','search_result':'Search/%s/%s','search_no_result':'Search/NoResult/%s','jquery_error':'JavaSript Error from $.error/%s/%s','jquery_very_bad_error':'$.error is broken in /%s on %s/yells %s','search_hints_old':'search-hints-old-show/%s/%s','search_hints':'search-hints-show/%s/%s','payments_system':'Payments/PaymentsSystem/%s','signup_popup_caller_arrived':'signup-popup-caller/signup-popup-arrived-alive-3/%s','signup_popup_caller':'signup-popup-caller/signup-popup-arrived/%s','buyer_menu_offer':'subscribe/purchase-opened/%s','payment_success':'Payments/PaymentsSuccess/%s','subscription_purchase':'subscription-purchase/offset %s/%s','show_standart_view_item':'ItemPage/standart/%s','show_quick_view_item':'ItemPage/popup/%s','other_quick_view_item':'ItemPage/Click %s/%s','nav_quick_view_item':'ItemPage/Navigation %s/%s','show_inline_2_view_item':'ItemPage/pull-down white/%s','show_inline_3_view_item':'ItemPage/pull-down black/%s','switch_inline_view_item_mode':'ItemPage/SwitchInlineMode/%s',file_timestamp:function(){if(!document.referrer||document.referrer.match(/google.*|baidu.*/)){return'SEI/%s/%s';}else{return false;}}};};GoogleProto.prototype=new dp.track.Tracker();GoogleProto.prototype.handleFire=function(){this.safeExecution(function(eventCode,strArray){var schemaValue=this.schema[eventCode];var eventString;var parse=function(str,replaceArray){var i=0;return str.replace(/%s/g,function(){if(typeof replaceArray[i]==="undefined"){throw new Error("track event description should be fully specified");}
return replaceArray[i++];});};switch(typeof schemaValue){case'function':schemaValue=schemaValue();if(!schemaValue)return;if(schemaValue instanceof Array){strArray=[].concat(strArray,schemaValue[1]);schemaValue=schemaValue[0];}
break;case'undefined':throw{message:'googleProto.schema: no schema data for '+eventCode};break;default:break;}
schemaValue=schemaValue.replace(/\//g,'~/~');eventString=strArray?parse(schemaValue,strArray):schemaValue;this._handleEvents.apply(this,eventString.split('~/~'));},this,arguments,'smartEvent.fire');};GoogleProto.prototype._handleEvents=function(category,action,opt_label,opt_value,opt_noninteraction){opt_value=Math.floor(opt_value)||0;opt_noninteraction=typeof opt_noninteraction=='undefined'?true:!!opt_noninteraction;this.handleEvents([category,action,opt_label,opt_value,opt_noninteraction]);};dp.track.GoogleProto=GoogleProto;})();
;(function(){"use strict";var Google=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();this.id=dp.config.trackers.google;this.goals={'trial-registration-yes':'/ingoing/buyer_reg_trial_end','register-buyer-trial':'/ingoing/registration/success/%user%/%source%/%trial%','register-buyer':'/ingoing/registration/success/buyer/%source%','register-seller':'/ingoing/registration/success/seller/%source%','user-logged':'/ingoing/login/success/%user%/%source%'};this.transactions={allowed:['pay-credits','pay-subscription'],actions:{_addTrans:function(invoice){return[invoice.id,'',Math.floor(parseFloat(invoice.price)*100)/100,0,0,invoice.city||'',invoice.state||'',invoice.country||''];},_addItem:function(invoice){return[invoice.id,dp.track.billingMapper(invoice.billing),invoice.name,invoice.type,invoice.price,invoice.quantity];},_trackTrans:undefined}};this.organics={'go.mail.ru':'q','search.ukr.net':'q','search.bigmir.net':'z','meta.ua':'q','nigma.ru':'s','search.qip.ru':'query','bpes.com.ua':'q','webalta.ru':'q','search.i.ua':'q','search.icq.com':'q'};this.resExpCoockie='resExp';this.resExpExcludeCoockie='exclude';if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();this.createScript();this.action('_setAccount',this.id);this.overrideCampaignParams();var domainName=/([a-z0-9-]+\.[a-z0-9-]+)\.?$/.exec(document.domain)[0];this.action('_setDomainName',domainName);this.action('_addIgnoredRef',domainName);this.initOrganic();this.setCustomVariables();this.fireDirectTraffic();if(hasGroupLog){console.groupEnd();}};Google.prototype=new dp.track.GoogleProto('google');Google.prototype.handleAction=function(params){this.action(params[0],params[1]);};Google.prototype.handleTransaction=function(params){if(!params||typeof params!=='object')throw'dp.track.google.handlers.transaction: no params given';if(!params.id||!params.billing||!params.name||!params.product||!params.quantity)throw'dp.track.google.handlers.transaction: invalid params given';if(this.transactions.allowed.indexOf('pay-'+params.product)!==-1){for(var action in this.transactions.actions){var handler=this.transactions.actions[action];var data=[];if(typeof handler==='function'){data=handler(params);}
this.action(action,data);}}};Google.prototype.handleSocial=function(paramObj){this.action('_trackSocial',[paramObj.network,paramObj.action]);};Google.prototype.handleEvents=function(params){if(!(params instanceof Array)||params.length<5)throw'dp.track.google.handleEvents: invalid params given';this.event(params[0],params[1],params[2],params[3],params[4]);};Google.prototype.handlePage=function(page){if(page){this.action('_set',['page',page]);}
this.action('_trackPageview');};Google.prototype.goal=function(goalObj){this.handlePage(dp.tools.mergeObjectIntoString(goalObj.name,goalObj,this.name));if(goalObj.mapName==='user-logged'){dp.storage.set(this.resExpCoockie,this.resExpExcludeCoockie,true);}};Google.prototype.createScript=function(){window._gaq=window._gaq||[];dp.observer.add('dpTrackGoogle','windowOnload',function(){if(_gaq instanceof Array){dp.track.fire('google_fall_back');var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=(document.location.protocol==='https:'?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);}});var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=(document.location.protocol==='https:'?'https:':'http:')+'//stats.g.doubleclick.net/dc.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);};Google.prototype.fireDirectTraffic=function(){var _this=this;dp.loader.add(function(){if(!document.referrer&&dp.history.states.isNewSession){_this.event('Traffic','Direct',true,0,true);}});};Google.prototype.overrideCampaignParams=function(){var _this=this;var overrideAffiliateParams=function(){var aff=dp.url().data.param.query.aff;if(aff){var documentReferrer=(document.referrer?dp.url(document.referrer).data.attr.host:'tracking');_this.action('_set',['campaignParams','utm_source='+documentReferrer.replace(/(http:\/\/|https:\/\/|www\.)/ig,'')+'&utm_medium=affiliate'+'&utm_campaign='+aff]);return true;}};var overrideImagesRes=function(){if(!document.referrer)return false;var regex=/(?:.*(google.*)(?:\/url.*source=images|\/imgres|\/blank|\source=lnms).*)|(?:.*images\.(yandex.*)\/yandsearch.*)|(?:.*(bing.*)\/images\/search.*)|(?:.*(?:image|stu)\.(baidu.*)\/i.*)/;var result=document.referrer.match(regex);if(result&&result.length>1){for(var i=1;i<result.length;i++){if(result[i]){_this.action('_set',['campaignParams','utm_source='+result[i]+'&utm_medium=organic images']);return;}}}};var overrideSocialShareRes=function(){if(document.location.href.search('share_source')===-1)return;var shareSource=dp.url().param('share_source');if(!shareSource||shareSource.search('-')===-1)return;var shareArray=shareSource.split('-');if(shareArray.length!==2||!shareArray[1]||isNaN(shareArray[1]))return;_this.action('_set',['campaignParams','utm_source='+shareArray[0]+'&utm_medium=sma_share&utm_campaign='+shareArray[1]]);};!overrideAffiliateParams()&&!overrideImagesRes()&&!overrideSocialShareRes();};Google.prototype.initOrganic=function(){for(var organic in this.organics){if(!this.organics.hasOwnProperty(organic))continue;this.action('_addOrganic',[organic,this.organics[organic]]);}};Google.prototype.setCustomVariables=function(){var userType=dp.config.user.type;if(userType==='guest'){dp.storage.set('u-guest','1',true,0)}else{if(dp.storage.get('u-guest')){userType='guest'}}
this.setCustomVar(1,'Logged',dp.config.user.id?'Yes':'No',2);this.setCustomVar(2,'UserType',userType,userType==='guest'?2:1);this.set3rdCustomVar();if(dp.seoExp){this.setCustomVar(4,'Files 31770',dp.seoExp,3);}
if(dp.config.action==='search'&&typeof dp.config.search.searchTabAnalyticsVariable!=='undefined'){this.setCustomVar(4,'Search Tabs',dp.config.search.searchTabAnalyticsVariable,2);}
if(typeof dp.config.viewItemMode!=='undefined'){var map={0:'standard',1:'popup',2:'pull-down white',3:'pull-down black'};this.setCustomVar(5,'item page',map[dp.config.viewItemMode],2);}};Google.prototype.set3rdCustomVar=function(){var normStr='norm';var type=dp.storage.get(this.resExpCoockie);if(type===this.resExpExcludeCoockie){return;}
if(!type){if(dp.config.user.id){return;}else{var random=dp.tools.string((new Date).getTime()).slice(-2);if(random>9){dp.storage.set(this.resExpCoockie,this.resExpExcludeCoockie,true);return;}else{type=random%2?normStr:'exp';dp.storage.set(this.resExpCoockie,type,true);}}}
var maps=[{range:[700,1000],layout:['big','wide']},{range:[1000,1099]},{range:[1300,1599]},{range:[1700,1999]}];var layoutDefault=['big','normal'];for(var i=0;i<maps.length;i++){var range=maps[i].range;if(window.innerWidth>range[0]&&window.innerWidth<range[1]){var layout=maps[i].layout?maps[i].layout:layoutDefault;layout=layout[type===normStr?0:1];dp.config.search.layoutExperiment=layout;this.setCustomVar(3,'search size',range[0]+'-'+range[1]+' '+layout,2);return;}}};Google.prototype.action=function(name,params){if(typeof name!=='string')throw'dp.track.google.action: empty or invalid name for _gaq.push: '+name;if(!(params instanceof Array))params=dp.tools.mergeToArray(params);var query=dp.tools.mergeToArray(name,params);var result=_gaq.push(query);this.log('action',name,query,result);};Google.prototype.setCustomVar=function(){this.action('_setCustomVar',arguments);};Google.prototype.event=function(category,action,opt_label,opt_value,opt_noninteraction){if(!category||!action)throw'dp.track.google.event: empty category or action';if(!opt_noninteraction){var msg='Session is broken by opt_noninteraction '+Array.prototype.join.apply(arguments,[' ']);window.onerror(msg,window.location.href,42);dp.track.fire('error_occured',[msg,window.location.href,'DPWEB-11737']);}
this.action('_trackEvent',[category.toString(),action.toString(),opt_label.toString(),parseInt(opt_value),!!opt_noninteraction]);};Google.prototype.eventFromAjax=function(page,source,refSource){if(!page||!source||!refSource)throw'dp.track.google.eventFromAjax: empty page, source or refSource';document.ajaxRefSource=refSource;document.ajaxSource=source;this.event(page,source,refSource,0,true);};dp.observer.add('dpTrackGoogle','dpTrackInit',function(){new Google();});})();
;(function(){var Webgains=function(){var neededParams=['source','utm_source'];var urlParams=this.parseUrlParams(neededParams);var key=this.name.toLowerCase();if(urlParams['utm_source']===key&&typeof urlParams['source']!=='undefined'){dp.storage.set(key,urlParams['source'],true);}
this.listenEvents();};Webgains.prototype=new dp.track.Tracker('Webgains');Webgains.prototype.parseUrlParams=function(keys){var urlParams={};for(var i=0;i<keys.length;i++){var currentParam=dp.url().param(keys[i]);if(typeof currentParam!=='undefined'){urlParams[keys[i]]=currentParam;}}
return urlParams;};Webgains.prototype.handleTransaction=function(params){var protocol=location.protocol.toLowerCase()==='https:'?'https':'http';var wgImg=document.createElement('img');var wgParams=this.gatherWebgainsParams();var requestString=protocol+'://'+dp.config.trackers.webgains
+'/transaction.html?wgver=1.2&wgprotocol='+protocol+'&wgsubdomain=track&wgrs=1'
+'&wglang='+wgParams.wglang+'&wgprogramid='+wgParams.wgprogramid+'&wgeventid='+wgParams.wgeventid
+'&wgvalue='+JSON.stringify(params.price)+'&wgorderreference='+params.id.replace(/[a-zA-Z]\-/,'')
+'&wgCurrency=USD&wgcomment=&wgitems=&wgcustomerid=&wgchecksum=&wgvouchercode=';wgImg.src=requestString;this.log(requestString);};Webgains.prototype.gatherWebgainsParams=function(){var params={au:{wglang:'en_EN',wgprogramid:'10053',wgeventid:'16657'},sp:{wglang:'es_ES',wgprogramid:'6309',wgeventid:'10029'},de:{wglang:'de_DE',wgprogramid:'6307',wgeventid:'10027'},default_en:{wglang:'en_US',wgprogramid:'6305',wgeventid:'10009'}};if(dp.storage.get(this.name.toLowerCase())==='webgainsau')return params['au'];if(params.hasOwnProperty(dp.config.lang))return params[dp.config.lang];return params['default_en'];};dp.observer.add('dpTrackWebgains','dpTrackInit',function(){new Webgains();});})();
;(function(){"use strict";var GoogleUniversal=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();this.id=dp.config.trackers.googleUniversal;this.goals={'trial-registration-yes':'/ingoing/buyer_reg_trial_end','register-buyer-trial':'/ingoing/registration/success/%user%/%source%/%trial%','register-buyer':'/ingoing/registration/success/buyer/%source%','register-seller':'/ingoing/registration/success/seller/%source%','user-logged':'/ingoing/login/success/%user%/%source%'};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();this.createScript();this.action('create',this.id,/([a-z0-9-]+\.[a-z0-9-]+)\.?$/.exec(document.domain)[0]);if(hasGroupLog){console.groupEnd();}};GoogleUniversal.prototype=new dp.track.GoogleProto('googleUniversal');GoogleUniversal.prototype.handleTransaction=function(params){var itemObj={'id':params.id,'name':params.name,'sku':dp.track.billingMapper(params.billing),'category':params.type,'price':params.price,'quantity':params.quantity};var transObj={'id':params.id,'revenue':(Math.floor(parseFloat(params.price)*100)/100).toString()};ga('require','ecommerce');ga('ecommerce:addTransaction',transObj);ga('ecommerce:addItem',itemObj);ga('ecommerce:send');this.log('ecommerce','addTransaction',transObj);this.log('ecommerce','addItem',itemObj);};GoogleUniversal.prototype.handleEvents=function(params){if(params[4]){params.pop();params.push({'nonInteraction':1});}
this.action('send','event',params);};GoogleUniversal.prototype.handlePage=function(page){this.action('send','pageview',page);};GoogleUniversal.prototype.handleSocial=function(paramObj){var curUrl=window.location.hostname+window.location.pathname;this.action('send','social',[paramObj.network,paramObj.action,curUrl,{'page':curUrl}]);};GoogleUniversal.prototype.action=function(action,name,params){action=action||'send';if(typeof name!=='string')throw'dp.track.googleUniversal.action: empty or invalid name for ga: '+name;if(!(params instanceof Array))params=dp.tools.mergeToArray(params);var query=dp.tools.mergeToArray([action,name],params);var result=ga.apply(null,query);this.log('action',name,query,result);};GoogleUniversal.prototype.goal=function(goalObj){this.handlePage(dp.tools.mergeObjectIntoString(goalObj.name,goalObj,this.name));};GoogleUniversal.prototype.createScript=function(){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');};dp.observer.add('dpTrackGoogleUniversal','dpTrackInit',function(){new GoogleUniversal();});})();
;(function(){"use strict";var Yandex=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();this.id=dp.config.trackers.yandex;this.counter='yaCounter'+this.id;this.goals={'register-buyer':'register-buyer','register-buyer-trial':'register-buyer-trial','register-seller':'register-seller','pay-credits':'pay-credits','pay-subscription':'pay-subscription','trial-registration-yes':'trial-registration-yes','order-credits-and-subscriptions':'order-credits-and-subscriptions'};this.schema={click_download_button_users_cart:'cart_download',cart_add_icon_click:'add_cart',click_download_button_users:'itempage_download'};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.queues={};this.listenEvents();this.createScript();if(hasGroupLog){console.groupEnd();}};Yandex.prototype=new dp.track.Tracker('yandex');Yandex.prototype.handleTransaction=function(params){if(!params||!params.product)throw'dp.track.yandex.handlers.transaction: empty or invalid transaction type';this.handleGoal({mapName:'pay-'+params.product},params);};Yandex.prototype.handleFire=function(schemaCode){var code=this.schema[schemaCode];if(code){this.pushRun({run:function(code){window[this.counter].hit(code);this.log('hit event',code,'');},name:'fire',values:[code]});}};Yandex.prototype.goal=function(goal,params){this.pushRun({run:function(goal,params){var result=window[this.counter].reachGoal(goal.name,params);this.log('reach',goal.name,params,result);},name:'goal',values:[goal,params]});};Yandex.prototype.pushRun=function(params){var name=params.name;if(Object.prototype.hasOwnProperty.call(window,this.counter)){params.run.apply(this,params.values);}else{this.log(this.counter+' not ready yet, pushing '+name+' "'+(params.values[0].name?params.values[0].name:params.values[0])+'" to queue');if(!this.queues[name]){this.queues[name]=[];}
this.queues[name].push(params.values);}};Yandex.prototype.runQueue=function(){for(var o in this.queues){if(this.queues.hasOwnProperty(o)){for(var i=0;i<this.queues[o].length;i++){this[o].apply(this,this.queues[o][i]);}}}
this.queues=null;};Yandex.prototype.createScript=function(){var _this=this;var w=window,d=document,c='yandex_metrika_callbacks';(w[c]=w[c]||[]).push(function(){try{w[_this.counter]=new Ya.Metrika({id:_this.id,webvisor:true,clickmap:true,trackLinks:true,accurateTrackBounce:true,params:w.yaParams||{}});if(w.yaParams){_this.log('ecommerce','log',w.yaParams);}
_this.runQueue();}catch(e){dp.track.fire('error_occured',[_this.name,window.location.href,e.message]);}});var e=d.createElement('script');e.type='text/javascript';e.async=true;e.src=(d.location.protocol=='https:'?'https:':'http:')+'//mc.yandex.ru/metrika/watch.js';var s=d.getElementsByTagName('script')[0];s.parentNode.insertBefore(e,s);};dp.observer.add('dpTrackYandex','dpTrackInit',function(){new Yandex();});})();
;(function(){"use strict";var Remarketing=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();this.id1='979288468';var _this=this;this.remarketingCodes=(function(){var id1=_this.id1;var id2='997480590';return{firstVisitParams7:{id:id1,value:'0',label:'vC07CKzPmQgQlIP70gM',desc:'first visit 7'},firstVisitParams30:{id:id1,value:'0',label:'CtMhCKTQmQgQlIP70gM',desc:'first visit 30'},secondVisitParams7:{id:id1,value:'1.000000',label:'FDVMCNzovAkQlIP70gM',desc:'second visit 7'},secondVisitParams30:{id:id1,value:'1.000000',label:'G63ZCOTnvAkQlIP70gM',desc:'second visit 30'},searchParams7:{id:id1,value:'0',label:'pohdCPTVmQgQlIP70gM',desc:'search 7'},searchParams30:{id:id1,value:'0',label:'NXOLCOzWmQgQlIP70gM',desc:'search 30'},searchFilter:{image:{id:id1,value:'0',label:'BgfFCPzFmQgQlIP70gM',desc:'search filter image'},vector:{id:id1,value:'0',label:'1Tq0COzHmQgQlIP70gM',desc:'search filter vector'},video:{id:id1,value:'0',label:'7A4DCOTImQgQlIP70gM',desc:'search filter video'},editorial_only:{id:id1,value:'0',label:'rCqpCNzJmQgQlIP70gM',desc:'search filter editorial'}},registrationComplete:{id:id1,value:'0',label:'iI1WCLz6mQgQlIP70gM',desc:'registration complete'},paymentComplete:{id:id1,value:'0',label:'rdxECKTBmQgQlIP70gM',desc:'payment complete'},conversion:{credits:{id:id2,label:'HyPGCIrzrFYQjrHR2wM',desc:'bought credits'},creditsMore:{id:id2,label:'p_kmCMyPrVYQjrHR2wM',desc:'bought credits once again'},subscription:{id:id2,label:'XthrCIHzrFYQjrHR2wM',desc:'bought subscription'},subscriptionMore:{id:id2,label:'cgpgCP7IqlYQjrHR2wM',desc:'bought subscription once again'}}}})();this.goals={'register-buyer':'registrationComplete','register-buyer-trial':'registrationComplete','register-seller':'registrationComplete','pay-credits':'paymentComplete','pay-subscription':'paymentComplete'};var downloadClickEventParams={handler:'dynamicTag',additionalParams:'action-conversion'};this.schema={click_download_button_users:downloadClickEventParams,click_download_button_users_cart:downloadClickEventParams};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();this.trackEnterCount();if(hasGroupLog){console.groupEnd();}};Remarketing.prototype=new dp.track.Tracker('remarketing');Remarketing.prototype.handlePage=function(){this.dynamicTag(dp.config.action);};Remarketing.prototype.dynamicTag=function(action,params){var paramsObj={};var maxItemsNum=60;var url='//googleads.g.doubleclick.net/pagead/viewthroughconversion/'+this.id1+'/?value=0&guid=ON&script=0&';var concatUrl=function(str){url+=i+'='+str+'&';};switch(action){case'home':case'index':paramsObj['dynx_pagetype']='home';break;case'folder':case'search':paramsObj['dynx_pagetype']='searchresults';if(dp.config.widgets.depositSearch){paramsObj['dynx_itemid']=[];$(dp.config.widgets.depositSearch).depositSearch('getDepositItems').each(function(idx){if($(this).depositItem&&idx<maxItemsNum){paramsObj['dynx_itemid'].push($(this).depositItem('getItemId'));}});}
break;case'view_item':paramsObj['dynx_pagetype']='offerdetail';if(dp.config.widgets.depositViewItem){paramsObj['dynx_itemid']=$(dp.config.widgets.depositViewItem).depositViewItem('getItemId');}
break;case'cart':paramsObj['dynx_pagetype']='conversionintent';paramsObj['dynx_totalvalue']=1;if(dp.config.widgets.depositCart){var itemIds=$(dp.config.widgets.depositCart);if(itemIds.depositCart){itemIds=itemIds.depositCart('getItemsIds');if(itemIds.length){paramsObj['dynx_itemid']=itemIds.slice(0,maxItemsNum);}else{paramsObj['dynx_totalvalue']=0;}}}else{paramsObj['dynx_totalvalue']=0;}
break;case'action-conversion':paramsObj['dynx_pagetype']='conversion';if(params&&params[2]){paramsObj['dynx_itemid']=params[2];}
break;default:paramsObj['dynx_pagetype']='other';break;}
if(typeof paramsObj['dynx_totalvalue']==='undefined'){paramsObj['dynx_totalvalue']=1;}
for(var i in paramsObj){if(paramsObj[i]instanceof Array){for(var j=0;j<paramsObj[i].length;j++){concatUrl(paramsObj[i][j]);}}else{concatUrl(paramsObj[i]);}}
url=url.replace(/&$/,'');(new Image(1,1)).src=url;this.log('page type: ',paramsObj['dynx_pagetype'],[paramsObj,url]);};Remarketing.prototype.handleFire=function(code,params){var obj=this.schema[code];if(obj){this[obj.handler](obj.additionalParams,params);}};Remarketing.prototype.handleRemarketing=function(pathStr){var pathArray=pathStr.split('.');var params=this.remarketingCodes;for(var i=0;i<pathArray.length;i++){if(!params){return;}
params=params[pathArray[i]];}
if(params){this.perform('//googleads.g.doubleclick.net/pagead/viewthroughconversion/%id%/?value=%value%&label=%label%&guid=ON&script=0',params);}};Remarketing.prototype.goal=function(goal){this.handleRemarketing(goal.name);};Remarketing.prototype.perform=function(str,params){(new Image(1,1)).src=dp.tools.mergeObjectIntoString(str,params,this.name);this.log(params.id,params.value,params.label,params.desc);};Remarketing.prototype.trackEnterCount=function(){var _this=this;var eventName='remarketingTracking';var track=function(prefix){_this.handleRemarketing(prefix+'VisitParams7');_this.handleRemarketing(prefix+'VisitParams30');};dp.loader.add(function(){switch(dp.history.states.pageCounter){case 0:dp.history.states.isNewSession&&track('first');dp.observer.add(eventName,'pushstate',function(){dp.observer.remove(eventName,'pushstate');track('second');});break;case 1:track('second');break;}});};dp.observer.add('dpTrackRemarketing','dpTrackInit',function(){new Remarketing();});})();
;(function(){"use strict";var Facebook=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();var trackCodes=dp.config.trackers.facebook.split(',');this.id=trackCodes[0];this.doGoalMap={'register-buyer':trackCodes[1],'register-buyer-trial':trackCodes[1],'register-seller':trackCodes[1]};var customAudienceRegister='Registration';this.customAudienceMap={'register-buyer':customAudienceRegister,'register-buyer-trial':customAudienceRegister,'register-seller':customAudienceRegister,'order-credits-and-subscriptions':'Payment','user-logged':'Login'};this.goals=dp.tools.extend({},this.customAudienceMap,this.doGoalMap);this.transactions={'credits':trackCodes[2],'subscription':trackCodes[3]};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();this.createScript();this.action('addPixelId',this.id);this.action('track','PixelInitialized');if(hasGroupLog){console.groupEnd();}};Facebook.prototype=new dp.track.Tracker('facebook');Facebook.prototype.handleTransaction=function(params){var code=this.transactions[params.product];if(code){this.action('track',code,{'value':Math.floor(parseFloat(params.price)*100)/100,'currency':'USD'})}};Facebook.prototype.customAudience=function(goal){var event=this.customAudienceMap[goal];if(event){this.action('track',event);}};Facebook.prototype.doGoal=function(goal){goal=this.doGoalMap[goal];if(goal){this.action('track',goal);}};Facebook.prototype.goal=function(goal){this.doGoal(goal.mapName);this.customAudience(goal.mapName);};Facebook.prototype.action=function(action,name,params){params=params||{};_fbq.push([action,name,params]);this.log(action,name,params);};Facebook.prototype.createScript=function(){var _fbq=window._fbq||(window._fbq=[]);if(!_fbq.loaded){var fbds=document.createElement('script');fbds.async=true;fbds.src='//connect.facebook.net/en_US/fbds.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(fbds,s);_fbq.loaded=true;}};dp.observer.add('dpTrackFacebook','dpTrackInit',function(){new Facebook();});})();
;(function(){"use strict";var Bing=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();var registrationObject={ec:'bing-registration',ea:'buyer',el:'success'};this.goals={'register-buyer':registrationObject,'register-buyer-trial':registrationObject,'register-seller':registrationObject};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();this.createScript();if(hasGroupLog){console.groupEnd();}};Bing.prototype=new dp.track.Tracker('bing');Bing.prototype.handleTransaction=function(params){this.action({ec:'bing-payment',ea:'payment',el:'success',ev:0,gv:params.price});};Bing.prototype.goal=function(goalObj){this.action(goalObj.name);};Bing.prototype.createScript=function(){if(dp.config.environment==='production'){(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"4001099"};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");}else{window['uetq']=window['uetq']||[];}};Bing.prototype.action=function(params){window['uetq'].push(params);this.log(params.ec,params.ea,params);};dp.observer.add('dpTrackBing','dpTrackInit',function(){new Bing();});})();
;(function(){"use strict";var SalesDoubler=function(){var hasGroupLog=console.groupCollapsed&&this.checkLogAllowed();var registerGoalName={params:{trans_id:function(){return dp.config.user.id;}},page:'553',name:'registration'};this.trackUrl='//rdr.salesdoubler.com.ua/in/pixel/%page%/tracking.js?';this.goals={'register-buyer':registerGoalName,'register-buyer-trial':registerGoalName,'register-seller':registerGoalName};this.transactions={'credits':{page:'554',params:{sale_amount:'price',trans_id:'id'}},'subscription':{page:'555',params:{sale_amount:'price',trans_id:'id'}}};if(hasGroupLog){console.groupCollapsed(this.name+' init actions');}
this.listenEvents();if(hasGroupLog){console.groupEnd();}};SalesDoubler.prototype=new dp.track.Tracker('salesDoubler');SalesDoubler.prototype.handleTransaction=function(params){var map=this.transactions[params.product];var src=this.createUrl(map.page,map.params,params);this.action(src);this.log(params.name,map.page,src);};SalesDoubler.prototype.goal=function(goalObj){var src=this.createUrl(goalObj.name.page,goalObj.name.params);this.action(src);this.log(goalObj.name.name,goalObj.name.page,src);};SalesDoubler.prototype.createUrl=function(page,paramsObj,map){var src=dp.url(this.trackUrl.replace('%page%',page));for(var i in paramsObj){src.param(i,typeof paramsObj[i]==='function'?paramsObj[i]():map[paramsObj[i]]);}
return src.data.attr.source;};SalesDoubler.prototype.action=function(src){var script=document.createElement('script');var s=document.getElementsByTagName('script')[0];script.async=true;script.src=src;script.type='text/javascript';s.parentNode.insertBefore(script,s);};dp.observer.add('dpTrackSalesDoubler','dpTrackInit',function(){new SalesDoubler();});})();
;dp.tips={options:{depositItem:{display:{effect:'fade',effectSpeed:100,show:'mouseenter',hide:'mouseleave',hideTimeout:200,showTimeout:400},pointer:{show:false},template:{linking:'parent',priority:[['r',-77],'wright','rm','rt','rb',['l',-77],'wleft','lm','lt','lb','bm','bl','br','tm','tl','tr'],offset:{top:0,left:7}}}},$player:undefined,player:undefined,cache:{},defer:{},data:{},instances:{},callbacks:{},init:function(){dp.observer.add('dpTips','destroy',function(){dp.tips.hideAll();});},getAll:function(){var $tips;for(var i in dp.tips.instances){if(!dp.tips.instances.hasOwnProperty(i))continue;$tips=$tips?$tips.add(dp.tips.instances[i]):dp.tips.instances[i];}
return $tips;},hideAll:function(){var $tips=this.getAll();if($tips instanceof jQuery){$tips.trigger('hide');}},reposition:function(){var $tips=this.getAll();if($tips instanceof jQuery){$tips.trigger('position');}},setData:function(){if(arguments.length!==2){throw('dp.tips.setData: Invalid arguments given');}
if(arguments[0]instanceof jQuery){dp.tips._setData(arguments[0],arguments[1]);}else{var $targets=arguments[1];var data=arguments[0];for(var i in data){if(!data.hasOwnProperty(i))continue;dp.tips._setData($targets.filter('[data-type][data-id="'+i+'"]'),data[i]);}}},_setData:function($items,data){var _this=this;var thumbBigHeight=450;var set=function(item){var uuid=item.getAttribute('data-tips-id');if(!uuid){uuid=getUUID();item.setAttribute('data-tips-id',uuid);}
if(parseInt(data.dimensions.width)>parseInt(data.dimensions.height)){data.dimensions.swidth=thumbBigHeight;data.dimensions.sheight=parseInt(data.dimensions.swidth*data.dimensions.height/data.dimensions.width);}else{data.dimensions.sheight=thumbBigHeight;data.dimensions.swidth=parseInt(data.dimensions.sheight*data.dimensions.width/data.dimensions.height);}
_this.data[uuid]={type:data.type==='video'?'video':'image',src:data.src,dimensions:{size:thumbBigHeight,width:data.dimensions.width,swidth:data.dimensions.swidth,height:data.dimensions.height,sheight:data.dimensions.sheight},is_editorial:data.is_editorial};};$items.each(function(){set(this);});},getVideoPlayer:function(){if(dp.tips.$player){return dp.tips.$player;}
var $videoTemplate=$('<div class="d_tips_video_inner"></div>');var $player=$('<video class="video-js vjs-default-skin" controls loop autoplay width="" height="" poster="" />');$player.append('<source data-type="mp4" type="video/mp4" src="" />');$player.append('<source data-type="webm" type="video/webm" src="" />');if(!document.createElement('video').canPlayType){$player.append('<object width="" height="" type="application/x-shockwave-flash" data="/swf/flashmediaelement.swf">'+'<param name="movie" data-value="/swf/flashmediaelement.swf?autoplay=true&amp;file=" />'+'<param name="flashvars" data-value="autoplay=true&amp;file=" />'+'<img data-type="poster" src="" width="" height="" title="" />'+'</object>');}
$videoTemplate.append($player);dp.tips.$player=$videoTemplate;return dp.tips.$player;}};
;dp.currency={exchange:function(price,decimals,exchange,onlyNumber){decimals=parseInt(decimals)||0;exchange=exchange!==false;var currentPrice=parseFloat(price.toString().replace('$',''));var format=dp.config.currencyData.format;if(exchange){currentPrice=currentPrice*parseFloat(dp.config.currencyData.rate)*parseFloat(dp.config.currencyData.koef);}
if(onlyNumber){return parseFloat(currentPrice.dpNumberFormat(decimals,'.',''));}
if(format.indexOf('%s')<0)format='%s '+format;return format.replace('%s',currentPrice.dpNumberFormat(decimals,'.',' '));}};
;dp.langurl={$items:undefined,init:function(){this.$items=$('.langs-column a[href]');dp.observer.add('dpLangurl','pushstate',this._update);},_update:function(url){var dpUrl=dp.url(url||window.location.href);var relativeUrl=dpUrl.attr('relative');dp.langurl.$items.each(function(){dp.langurl._set(this,dp.url(this.getAttribute('href')).attr('host'),relativeUrl);});},_set:function(item,host,url){var isEnglish=item.getAttribute('href').search(/change_lang\.(php|html)/)!==-1;if(host||isEnglish){host='//'+host;item.setAttribute('href',isEnglish?'/change_lang.php?lang=en&ref='+encodeURIComponent(url):host+url);}}}
;dp.validator={queries:{},validate:function(name,value,value2){var errors=[];var type=(name.indexOf('password')!==-1?'password':name);var rules=dp.config.userValidationRules[type];if(typeof value==='boolean'){if(value===false){errors.push('e_'+name+'_false')}
return errors;}
if(!rules)return[];if(name==='password2'&&value!==value2){errors.push('e_password_dismatch');return errors;}
if(value.length<rules.min)errors.push(this._getErrorString(type,'min'));if(value.length>rules.max)errors.push(this._getErrorString(type,'max'));if(value.search(eval(rules.regexp))==-1)errors.push(this._getErrorString(type,'regexp'));return errors.unique();},validateUnique:function($field,url){var name=$field.attr('name');var value=$field.val().trim();var uuid=getUUID();dp.validator.queries[name]=uuid;dp.core.ajax({url:url,$caller:$field,data:{handler:'check',type:name,value:value,uuid:uuid},success:function(data,$caller){if(dp.validator.queries[name]!=uuid)return false;if(!data||!data.hasOwnProperty('result'))$caller.trigger('reset');if(data.result==true){$caller.trigger('correct');}else{dp.validator.showErrorsForOne($caller,data.errors);}
$field.val(value);}});},showErrors:function($set,errors){if($set instanceof jQuery){var $defaultTarget=$set.filter('.error-dump');$set=$set.not($defaultTarget);}
if(errors instanceof Array){dp.validator.showErrorsForOne($set,errors)}else{var $target;for(var type in errors){if(!errors.hasOwnProperty(type)||errors[type].length==0)continue;if($set instanceof jQuery){$target=$set.filter('[name="'+type+'"]');}else{$target=$set['$'+type];}
if(!$target.length){$target=$defaultTarget;}
dp.validator.showErrorsForOne($target,errors[type]);}}},showErrorsForOne:function($target,errors){var translatedErrors=false;if(errors[0]!==true){translatedErrors=[];for(var message in errors){if(!errors.hasOwnProperty(message))continue;translatedErrors.push(tr(errors[message]));}}
$target.trigger('incorrect',translatedErrors?[translatedErrors]:undefined);},_getErrorString:function(type,error){if(type=='email')return'e_regexp_email';return'e_'+error+'_'+type;}}
;dp.social={init:function($scope){if(!($scope instanceof jQuery))$scope=$('body');this.targets=this._gather($scope);this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,'dpSocial');},_gather:function($scope){return{social:{buttons:{$login:$('[data-social-login]',$scope)}}}},_handlers:function(){return{social:{buttons:{login:{handler:function(e){e.preventDefault();var type=this.getAttribute('data-social-login');var href=this.getAttribute('data-href');if(!type||typeof dp.social[type].login!='function'){$.error('dp.social. Invalid social type or method [dp.social.'+type+'] does not exists');return;}
dp.social[type].login(href);},events:['click'],run:function(){var types=[];var type;$(this).each(function(){type=this.getAttribute('data-social-login');if(types.indexOf(type)==-1)types.push(type);});if(types.length)for(var i=0;i<types.length;i++)dp.social[types[i]].init();}}}}}},fb:{init:function(callback){if(typeof FB!='undefined'){if(typeof callback=='function')callback();}else{dp.social._initOnDemand('fb',function(){FB.init({appId:dp.config.fb.appId,status:true,cookie:true,xfbml:true,oauth:true});if(typeof callback=='function')callback();});}},login:function(href){FB.login(function(response){if(response.authResponse){window.location.href=href;}},{scope:'email,publish_actions,public_profile,user_friends'});}},_initOnDemand:function(type,callback){var socialSdk=document.createElement('script');var sdkSchema=dp.social._getSdkData(type);socialSdk.type='text/javascript';socialSdk.async=true;socialSdk.src=sdkSchema.src;socialSdk.id=sdkSchema.id;if(sdkSchema.callbackName)window[sdkSchema.callbackName]=callback;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(socialSdk,s);},_getSdkData:function(type){var schema={fb:{id:'facebook-jssdk',src:'//connect.facebook.net/'+dp.config.fb.local+'/all.js',callbackName:'fbAsyncInit'}};return schema[type];}};
;dp.popup={counter:0,loadCounter:0,data:{},instances:{},callbacks:{},events:['hide','show','condition-show','init'],init:function(){dp.observer.add('dpPopup','popstate',function(){if(!~window.location.href.search('qview')){dp.popup.hide('image-zoom');}});},dispatch:function($context){$context.off('click.dpPopup').on('click.dpPopup',function(){var names=this.getAttribute('data-popup').split(',');for(var i=0;i<names.length;i++){dp.popup.show(names[i],this);}});},add:function(name,$data){if(this.get(name)){this.removeCallbacks(name);}
return this.data[name]=$data;},get:function(name,load){if(this.data.hasOwnProperty(name)){return this.data[name];}else{if(load){return this.load(name);}}
return false;},load:function(name,callback){if(this.loadCounter++>5){return false;}
dp.loader.ajax.load('/popups/'+name+'.html',callback,true);return true;},show:function(name,caller){return this.toggleVisibility(name,'show',caller);},hide:function(name){return this.toggleVisibility(name,'hide')},getAll:function(){var $popups;for(var i in this.instances){if(!this.instances.hasOwnProperty(i))continue;$popups=$popups?$popups.add(this.instances[i]):this.instances[i];}
return $popups;},hideAll:function(){var $popups=this.getAll();if($popups instanceof jQuery){$popups.trigger('hide');}
return true;},toggleVisibility:function(name,action,caller){var $popup=this.get(name);var triggerHandler=function($popup,action,caller){return $popup.trigger(action,caller);};if($popup instanceof jQuery){return triggerHandler($popup,action,caller);}else{if(action==='show'){this.load(name,function(){var $popup=dp.popup.get(name);if($popup instanceof jQuery){return triggerHandler($popup,action,caller);}});return true;}}
return false;},getCallbacks:function(name,action){var callbacks=[];if(!this.callbacks.hasOwnProperty(name)||!this.callbacks[name].hasOwnProperty(action)){return callbacks;}
for(var i in this.callbacks[name][action]){if(!this.callbacks[name][action].hasOwnProperty(i)){continue;}
callbacks.push(this.callbacks[name][action][i].handler);if(this.callbacks[name][action][i].persist!==true){delete this.callbacks[name][action][i];}}
return callbacks;},removeCallbacks:function(name,removedEvents){if(!this.callbacks.hasOwnProperty(name)){return false;}
this.reinitCallbacks(name,removedEvents);},reinitCallbacks:function(name,removedEvents){if(!removedEvents){removedEvents=this.events;}
if(!this.callbacks[name]){this.callbacks[name]={};}
for(var i=0;i<this.events.length;i++){var eventName=this.events[i];this.callbacks[name][eventName]=removedEvents.indexOf(eventName)===-1?this.callbacks[name][eventName]:{};}},callback:function(name,action,callback,persist){var uuid=getUUID();if(this.events.indexOf(action)===-1||typeof callback!=='function'){return false;}
if(!this.callbacks.hasOwnProperty(name)){this.reinitCallbacks(name);}
this.callbacks[name][action][uuid]={persist:persist||false,handler:callback}
return uuid;}};
;dp.novelty={countdown:86400,init:function($scope){if(!($scope instanceof jQuery))$scope=$('body');this.targets=this._gather($scope);this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,'dpNovelty');dp.observer.add('novelty','pageFullReload, pagePartReload',function($target){if(!($target instanceof jQuery))return false;dp.novelty.init($target);});},_gather:function($scope){return{novelty:{main:{$labels:$scope.find('.new-label[data-name]'),$looked:$scope.find('[data-looked-new]')}}}},_handlers:function(){var _this=this;return{novelty:{main:{labels:{run:function(){_this._checkPreview();}},looked:{handler:function(){_this._markViewed($(this));},events:['click']}}}}},_checkPreview:function(){var _this=this;var $label;var $linked;var name;var mode;var nowTime=Math.floor(new Date().getTime()/1000);var data=dp.storage.get('novelty');var singleElAttr='test-search-settings';var isSingleEl=$('.new-label[data-name]').filter('[data-name='+singleElAttr+']').length;data=(data)?$.parseJSON(data):{};if(_this.targets.novelty.main.$labels){_this.targets.novelty.main.$labels.each(function(){$label=$(this);name=$label.attr('data-name');mode=$label.attr('data-mode');$linked=_this.targets.novelty.main.$looked.filter('[data-looked-new="'+name+'"]');if(isSingleEl&&name!==singleElAttr){$(this).remove();}
if(typeof data[name]!='undefined'){$linked.removeAttr('data-looked-new');if(mode==='once'||(data[name]+_this.countdown)<nowTime){$(this).remove();return true;}}
$(this).addClass('active');$linked.addClass('looked-new');});}},_markViewed:function($target){if(typeof $target.attr('data-looked-new')=='undefined'){return false;}
var name=$target.attr('data-looked-new');var data=dp.storage.get('novelty');data=(data)?$.parseJSON(data):{};if(typeof data[name]=='undefined'){data[name]=Math.floor(new Date().getTime()/1000);dp.storage.set('novelty',JSON.stringify(data));$target.removeClass('looked-new');}}};
;dp.header={delay:{menu:20,menuFirst:10},resolutions:{quickMenu:820},init:function(){var _this=this;this.targets=this._gather($('header'));this.handlers=this._handlers();dp.core.unbinder(this.targets,this.handlers,'dpHeader');dp.core.binder(this.targets,this.handlers,'dpHeader');dp.observer.add('dpHeader','queueLoaded',function(){_this.init();});},_gather:function($scope){return{header:{menuSimple:{$link:$scope.find('.header-top .top-menu'),$holderConnect:$scope.find('.header-connect'),$holderTabs:$scope.find('.header-tabs')},menuAuth:{$link:$scope.find('.header-top .auth-menu'),$holder:$scope.find('.userbar .userbar-inner .userbar-wrapper.not-auth')},menuUser:{$link:$scope.find('.header-top .user-mobile-menu'),$holder:$scope.find('.header-top .user-menu-list')},menuAll:{$link:$scope.find('.header-top .top-menu, .header-top .auth-menu, .header-top .user-mobile-menu'),$holder:$scope.find('.header-connect, .header-tabs, .userbar .userbar-inner .userbar-wrapper.not-auth, .header-top .user-menu-list')}},system:{$body:$('body'),$window:$(window)}}},_handlers:function(){var _this=this;return{header:{menuSimple:{link:{handler:function(){_this.targets.header.menuAuth.$holder.hide();_this.targets.header.menuUser.$holder.hide();if(!_this.targets.header.menuSimple.$holderTabs.is(':visible')){_this.targets.header.menuSimple.$holderConnect.slideDown(_this.delay.menuFirst,function(){_this.targets.header.menuSimple.$holderTabs.slideDown(_this.delay.menu);});}else{_this.targets.header.menuSimple.$holderTabs.slideUp(_this.delay.menu,function(){_this.targets.header.menuSimple.$holderConnect.slideUp(_this.delay.menuFirst);});}},events:'click'}},menuAuth:{link:{handler:function(){_this.targets.header.menuSimple.$holderConnect.hide();_this.targets.header.menuSimple.$holderTabs.hide();_this.targets.header.menuUser.$holder.hide();_this.targets.header.menuAuth.$holder.slideToggle(_this.delay.menu);},events:'click'}},menuUser:{link:{handler:function(){_this.targets.header.menuSimple.$holderConnect.hide();_this.targets.header.menuSimple.$holderTabs.hide();_this.targets.header.menuAuth.$holder.hide();_this.targets.header.menuUser.$holder.slideToggle(_this.delay.menu);},events:'click'}}},system:{body:{handler:function(e){if(_this._checkResolution()&&_this.targets.header.menuAll.$link.find(e.target).length===0&&_this.targets.header.menuAll.$link.filter(e.target).length===0&&_this.targets.header.menuAll.$holder.find(e.target).length===0&&_this.targets.header.menuAll.$holder.filter(e.target).length===0){_this.targets.header.menuAll.$holder.filter(':visible').stop(0,0).hide();}},events:['click','touchstart']}}}},_checkResolution:function(){return(this.resolutions.quickMenu>this.targets.system.$window.width()&&this.targets.system.$body.hasClass('flexible'));}};
;(function(){"use strict";var storageKey='urlHistoryE';var UrlHistory=function(){var savedStates=dp.storage.get(storageKey);var old=null;var cur=null;var pageCounter=-1;var isNewSession=true;if(savedStates){savedStates=$.parseJSON(savedStates);old=savedStates.old;cur=savedStates.cur;pageCounter=savedStates.pageCounter;isNewSession=false;}
this.states={old:old,cur:cur,isPageReload:false,isNewSession:isNewSession,pageCounter:pageCounter};this.updateStates(true);dp.storage.set(storageKey,JSON.stringify(this.states),true,0);};UrlHistory.prototype.updateStates=function(isConstructorCalls){if(this.states.cur!==window.location.href){this.states.old=this.states.cur;this.states.cur=window.location.href;this.states.pageCounter+=1;dp.storage.set(storageKey,JSON.stringify(this.states),true,0)}else{this.states.isPageReload=true;}
if(!isConstructorCalls){this.states.isPageReload=false;this.states.isNewSession=false;}};dp.loader.add(function(){dp.history=new UrlHistory();dp.observer.add(storageKey,'pushstate',function(){dp.history.updateStates();});});})();
;dp.staticPage={init:function($scope){if(!($scope instanceof jQuery))$scope=$('body');this.targets=this._gather($scope);this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,'dpStaticPage');},_gather:function($scope){return{staticPage:{comparison:{$tableRow:$scope.find('.comparison-table tbody tr'),$tableFirstTH:$scope.find('.comparison-table tbody tr th:first-child')}}}},_handlers:function(){var _this=this;return{staticPage:{comparison:{tableRow:{handler:function(e){var $tr=$(this);switch(e.type){case'mouseenter':var $th=$tr.find('th:first-child');if($th.length){$th.addClass('hover');}else{$tr.prev().find('th:first-child').addClass('hover');}
break;case'mouseleave':_this.targets.staticPage.comparison.$tableFirstTH.removeClass('hover');break;}},events:['mouseenter','mouseleave']}}}}}};
;(function(window,dp){var Trace=function(){};Trace.prototype.start=function(){this.time={start:new Date(),end:undefined,storage:[]};};Trace.prototype.end=function(){this.time.end=new Date();this.show();};Trace.prototype.show=function(){if(document.cookie.indexOf("dpTraceTest=")===-1)return false;console.log('----------------------------------------------------------------------------------------');for(var i=0;i<this.time.storage.length;i++){var storageItem=this.time.storage[i];if(!storageItem)continue;for(var j=0;j<storageItem.length;j++){var event=storageItem[j].event;var time=storageItem[j].time;var prevData;if(j==0){if(i==0){prevData={event:'First execution point',time:this.time.start}}else{continue;}}else{prevData=storageItem[j-1];}
var prevEvent=prevData['event'];var prevTime=prevData['time'];if(prevData){console.log(i+':'+j+' | '+this._getTime(time-prevTime)+' | '+prevEvent+' <==> '+event);}}}
console.log('----------------------------------------------------------------------------------------');console.log('General execution time: '+this._getTime(this.time.end-this.time.start));console.log('----------------------------------------------------------------------------------------');};Trace.prototype._getTime=function(time){return time+'ms';};Trace.prototype.push=function(){var event=arguments[0];var idx=arguments[1]||0;if(!this.time.storage[idx])this.time.storage[idx]=[];this.time.storage[idx].push({event:event,time:new Date()});};Trace.prototype.short=function(string){string=string.toString().replace(/\n/gmi,' ');string=string.replace(/\t/gmi,' ');string=string.replace(/\s\s/gmi,' ');return string.substring(0,64);};dp.trace=new Trace();})(window,dp);
;dp.activity={templates:{success:'<i class="activity-window success"><i><i class="yes-icon"></i></i></i>',error:'<i class="activity-window error"><i><i class="no-icon"></i></i></i>'},delay:{show:200,hide:200,wait:500},show:function(action,callback){this._action(action,callback);},_action:function(action,callback){var _this=this;if(typeof _this.templates[action]!='undefined'){$('body').append($(_this.templates[action]));var $win=$('.activity-window.'+action);$win.fadeIn(_this.delay.show,function(){setTimeout(function(){$win.fadeOut(_this.delay.hide,function(){$win.remove();if(typeof callback=='function')callback();});},_this.delay.wait);});}}};
;$.error=function(message,jqXHR,textStatus,errorThrown){var error=function(e){try{var data={error:e,screen:{dimensions:{width:window.screen.width,height:window.screen.height,awidth:window.screen.availWidth,aheight:window.screen.availHeight},color:window.screen.colorDepth},navigator:{appCodeName:window.navigator.appCodeName,userAgent:window.navigator.userAgent,cookie:window.navigator.cookieEnabled,language:window.navigator.language,plugins:{}},os:{platform:window.navigator.platform,oscpu:window.navigator.oscpu},location:{href:window.location.href,referer:document.referrer}};for(var i=0;i<window.navigator.plugins.length;i++){data.navigator.plugins[i]={};data.navigator.plugins[i].name=window.navigator.plugins[i].name;data.navigator.plugins[i].description=window.navigator.plugins[i].description;data.navigator.plugins[i].filename=window.navigator.plugins[i].filename;}
if(console)console.log('$.error: ',e,'\n',data);dp.track.fire('jquery_error',[e,window.location.href]);return data;}catch(e){if(console){if(console.error){console.error('$.error: ',e);}else{console.log('$.error: ',e);}}
if(window.onerror){window.onerror(e&&e.message,window.location&&window.location.href,0);}}};if(message&&jqXHR&&textStatus&&jqXHR.readyState&&jqXHR.readyState==4){var errorString='';for(var i in jqXHR){if(typeof jqXHR[i]!='function')errorString+='\n'+i+': '+jqXHR[i].toString();}
return error(message+'\nError is: '+textStatus+'.\njqXHR: '+errorString+'\nerrorThrown: '+errorThrown);}else if(message&&!jqXHR&&!textStatus){return error(message);}};var getUUID=function(){var uuid='';for(var i=0;i<32;i++)uuid+=Math.floor(Math.random()*16).toString(16);return uuid;};var ucwords=function(str){return(str+'').replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase();});};(function(removeClassByRegexp){jQuery.fn.removeClassByRegexp=function(value){if(value&&typeof value.test==="function"){for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1&&elem.className){var classNames=elem.className.split(/\s+/);for(var n=classNames.length;n--;){if(value.test(classNames[n])){classNames.splice(n,1);}}
elem.className=jQuery.trim(classNames.join(" "));}}}else{removeClass.call(this,value);}};})(jQuery.fn.removeClass);$.fn.setPositionCenter=function(){var $el=this;var elH=$el.outerHeight();var elW=$el.outerWidth();$el.css({'top':'50%','left':'50%','marginTop':-Math.round(elH/2),'marginLeft':-Math.round(elW/2)});return $el;};$.fn.isOverlaps=function(el1,el2){return((el2.top>el1.top)||(el2.top+el2.h>el1.top))&&((el2.left>el1.left)||(el2.left+el2.w>el1.left))&&(el2.top<el1.top+el1.h)&&(el2.left<el1.left+el1.w)};$.fn.disabled=function(unbind){var unbind=unbind?unbind:false;return this.each(function(){if(unbind===true)$(this).unbind();$(this).unbind('click.jqueryExtend').bind('click.jqueryExtend',function(e){e.preventDefault();e.stopPropagation();return false;})})};$.fn.tuneFileInput=function(le){if(!le)le=25;var setValue;this.each(function(){var tmpValue=$(this).val().split('\\');setValue=tmpValue.length==3?tmpValue[2]:tmpValue;});return setValue.toString().substring(0,le)+(setValue.length<le?'':'...');};$.fn.inputAutoWidth=function(add){return this.each(function(){var $this=$(this);var $testSubject=$('div.js_tester');if($testSubject.length==0){$testSubject=$('<div class="js_tester" />');$testSubject.appendTo('body');}
var currentVal=$this.val();if(add)currentVal+=add;$testSubject.html(currentVal).css({position:'absolute',top:-9999,left:-9999,width:'auto',fontSize:$this.css('fontSize'),paddingLeft:$this.css('paddingLeft'),paddingRight:$this.css('paddingRight'),fontFamily:$this.css('fontFamily'),fontWeight:$this.css('fontWeight'),letterSpacing:$this.css('letterSpacing'),whiteSpace:'nowrap'});$this.width($testSubject.width()+1);})};$.extend($.support,{placeholder:!!('placeholder'in document.createElement('input'))});$.fn.placeholder=function(){if($.support.placeholder)return false;function placeholderChangeInput($obj,$fakeInput,value){if($obj.val()==''){$obj.hide();$fakeInput.show();}else{$fakeInput.hide();$obj.show(0);};};function bindMonkey($obj,$fakeInput){$fakeInput.unbind('incorrect correct progress reset').depositFieldIndicate();$obj.bind('incorrect.jqueryExtend',function(){$fakeInput.trigger('incorrect')});$obj.bind('correct.jqueryExtend',function(){$fakeInput.trigger('correct')});$obj.bind('progress.jqueryExtend',function(){$fakeInput.trigger('progress')});$obj.bind('reset.jqueryExtend',function(){$fakeInput.trigger('reset')});};return this.each(function(){var obj=this;var $obj=$(obj);var handler=function(){placeholderChangeInput($obj,$fakeInput,oldText)};var oldText=$obj.attr('placeholder');var tmpWidth=$obj.width()>0?$obj.width():'100%';if(tmpWidth==100)tmpWidth=tmpWidth+'%';var $fakeInput=false;if($obj.attr('type')=='password')$fakeInput=$('<input type="text" value="'+oldText+'" />').width(tmpWidth);else $fakeInput=$obj.clone();$fakeInput.removeAttr("name").removeAttr("id").attr('class','d_placeholder_active '+$obj.attr('class')).removeClass('ch-inp change_inp d_placeholder d_clearable').val(oldText);$fakeInput.get(0).removeAttribute('placeholder');$fakeInput.bind('click.jqueryExtend focus.jqueryExtend',function(){var inputParent=this.parentElement;if(inputParent.offsetHeight)inputParent.style.height=inputParent.offsetHeight;$fakeInput.hide();$obj.show(0,function(){$(this).focus();inputParent.style.height=null;});});bindMonkey($obj,$fakeInput);if($obj.val()=='')$fakeInput.insertBefore($obj.hide());else $fakeInput.hide().insertBefore($obj);placeholderChangeInput($obj,$fakeInput,oldText);$obj.bind('blur.jqueryExtend change.jqueryExtend',handler);});};$.fn.serializeForm=function(trim){trim=!!trim;var serialized={};var formData=this.serializeArray();var value;for(var i=0;i<formData.length;i++){if(formData[i].hasOwnProperty('name')){value=trim?formData[i].value.trim():formData[i].value;serialized[formData[i].name]=value||'';}}
return serialized;};$.prepareKeywords=function(keywords,needCount){keywords=keywords.replace(/[\#\[\]\:\<\>\\\!\?\^\*\(\)\~\`\{\}\+\=\_]/g,'');keywords=keywords.replace(/\s+/g,' ');keywords=keywords.replace(/"([^"]+)"/g,function(str){return str.replace(/ /g,'+')});keywords=keywords.replace(/\"+/g,'');keywords=keywords.replace(/[,;\s\|]+/g,',');keywords=keywords.replace(/(^,)|(,$)/g,"");if(needCount)return keywords.match(/[^,]+/g)?keywords.match(/[^,]+/g).length:0;return keywords.replace(/\+/g,' ');};if(!JSON){var JSON={};JSON.stringify=JSON.stringify||function(obj){var t=typeof(obj);if(t!="object"||obj===null){if(t=="string")obj='"'+obj+'"';return String(obj);}else{var n,v,json=[],arr=(obj&&obj.constructor==Array);for(n in obj){if(!obj.hasOwnProperty(n))continue;v=obj[n];t=typeof(v);if(t=="string")v='"'+v+'"';else if(t=="object"&&v!==null)v=JSON.stringify(v);json.push((arr?"":'"'+n+'":')+String(v));}
return(arr?"[":"{")+String(json)+(arr?"]":"}");}};}
$.fn.css3=function(props){var css={};var prefixes=['webkit','moz','ms','o'];for(var prop in props){for(var i=0;i<prefixes.length;i++)
css['-'+prefixes[i]+'-'+prop]=props[prop];css[prop]=props[prop];}
this.css(css);return this;};$.fn.ieChilds=function(selectors){if(!selectors)return false;return this.each(function(){for(i in selectors){if(!selectors.hasOwnProperty(i))continue;var $el=$(this).find(i);if($el.length>0&&!$el.hasClass(selectors[i]))$el.addClass(selectors[i]);}});};$.fn.gaLabel=function(){return this.each(function(){if($.browser.msie&&parseInt($.browser.version)===7)return false;var $this=$(this);var onclickLabel=$this.attr('data-ga');$this.removeAttr('data-ga').on('click.gaLabel',function(){dp.track.page(typeof onclickLabel!=='undefined'?onclickLabel:'undefinedLabel');});});};$.fn.maxHeight=function(){var max=0;this.each(function(){max=Math.max(max,$(this).height())});return max;};(function(userAgent){if(!jQuery.browser){var uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};var matched=uaMatch(userAgent);var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome)browser.webkit=true;else if(browser.webkit)browser.safari=true;jQuery.browser=browser;}})(navigator.userAgent||navigator.vendor||window.opera);(function(a){jQuery.browser.mobile=/android.+mobile|nexus|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
;(function($){var $clip=null;var $is_loaded=false;$.fn.clipboard=function(params){if((typeof params=='object'&&!params.length)||(typeof params=='undefined')){var settings=$.extend({path:'jquery.clipboard.swf',copy:null,beforeCopy:null,afterCopy:null,clickAfter:true},(params||{}));return this.each(function(){var o=$(this);if(typeof settings.copy=='string'||$.isFunction(settings.copy)){if($.isFunction(settings.copy)){o.bind('Clipboard_copy',settings.copy);}
if($.isFunction(settings.beforeCopy)){o.bind('Clipboard_beforeCopy',settings.beforeCopy);}
if($.isFunction(settings.afterCopy)){o.bind('Clipboard_afterCopy',settings.afterCopy);}
if($clip===null){ZeroClipboard.config({moviePath:settings.path,trustedDomains:'*',hoverClass:'hover',activeClass:'active'});$clip=new ZeroClipboard(null);$clip.on('load',function(client){client.on('mouseover',function(client){$(this).trigger('mouseenter');});client.on('mouseout',function(client){$(this).trigger('mouseleave');});client.on('mousedown',function(client){$(this).trigger('mousedown');if(!$.isFunction(settings.copy)){client.setText(settings.copy);}else{client.setText($(this).triggerHandler('Clipboard_copy'));}
if($.isFunction(settings.beforeCopy)){$(this).trigger('Clipboard_beforeCopy');}});client.on('complete',function(client,args){if($.isFunction(settings.afterCopy)){$(this).trigger('Clipboard_afterCopy');}else{$(this).removeClass('hover');}
if(settings.clickAfter){$(this).trigger('click');}});});}
$clip.clip([o[0]]);}});}};})(jQuery);(function(){"use strict";var currentElement;var flashState={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null};var _clipData={};var clientIdCounter=0;var _clientMeta={};var elementIdCounter=0;var _elementMeta={};var _amdModuleId=null;var _cjsModuleId=null;var _swfPath=function(){var i,jsDir,tmpJsPath,jsPath,swfPath="ZeroClipboard.swf";if(document.currentScript&&(jsPath=document.currentScript.src)){}else{var scripts=document.getElementsByTagName("script");if("readyState"in scripts[0]){for(i=scripts.length;i--;){if(scripts[i].readyState==="interactive"&&(jsPath=scripts[i].src)){break;}}}else if(document.readyState==="loading"){jsPath=scripts[scripts.length-1].src;}else{for(i=scripts.length;i--;){tmpJsPath=scripts[i].src;if(!tmpJsPath){jsDir=null;break;}
tmpJsPath=tmpJsPath.split("#")[0].split("?")[0];tmpJsPath=tmpJsPath.slice(0,tmpJsPath.lastIndexOf("/")+1);if(jsDir===null){jsDir=tmpJsPath;}else if(jsDir!==tmpJsPath){jsDir=null;break;}}
if(jsDir!==null){jsPath=jsDir;}}}
if(jsPath){jsPath=jsPath.split("#")[0].split("?")[0];swfPath=jsPath.slice(0,jsPath.lastIndexOf("/")+1)+swfPath;}
return swfPath;}();var _camelizeCssPropName=function(){var matcherRegex=/\-([a-z])/g,replacerFn=function(match,group){return group.toUpperCase();};return function(prop){return prop.replace(matcherRegex,replacerFn);};}();var _getStyle=function(el,prop){var value,camelProp,tagName,possiblePointers,i,len;if(window.getComputedStyle){value=window.getComputedStyle(el,null).getPropertyValue(prop);}else{camelProp=_camelizeCssPropName(prop);if(el.currentStyle){value=el.currentStyle[camelProp];}else{value=el.style[camelProp];}}
if(prop==="cursor"){if(!value||value==="auto"){tagName=el.tagName.toLowerCase();if(tagName==="a"){return"pointer";}}}
return value;};var _elementMouseOver=function(event){if(!event){event=window.event;}
var target;if(this!==window){target=this;}else if(event.target){target=event.target;}else if(event.srcElement){target=event.srcElement;}
ZeroClipboard.activate(target);};var _addEventHandler=function(element,method,func){if(!element||element.nodeType!==1){return;}
if(element.addEventListener){element.addEventListener(method,func,false);}else if(element.attachEvent){element.attachEvent("on"+method,func);}};var _removeEventHandler=function(element,method,func){if(!element||element.nodeType!==1){return;}
if(element.removeEventListener){element.removeEventListener(method,func,false);}else if(element.detachEvent){element.detachEvent("on"+method,func);}};var _addClass=function(element,value){if(!element||element.nodeType!==1){return element;}
if(element.classList){if(!element.classList.contains(value)){element.classList.add(value);}
return element;}
if(value&&typeof value==="string"){var classNames=(value||"").split(/\s+/);if(element.nodeType===1){if(!element.className){element.className=value;}else{var className=" "+element.className+" ",setClass=element.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}
element.className=setClass.replace(/^\s+|\s+$/g,"");}}}
return element;};var _removeClass=function(element,value){if(!element||element.nodeType!==1){return element;}
if(element.classList){if(element.classList.contains(value)){element.classList.remove(value);}
return element;}
if(value&&typeof value==="string"||value===undefined){var classNames=(value||"").split(/\s+/);if(element.nodeType===1&&element.className){if(value){var className=(" "+element.className+" ").replace(/[\n\t]/g," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
element.className=className.replace(/^\s+|\s+$/g,"");}else{element.className="";}}}
return element;};var _getZoomFactor=function(){var rect,physicalWidth,logicalWidth,zoomFactor=1;if(typeof document.body.getBoundingClientRect==="function"){rect=document.body.getBoundingClientRect();physicalWidth=rect.right-rect.left;logicalWidth=document.body.offsetWidth;zoomFactor=Math.round(physicalWidth/logicalWidth*100)/100;}
return zoomFactor;};var _getDOMObjectPosition=function(obj,defaultZIndex){var info={left:0,top:0,width:0,height:0,zIndex:_getSafeZIndex(defaultZIndex)-1};if(obj.getBoundingClientRect){var rect=obj.getBoundingClientRect();var pageXOffset,pageYOffset,zoomFactor;if("pageXOffset"in window&&"pageYOffset"in window){pageXOffset=window.pageXOffset;pageYOffset=window.pageYOffset;}else{zoomFactor=_getZoomFactor();pageXOffset=Math.round(document.documentElement.scrollLeft/zoomFactor);pageYOffset=Math.round(document.documentElement.scrollTop/zoomFactor);}
var leftBorderWidth=document.documentElement.clientLeft||0;var topBorderWidth=document.documentElement.clientTop||0;info.left=rect.left+pageXOffset-leftBorderWidth;info.top=rect.top+pageYOffset-topBorderWidth;info.width="width"in rect?rect.width:rect.right-rect.left;info.height="height"in rect?rect.height:rect.bottom-rect.top;}
return info;};var _cacheBust=function(path,options){var cacheBust=options===null||options&&options.cacheBust===true&&options.useNoCache===true;if(cacheBust){return(path.indexOf("?")===-1?"?":"&")+"noCache="+new Date().getTime();}else{return"";}};var _vars=function(options){var i,len,domain,str=[],domains=[],trustedOriginsExpanded=[];if(options.trustedOrigins){if(typeof options.trustedOrigins==="string"){domains.push(options.trustedOrigins);}else if(typeof options.trustedOrigins==="object"&&"length"in options.trustedOrigins){domains=domains.concat(options.trustedOrigins);}}
if(options.trustedDomains){if(typeof options.trustedDomains==="string"){domains.push(options.trustedDomains);}else if(typeof options.trustedDomains==="object"&&"length"in options.trustedDomains){domains=domains.concat(options.trustedDomains);}}
if(domains.length){for(i=0,len=domains.length;i<len;i++){if(domains.hasOwnProperty(i)&&domains[i]&&typeof domains[i]==="string"){domain=_extractDomain(domains[i]);if(!domain){continue;}
if(domain==="*"){trustedOriginsExpanded=[domain];break;}
trustedOriginsExpanded.push.apply(trustedOriginsExpanded,[domain,"//"+domain,window.location.protocol+"//"+domain]);}}}
if(trustedOriginsExpanded.length){str.push("trustedOrigins="+encodeURIComponent(trustedOriginsExpanded.join(",")));}
if(typeof options.jsModuleId==="string"&&options.jsModuleId){str.push("jsModuleId="+encodeURIComponent(options.jsModuleId));}
return str.join("&");};var _inArray=function(elem,array,fromIndex){if(typeof array.indexOf==="function"){return array.indexOf(elem,fromIndex);}
var i,len=array.length;if(typeof fromIndex==="undefined"){fromIndex=0;}else if(fromIndex<0){fromIndex=len+fromIndex;}
for(i=fromIndex;i<len;i++){if(array.hasOwnProperty(i)&&array[i]===elem){return i;}}
return-1;};var _prepClip=function(elements){if(typeof elements==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!elements.length)return[elements];return elements;};var _dispatchCallback=function(func,context,args,async){if(async){window.setTimeout(function(){func.apply(context,args);},0);}else{func.apply(context,args);}};var _getSafeZIndex=function(val){var zIndex,tmp;if(val){if(typeof val==="number"&&val>0){zIndex=val;}else if(typeof val==="string"&&(tmp=parseInt(val,10))&&!isNaN(tmp)&&tmp>0){zIndex=tmp;}}
if(!zIndex){if(typeof _globalConfig.zIndex==="number"&&_globalConfig.zIndex>0){zIndex=_globalConfig.zIndex;}else if(typeof _globalConfig.zIndex==="string"&&(tmp=parseInt(_globalConfig.zIndex,10))&&!isNaN(tmp)&&tmp>0){zIndex=tmp;}}
return zIndex||0;};var _deprecationWarning=function(deprecatedApiName,debugEnabled){if(deprecatedApiName&&debugEnabled!==false&&typeof console!=="undefined"&&console&&(console.warn||console.log)){var deprecationWarning="`"+deprecatedApiName+"` is deprecated. See docs for more info:\n"+"    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";if(console.warn){console.warn(deprecationWarning);}else{console.log(deprecationWarning);}}};var _extend=function(){var i,len,arg,prop,src,copy,target=arguments[0]||{};for(i=1,len=arguments.length;i<len;i++){if((arg=arguments[i])!==null){for(prop in arg){if(arg.hasOwnProperty(prop)){src=target[prop];copy=arg[prop];if(target===copy){continue;}
if(copy!==undefined){target[prop]=copy;}}}}}
return target;};var _extractDomain=function(originOrUrl){if(originOrUrl===null||originOrUrl===""){return null;}
originOrUrl=originOrUrl.replace(/^\s+|\s+$/g,"");if(originOrUrl===""){return null;}
var protocolIndex=originOrUrl.indexOf("//");originOrUrl=protocolIndex===-1?originOrUrl:originOrUrl.slice(protocolIndex+2);var pathIndex=originOrUrl.indexOf("/");originOrUrl=pathIndex===-1?originOrUrl:protocolIndex===-1||pathIndex===0?null:originOrUrl.slice(0,pathIndex);if(originOrUrl&&originOrUrl.slice(-4).toLowerCase()===".swf"){return null;}
return originOrUrl||null;};var _determineScriptAccess=function(){var _extractAllDomains=function(origins,resultsArray){var i,len,tmp;if(origins!==null&&resultsArray[0]!=="*"){if(typeof origins==="string"){origins=[origins];}
if(typeof origins==="object"&&"length"in origins){for(i=0,len=origins.length;i<len;i++){if(origins.hasOwnProperty(i)){tmp=_extractDomain(origins[i]);if(tmp){if(tmp==="*"){resultsArray.length=0;resultsArray.push("*");break;}
if(_inArray(tmp,resultsArray)===-1){resultsArray.push(tmp);}}}}}}};var _accessLevelLookup={always:"always",samedomain:"sameDomain",never:"never"};return function(currentDomain,configOptions){var asaLower,allowScriptAccess=configOptions.allowScriptAccess;if(typeof allowScriptAccess==="string"&&(asaLower=allowScriptAccess.toLowerCase())&&/^always|samedomain|never$/.test(asaLower)){return _accessLevelLookup[asaLower];}
var swfDomain=_extractDomain(configOptions.moviePath);if(swfDomain===null){swfDomain=currentDomain;}
var trustedDomains=[];_extractAllDomains(configOptions.trustedOrigins,trustedDomains);_extractAllDomains(configOptions.trustedDomains,trustedDomains);var len=trustedDomains.length;if(len>0){if(len===1&&trustedDomains[0]==="*"){return"always";}
if(_inArray(currentDomain,trustedDomains)!==-1){if(len===1&&currentDomain===swfDomain){return"sameDomain";}
return"always";}}
return"never";};}();var _objectKeys=function(obj){if(obj===null){return[];}
if(Object.keys){return Object.keys(obj);}
var keys=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){keys.push(prop);}}
return keys;};var _deleteOwnProperties=function(obj){if(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){delete obj[prop];}}}
return obj;};var _detectFlashSupport=function(){var hasFlash=false;if(typeof flashState.disabled==="boolean"){hasFlash=flashState.disabled===false;}else{if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){hasFlash=true;}}catch(error){}}
if(!hasFlash&&navigator.mimeTypes["application/x-shockwave-flash"]){hasFlash=true;}}
return hasFlash;};function _parseFlashVersion(flashVersion){return flashVersion.replace(/,/g,".").replace(/[^0-9\.]/g,"");}
function _isFlashVersionSupported(flashVersion){return parseFloat(_parseFlashVersion(flashVersion))>=10;}
var ZeroClipboard=function(elements,options){if(!(this instanceof ZeroClipboard)){return new ZeroClipboard(elements,options);}
this.id=""+clientIdCounter++;_clientMeta[this.id]={instance:this,elements:[],handlers:{}};if(elements){this.clip(elements);}
if(typeof options!=="undefined"){_deprecationWarning("new ZeroClipboard(elements, options)",_globalConfig.debug);ZeroClipboard.config(options);}
this.options=ZeroClipboard.config();if(typeof flashState.disabled!=="boolean"){flashState.disabled=!_detectFlashSupport();}
if(flashState.disabled===false&&flashState.outdated!==true){if(flashState.bridge===null){flashState.outdated=false;flashState.ready=false;_bridge();}}};ZeroClipboard.prototype.setText=function(newText){if(newText&&newText!==""){_clipData["text/plain"]=newText;if(flashState.ready===true&&flashState.bridge){flashState.bridge.setText(newText);}else{}}
return this;};ZeroClipboard.prototype.setSize=function(width,height){if(flashState.ready===true&&flashState.bridge){flashState.bridge.setSize(width,height);}else{}
return this;};var _setHandCursor=function(enabled){if(flashState.ready===true&&flashState.bridge){flashState.bridge.setHandCursor(enabled);}else{}};ZeroClipboard.prototype.destroy=function(){this.unclip();this.off();delete _clientMeta[this.id];};var _getAllClients=function(){var i,len,client,clients=[],clientIds=_objectKeys(_clientMeta);for(i=0,len=clientIds.length;i<len;i++){client=_clientMeta[clientIds[i]].instance;if(client&&client instanceof ZeroClipboard){clients.push(client);}}
return clients;};ZeroClipboard.version="1.3.2";var _globalConfig={swfPath:_swfPath,trustedDomains:window.location.host?[window.location.host]:[],cacheBust:true,forceHandCursor:false,zIndex:999999999,debug:true,title:null,autoActivate:true};ZeroClipboard.config=function(options){if(typeof options==="object"&&options!==null){_extend(_globalConfig,options);}
if(typeof options==="string"&&options){if(_globalConfig.hasOwnProperty(options)){return _globalConfig[options];}
return;}
var copy={};for(var prop in _globalConfig){if(_globalConfig.hasOwnProperty(prop)){if(typeof _globalConfig[prop]==="object"&&_globalConfig[prop]!==null){if("length"in _globalConfig[prop]){copy[prop]=_globalConfig[prop].slice(0);}else{copy[prop]=_extend({},_globalConfig[prop]);}}else{copy[prop]=_globalConfig[prop];}}}
return copy;};ZeroClipboard.destroy=function(){ZeroClipboard.deactivate();for(var clientId in _clientMeta){if(_clientMeta.hasOwnProperty(clientId)&&_clientMeta[clientId]){var client=_clientMeta[clientId].instance;if(client&&typeof client.destroy==="function"){client.destroy();}}}
var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge&&htmlBridge.parentNode){htmlBridge.parentNode.removeChild(htmlBridge);flashState.ready=null;flashState.bridge=null;}};ZeroClipboard.activate=function(element){if(currentElement){_removeClass(currentElement,_globalConfig.hoverClass);_removeClass(currentElement,_globalConfig.activeClass);}
currentElement=element;_addClass(element,_globalConfig.hoverClass);_reposition();var newTitle=_globalConfig.title||element.getAttribute("title");if(newTitle){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.setAttribute("title",newTitle);}}
var useHandCursor=_globalConfig.forceHandCursor===true||_getStyle(element,"cursor")==="pointer";_setHandCursor(useHandCursor);};ZeroClipboard.deactivate=function(){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.style.left="0px";htmlBridge.style.top="-9999px";htmlBridge.removeAttribute("title");}
if(currentElement){_removeClass(currentElement,_globalConfig.hoverClass);_removeClass(currentElement,_globalConfig.activeClass);currentElement=null;}};var _bridge=function(){var flashBridge,len;var container=document.getElementById("global-zeroclipboard-html-bridge");if(!container){var opts=ZeroClipboard.config();opts.jsModuleId=typeof _amdModuleId==="string"&&_amdModuleId||typeof _cjsModuleId==="string"&&_cjsModuleId||null;var allowScriptAccess=_determineScriptAccess(window.location.host,_globalConfig);var flashvars=_vars(opts);var swfUrl=_globalConfig.moviePath+_cacheBust(_globalConfig.moviePath,_globalConfig);var html='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+swfUrl+'"/>         <param name="allowScriptAccess" value="'+allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+flashvars+'"/>         <embed src="'+swfUrl+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+allowScriptAccess+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+flashvars+'"           scale="exactfit">         </embed>       </object>';container=document.createElement("div");container.id="global-zeroclipboard-html-bridge";container.setAttribute("class","global-zeroclipboard-container");container.style.position="absolute";container.style.left="0px";container.style.top="-9999px";container.style.width="15px";container.style.height="15px";container.style.zIndex=""+_getSafeZIndex(_globalConfig.zIndex);document.body.appendChild(container);container.innerHTML=html;}
flashBridge=document["global-zeroclipboard-flash-bridge"];if(flashBridge&&(len=flashBridge.length)){flashBridge=flashBridge[len-1];}
flashState.bridge=flashBridge||container.children[0].lastElementChild;};var _getHtmlBridge=function(flashBridge){var isFlashElement=/^OBJECT|EMBED$/;var htmlBridge=flashBridge&&flashBridge.parentNode;while(htmlBridge&&isFlashElement.test(htmlBridge.nodeName)&&htmlBridge.parentNode){htmlBridge=htmlBridge.parentNode;}
return htmlBridge||null;};var _reposition=function(){if(currentElement){var pos=_getDOMObjectPosition(currentElement,_globalConfig.zIndex);var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.style.top=pos.top+"px";htmlBridge.style.left=pos.left+"px";htmlBridge.style.width=pos.width+"px";htmlBridge.style.height=pos.height+"px";htmlBridge.style.zIndex=pos.zIndex+1;}
if(flashState.ready===true&&flashState.bridge){flashState.bridge.setSize(pos.width,pos.height);}}
return this;};ZeroClipboard.prototype.on=function(eventName,func){var i,len,events,added={},handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(typeof eventName==="string"&&eventName){events=eventName.toLowerCase().split(/\s+/);}else if(typeof eventName==="object"&&eventName&&typeof func==="undefined"){for(i in eventName){if(eventName.hasOwnProperty(i)&&typeof i==="string"&&i&&typeof eventName[i]==="function"){this.on(i,eventName[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventName=events[i].replace(/^on/,"");added[eventName]=true;if(!handlers[eventName]){handlers[eventName]=[];}
handlers[eventName].push(func);}
if(added.noflash&&flashState.disabled){_receiveEvent.call(this,"noflash",{});}
if(added.wrongflash&&flashState.outdated){_receiveEvent.call(this,"wrongflash",{flashVersion:flashState.version});}
if(added.load&&flashState.ready){_receiveEvent.call(this,"load",{flashVersion:flashState.version});}}
return this;};ZeroClipboard.prototype.off=function(eventName,func){var i,len,foundIndex,events,perEventHandlers,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(arguments.length===0){events=_objectKeys(handlers);}else if(typeof eventName==="string"&&eventName){events=eventName.split(/\s+/);}else if(typeof eventName==="object"&&eventName&&typeof func==="undefined"){for(i in eventName){if(eventName.hasOwnProperty(i)&&typeof i==="string"&&i&&typeof eventName[i]==="function"){this.off(i,eventName[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventName=events[i].toLowerCase().replace(/^on/,"");perEventHandlers=handlers[eventName];if(perEventHandlers&&perEventHandlers.length){if(func){foundIndex=_inArray(func,perEventHandlers);while(foundIndex!==-1){perEventHandlers.splice(foundIndex,1);foundIndex=_inArray(func,perEventHandlers,foundIndex);}}else{handlers[eventName].length=0;}}}}
return this;};ZeroClipboard.prototype.handlers=function(eventName){var prop,copy=null,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(handlers){if(typeof eventName==="string"&&eventName){return handlers[eventName]?handlers[eventName].slice(0):null;}
copy={};for(prop in handlers){if(handlers.hasOwnProperty(prop)&&handlers[prop]){copy[prop]=handlers[prop].slice(0);}}}
return copy;};var _dispatchClientCallbacks=function(eventName,context,args,async){var handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers[eventName];if(handlers&&handlers.length){var i,len,func,originalContext=context||this;for(i=0,len=handlers.length;i<len;i++){func=handlers[i];context=originalContext;if(typeof func==="string"&&typeof window[func]==="function"){func=window[func];}
if(typeof func==="object"&&func&&typeof func.handleEvent==="function"){context=func;func=func.handleEvent;}
if(typeof func==="function"){_dispatchCallback(func,context,args,async);}}}
return this;};ZeroClipboard.prototype.clip=function(elements){elements=_prepClip(elements);for(var i=0;i<elements.length;i++){if(elements.hasOwnProperty(i)&&elements[i]&&elements[i].nodeType===1){if(!elements[i].zcClippingId){elements[i].zcClippingId="zcClippingId_"+elementIdCounter++;_elementMeta[elements[i].zcClippingId]=[this.id];if(_globalConfig.autoActivate===true){_addEventHandler(elements[i],"mouseover",_elementMouseOver);}}else if(_inArray(this.id,_elementMeta[elements[i].zcClippingId])===-1){_elementMeta[elements[i].zcClippingId].push(this.id);}
var clippedElements=_clientMeta[this.id].elements;if(_inArray(elements[i],clippedElements)===-1){clippedElements.push(elements[i]);}}}
return this;};ZeroClipboard.prototype.unclip=function(elements){var meta=_clientMeta[this.id];if(meta){var clippedElements=meta.elements;var arrayIndex;if(typeof elements==="undefined"){elements=clippedElements.slice(0);}else{elements=_prepClip(elements);}
for(var i=elements.length;i--;){if(elements.hasOwnProperty(i)&&elements[i]&&elements[i].nodeType===1){arrayIndex=0;while((arrayIndex=_inArray(elements[i],clippedElements,arrayIndex))!==-1){clippedElements.splice(arrayIndex,1);}
var clientIds=_elementMeta[elements[i].zcClippingId];if(clientIds){arrayIndex=0;while((arrayIndex=_inArray(this.id,clientIds,arrayIndex))!==-1){clientIds.splice(arrayIndex,1);}
if(clientIds.length===0){if(_globalConfig.autoActivate===true){_removeEventHandler(elements[i],"mouseover",_elementMouseOver);}
delete elements[i].zcClippingId;}}}}}
return this;};ZeroClipboard.prototype.elements=function(){var meta=_clientMeta[this.id];return meta&&meta.elements?meta.elements.slice(0):[];};var _getAllClientsClippedToElement=function(element){var elementMetaId,clientIds,i,len,client,clients=[];if(element&&element.nodeType===1&&(elementMetaId=element.zcClippingId)&&_elementMeta.hasOwnProperty(elementMetaId)){clientIds=_elementMeta[elementMetaId];if(clientIds&&clientIds.length){for(i=0,len=clientIds.length;i<len;i++){client=_clientMeta[clientIds[i]].instance;if(client&&client instanceof ZeroClipboard){clients.push(client);}}}}
return clients;};_globalConfig.hoverClass="zeroclipboard-is-hover";_globalConfig.activeClass="zeroclipboard-is-active";_globalConfig.trustedOrigins=null;_globalConfig.allowScriptAccess=null;_globalConfig.useNoCache=true;_globalConfig.moviePath="ZeroClipboard.swf";ZeroClipboard.detectFlashSupport=function(){_deprecationWarning("ZeroClipboard.detectFlashSupport",_globalConfig.debug);return _detectFlashSupport();};ZeroClipboard.dispatch=function(eventName,args){if(typeof eventName==="string"&&eventName){var cleanEventName=eventName.toLowerCase().replace(/^on/,"");if(cleanEventName){var clients=currentElement?_getAllClientsClippedToElement(currentElement):_getAllClients();for(var i=0,len=clients.length;i<len;i++){_receiveEvent.call(clients[i],cleanEventName,args);}}}};ZeroClipboard.prototype.setHandCursor=function(enabled){_deprecationWarning("ZeroClipboard.prototype.setHandCursor",_globalConfig.debug);enabled=typeof enabled==="boolean"?enabled:!!enabled;_setHandCursor(enabled);_globalConfig.forceHandCursor=enabled;return this;};ZeroClipboard.prototype.reposition=function(){_deprecationWarning("ZeroClipboard.prototype.reposition",_globalConfig.debug);return _reposition();};ZeroClipboard.prototype.receiveEvent=function(eventName,args){_deprecationWarning("ZeroClipboard.prototype.receiveEvent",_globalConfig.debug);if(typeof eventName==="string"&&eventName){var cleanEventName=eventName.toLowerCase().replace(/^on/,"");if(cleanEventName){_receiveEvent.call(this,cleanEventName,args);}}};ZeroClipboard.prototype.setCurrent=function(element){_deprecationWarning("ZeroClipboard.prototype.setCurrent",_globalConfig.debug);ZeroClipboard.activate(element);return this;};ZeroClipboard.prototype.resetBridge=function(){_deprecationWarning("ZeroClipboard.prototype.resetBridge",_globalConfig.debug);ZeroClipboard.deactivate();return this;};ZeroClipboard.prototype.setTitle=function(newTitle){_deprecationWarning("ZeroClipboard.prototype.setTitle",_globalConfig.debug);newTitle=newTitle||_globalConfig.title||currentElement&&currentElement.getAttribute("title");if(newTitle){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.setAttribute("title",newTitle);}}
return this;};ZeroClipboard.setDefaults=function(options){_deprecationWarning("ZeroClipboard.setDefaults",_globalConfig.debug);ZeroClipboard.config(options);};ZeroClipboard.prototype.addEventListener=function(eventName,func){_deprecationWarning("ZeroClipboard.prototype.addEventListener",_globalConfig.debug);return this.on(eventName,func);};ZeroClipboard.prototype.removeEventListener=function(eventName,func){_deprecationWarning("ZeroClipboard.prototype.removeEventListener",_globalConfig.debug);return this.off(eventName,func);};ZeroClipboard.prototype.ready=function(){_deprecationWarning("ZeroClipboard.prototype.ready",_globalConfig.debug);return flashState.ready===true;};var _receiveEvent=function(eventName,args){eventName=eventName.toLowerCase().replace(/^on/,"");var cleanVersion=args&&args.flashVersion&&_parseFlashVersion(args.flashVersion)||null;var element=currentElement;var performCallbackAsync=true;switch(eventName){case"load":if(cleanVersion){if(!_isFlashVersionSupported(cleanVersion)){_receiveEvent.call(this,"onWrongFlash",{flashVersion:cleanVersion});return;}
flashState.outdated=false;flashState.ready=true;flashState.version=cleanVersion;}
break;case"wrongflash":if(cleanVersion&&!_isFlashVersionSupported(cleanVersion)){flashState.outdated=true;flashState.ready=false;flashState.version=cleanVersion;}
break;case"mouseover":_addClass(element,_globalConfig.hoverClass);break;case"mouseout":if(_globalConfig.autoActivate===true){ZeroClipboard.deactivate();}
break;case"mousedown":_addClass(element,_globalConfig.activeClass);break;case"mouseup":_removeClass(element,_globalConfig.activeClass);break;case"datarequested":var targetId=element.getAttribute("data-clipboard-target"),targetEl=!targetId?null:document.getElementById(targetId);if(targetEl){var textContent=targetEl.value||targetEl.textContent||targetEl.innerText;if(textContent){this.setText(textContent);}}else{var defaultText=element.getAttribute("data-clipboard-text");if(defaultText){this.setText(defaultText);}}
performCallbackAsync=false;break;case"complete":_deleteOwnProperties(_clipData);break;}
var context=element;var eventArgs=[this,args];return _dispatchClientCallbacks.call(this,eventName,context,eventArgs,performCallbackAsync);};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(require,exports,module){_amdModuleId=module&&module.id||null;return ZeroClipboard;});}else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports){_cjsModuleId=module.id||null;module.exports=ZeroClipboard;}else{window.ZeroClipboard=ZeroClipboard;}})();
;(function($){var style=document.documentElement.style,hasTextOverflow=('textOverflow'in style||'OTextOverflow'in style),domSplit=function(root,maxIndex){var index=0,result=[],domSplitAux=function(nodes){var i=0,tmp;if(index>maxIndex){return;}
for(i=0;i<nodes.length;i+=1){if(nodes[i].nodeType===1){tmp=nodes[i].cloneNode(false);result[result.length-1].appendChild(tmp);result.push(tmp);domSplitAux(nodes[i].childNodes);result.pop();}else if(nodes[i].nodeType===3){if(index+nodes[i].length<maxIndex){result[result.length-1].appendChild(nodes[i].cloneNode(false));}else{tmp=nodes[i].cloneNode(false);tmp.textContent=$.trim(tmp.textContent.substring(0,maxIndex-index));result[result.length-1].appendChild(tmp);}
index+=nodes[i].length;}else{result.appendChild(nodes[i].cloneNode(false));}}};result.push(root.cloneNode(false));domSplitAux(root.childNodes);return $(result.pop().childNodes);};$.extend($.fn,{textOverflow:function(str,autoUpdate){var more=str||'&#x2026;';if(!hasTextOverflow){return this.each(function(){var element=$(this),clone=element.clone(),originalElement=element.clone(),originalText=element.text(),originalWidth=element.width(),low=0,mid=0,high=originalText.length,reflow=function(){if(originalWidth!==element.width()){element.replaceWith(originalElement);element=originalElement;originalElement=element.clone();element.textOverflow(str,false);originalWidth=element.width();}};element.after(clone.hide().css({'position':'absolute','width':'auto','overflow':'visible','max-width':'inherit'}));if(clone.width()>originalWidth){while(low<high){mid=Math.floor(low+((high-low)/2));clone.empty().append(domSplit(originalElement.get(0),mid)).append(more);if(clone.width()<originalWidth){low=mid+1;}else{high=mid;}}
if(low<originalText.length){element.empty().append(domSplit(originalElement.get(0),low-1)).append(more);}}
clone.remove();if(autoUpdate){setInterval(reflow,200);}});}else{return this;}}});})(jQuery);
;(function($){if(typeof $.fn.simpleEditor==='undefined'){$.fn.simpleEditor=function(updateContent){$.fn.simpleEditor.html=function(iframe){return iframe.contentWindow.document.getElementsByTagName('body')[0].innerHTML;};return this.each(function(){var $textarea=$(this);var iframe;var maxChars=2000;function enableDesignMode(){var content=$textarea.val();if($.trim(content)==''){content='<br />';}
if(iframe){$textarea.hide();$(iframe).contents().find('body').html(content);$(iframe).show();$textarea.before(toolbar());return true;}
iframe=document.createElement('iframe');iframe.frameBorder=0;iframe.frameMargin=0;iframe.framePadding=0;iframe.className='iframe-textarea';$textarea.after(iframe);var doc='<html><head></head><body style="cursor: auto; padding: 2px 2px 20px; margin: 0; white-space: pre-wrap; word-wrap: break-word; font-family: Arial; font-size: 12px;">'+content+'</body></html>';tryEnableDesignMode(doc,function(){$textarea.before(toolbar());$textarea.attr('data-editor',1).hide();enterCharacters();});}
function updateTextarea(updateData){if(typeof updateData=='string'){$('.iframe-textarea').contents().find('body').html(updateData);}}
function tryEnableDesignMode(doc,callback){if(!iframe)return false;try{iframe.contentWindow.document.open();iframe.contentWindow.document.write(doc);iframe.contentWindow.document.close();}catch(error){}
if(document.contentEditable){iframe.contentWindow.document.designMode='on';callback();return true;}else if(document.designMode!=null){try{iframe.contentWindow.document.designMode='on';callback();return true;}catch(error){}}
setTimeout(function(){tryEnableDesignMode(doc,callback);},500);return false;}
function preSave(callback){var htmlContent=$(iframe).contents().find('body').html();$textarea.attr('data-description',htmlContent).val(htmlContent);if(typeof callback=='function')callback();}
function toolbar(){var $tb=$('<div>').addClass('actions');$('<i class="bold-bicon" data-command="bold"><i></i></i>').appendTo($tb);$('<i class="italic-bicon" data-command="italic"><i></i></i>').appendTo($tb);$('<i class="underline-bicon" data-command="underline"><i></i></i>').appendTo($tb);$('<i class="cancel-bicon"><i></i></i>').appendTo($tb);$('<i class="save-bicon"><i></i></i>').appendTo($tb);$('<span class="character-counter">'+maxChars+'</span>').appendTo($tb);var $iframeBody=$(iframe.contentWindow.document.getElementsByTagName('body')[0]);$('[data-command]',$tb).off('click.editor').on('click.editor',function(){formatText($(this).attr('data-command'),null,$(this));});$(iframe).closest('form').off('save.editor').on('save.editor',function(e,callback){preSave(callback);});$iframeBody.off('click.editor, keyup.editor, paste.editor').on('click.editor, keyup.editor, paste.editor',function(){$('[data-command]',$tb).each(function(){updateFormat($(this).attr('data-command'),$(this));});enterCharacters();});$iframeBody.off('keydown.editor').on('keydown.editor',function(e){if(exceededLimitInput()&&e.keyCode!=8&&e.keyCode!=46){e.preventDefault();e.stopPropagation();}});return $tb;};function formatText(command,option,$obj){iframe.contentWindow.focus();try{iframe.contentWindow.document.execCommand(command,false,option);}catch(e){}
iframe.contentWindow.focus();updateFormat(command,$obj);};function updateFormat(command,$obj){if(iframe.contentWindow.document.queryCommandState(command)){$obj.addClass('active');}else{$obj.removeClass('active');}}
function enterCharacters(){var length=$(iframe).contents().find('body').html().replace(/<(|\/)(div|b|i|u|br)(| )(|\/)>/ig,'').length;var $characterCounter=$('.actions .character-counter');if(length>maxChars){$characterCounter.addClass('too-much');}else{$characterCounter.removeClass('too-much');}
$characterCounter.text(Math.max(maxChars-length,0));}
function exceededLimitInput(){return($('.actions .character-counter').text()-0)<=0;}
if(typeof updateContent!='undefined'){updateTextarea(updateContent);}else{enableDesignMode();}});};}})(jQuery);
;(function($){$.widget('depositphotos.depositTips',{options:{standalone:false,type:'simple',display:{effect:'none',effectSpeed:600,show:'mouseenter',hide:'mouseleave',hideOnBody:true,keycode:13,hideTimeout:100,showTimeout:100,position:'absolute',force:true,viewport:window},pointer:{show:true,classname:false,position:'auto',priority:['tm','rm','lm','bl','br','tl','tr','rt','rb','lt','lb','auto']},template:{linking:'parent',position:'auto',priority:['bm','bl','br','tm','rm','lm','tl','tr','rt','rb','lt','lb','wright','wleft','auto'],offset:{top:0,left:0},markup:{simple:'<div class="d_tips d_tips_simple"><i class="d_tips_pointer"><i></i></i><div class="d_tips_content"></div></div>',image:'<div class="d_tips d_tips_image d_tips_content"></div>',video:'<div class="d_tips d_tips_video d_tips_content"></div>',editorial:undefined,html:'<div class="d_tips d_tips_html"><i class="d_tips_pointer"><i></i></i><div class="d_tips_content"></div></div>'}},callbacks:{show:function($target){$target.children().trigger('tipsShowed');},hide:undefined}},_setOption:function(key,value){if(typeof value==='object'){$.extend(this.options[key],value);}else{this.options[key]=value;}},_init:function(){this.$this=this.element;this.options.template.markup.editorial='<i class="d_editorial">'+tr('Editorial Use Only')+'</i>';this._parseParams();this._prepare();this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){var tipsId=this.targets.$target.attr('data-tips-id');dp.core.unbinder(this.targets,this.handlers,['depositTips'+tipsId,this.widgetFullName||this.widgetBaseClass]);this.targets=this.handlers=undefined;clearTimeout(this._showTimeoutId);clearTimeout(this._hideTimeoutId);if(typeof dp.tips.data[tipsId]!=='undefined'&&dp.tips.data[tipsId].counter>1){dp.tips.data[tipsId].counter--;}else{delete dp.tips.data[tipsId];}},_parseParams:function(){var _this=this;var attributes=this.$this.get(0).attributes;var regex=/^data-/;var setParam=function(name,value){var names=name.split('-');if(value==='true'){value=true;}
if(value==='false'){value=false;}
if(typeof value==='string'&&value.indexOf(',')!==-1){value=value.split(',');}
if(names.length===2&&_this.options.hasOwnProperty(names[0])&&_this.options[names[0]].hasOwnProperty(names[1])){_this.options[names[0]][names[1]]=value;}
if(names.length===1&&_this.options.hasOwnProperty(names[0])){_this.options[names[0]]=value;}};for(var i=0;i<attributes.length;i++){if(attributes[i].nodeName.search(regex)>=0){setParam(attributes[i].nodeName.replace(regex,''),attributes[i].nodeValue);}}},_prepare:function(){var tipsId=this.$this.attr('data-tips-id');if(!tipsId){tipsId=getUUID();this.$this.attr('data-tips-id',tipsId);}},_gather:function(){return{$target:this.$this,$template:$(this.options.template.markup[this.options.type]),$body:$('body'),$window:$(window)}},_handlers:function(){var _this=this;return{target:{handler:function(e){return _this._onEvent('Target',e);},events:['position','show','hide','mouseenter','mouseleave','click','blur','keyup','touchstart'],run:function(){var target=$(this).get(0);var handler=_this['_collect'+_this.options.type.charAt(0).toUpperCase()+_this.options.type.slice(1)];if(typeof handler==='function'){handler(target);}}},template:{handler:function(e){_this._onEvent('Target',e);},events:['hide','position']},body:{handler:function(e){if(Object.keys(dp.tips.instances).length>0&&_this.targets.$template.find(e.target).length===0){_this._hide(e,true);}},events:(function(){return['touchstart','click'].map(function(el){return el+'.depositTips'+_this.targets.$target.attr('data-tips-id')});})(),enabled:this.options.display.hideOnBody===true&&this.options.display.hide!=='mouseleave'},window:{handler:function(e){_this._onEvent('Window',e);},events:['keyup','_resize']}}},_onEvent:function(target,e){if(e.type==='touchstart'){e.type='click';}
var handler='_on'+target+e.type.charAt(0).toUpperCase()+e.type.slice(1);if(typeof this[handler]==='function'&&this._isAllowedEvent(e.type)){return this[handler](e);}},_isAllowedEvent:function(event,action){var forceAllowed=['_resize','position','show','hide'];var eventMap={mouseover:'mouseenter',mouseout:'mouseleave'};if(eventMap.hasOwnProperty(event)){event=eventMap[event];}
if(forceAllowed.indexOf(event)!==-1){return true;}
switch(action||true){case'show':if(this.options.display.show===event||this.options.display.show.indexOf(event)!==-1){return true;}
break;case'hide':if(this.options.display.hide===event||this.options.display.hide.indexOf(event)!==-1){return true;}
break;default:if(this.options.display.show===event||this.options.display.hide===event||this.options.display.show.indexOf(event)!==-1||this.options.display.hide.indexOf(event)!==-1){return true;}
break;}
return false;},_onTargetPosition:function(e,offset){if(!offset&&this.targets.$template.data('visible')!==true){return false;}
offset=offset||this._getOffset(e);if(this.options.display.position==='fixed'){this.targets.$template.css({position:'fixed',top:offset.top-this.targets.$window.scrollTop(),left:offset.left-this.targets.$window.scrollLeft()});}else{this.targets.$template.css({top:offset.top,left:offset.left});}},_onTargetShow:function(e){this._show(e);},_onTargetHide:function(e){this._hide(e);},_onTargetMouseenter:function(e){var _this=this;clearTimeout(this._hideTimeoutId);if(this.options.display.showTimeout>0){clearTimeout(this._showTimeoutId);this._showTimeoutId=setTimeout(function(){_this._show(e);},this.options.display.showTimeout);}else{this._show(e);}},_onTargetMouseleave:function(e){var _this=this;clearTimeout(_this._showTimeoutId);if(this.options.display.hideTimeout>0){clearTimeout(_this._hideTimeoutId);this._hideTimeoutId=setTimeout(function(){_this._hide(e);},this.options.display.hideTimeout);}else{this._hide(e);}},_onTargetBlur:function(e){this._hide(e);},_onTargetClick:function(e){if(this.targets.$template.data('visible')===true){this._hide(e);}else{this._show(e);}
e.stopPropagation();e.stopImmediatePropagation();return false;},_onTargetKeyup:function(e){if(this.options.display.keycode!==27&&(this.options.display.keycode===0||e.which===this.options.display.keycode)){this._hide(e);}},_onWindowKeyup:function(e){if(e.which===this.options.display.keycode&&this.options.display.keycode===27){dp.tips.hideAll();}},_onWindow_resize:function(e){dp.tips.reposition();},_hideSelect:function(offset,$tip){var $select=$('select:focus');if(!$select.length)return;var obj1={top:offset.top,left:offset.left,h:$tip.outerHeight(),w:$tip.outerWidth()};offset=$select.offset();var obj2={top:offset.top,left:offset.left,h:$select.outerHeight()*($select.children().length+1),w:$select.outerWidth()};if($.fn.isOverlaps(obj1,obj2)){$select.trigger('blur.smartBlur');}},_show:function(e){var _this=this;if(this.targets.$target.attr('data-tips-disabled')==='true'||!this._isAllowedEvent(e.type,'show')){return false;}
if(this.options.standalone===true){dp.tips.hideAll();}
var tipsId=this.targets.$target.attr('data-tips-id');var $content=this.targets.$template.hasClass('d_tips_content')?this.targets.$template:this.targets.$template.find('.d_tips_content');var $data=this['_getData'+this.options.type.charAt(0).toUpperCase()+this.options.type.slice(1)]();dp.tips.instances[tipsId]=this.targets.$template;if(this.options.display.hideTimeout>0&&this.options.display.hide!=='click'){clearTimeout(_this._hideTimeoutId);clearTimeout(_this._showTimeoutId);}
if(this.targets.$template.hasClass('d_tips_content')){this.targets.$template.empty().append($data);}else{this.targets.$template.find('.d_tips_content').empty().append($data);}
if(this.options.type==='simple'){this.targets.$template.css('max-width',300);}
this.targets.$template.prependTo('body').hide();this.targets.$template.attr('data-tips-name',this.targets.$target.attr('data-tips-id'));var offset=this._getOffset(e);if(typeof offset==='object'&&($content.children().length>0||$content.text()!=='')){this.targets.$template.data('visible',true);this._onTargetPosition(e,offset);this._hideSelect(offset,this.targets.$template);switch(this.options.display.effect){case'fade':this.targets.$template.fadeIn(this.options.display.effectSpeed);break;case'slide':this.targets.$template.slideDown(this.options.display.effectSpeed);break;default:this.targets.$template.show();break;}
this.targets.$template.css('z-index','+='+Object.keys(dp.tips.instances).length);if(typeof this.options.callbacks.show==='function'){this.options.callbacks.show($content);}
if(this.options.type==='video'){var nativePlayback=!!document.createElement('video').canPlayType;var data=dp.tips.data[tipsId];dp.tips.player=dp.tips.player||new MediaElementPlayer($data.find('video').get(0),{loop:true,success:function(mediaElement,node){try{$('#'+node.id+'-mode').html('mode: '+mediaElement.pluginType);mediaElement.player.hideControls();mediaElement.player.disableControls();mediaElement.player.allowFullScreen=false;}catch(e){}}});dp.tips.player.setPlayerSize(data.dimensions.swidth,data.dimensions.sheight);if(nativePlayback){var data=dp.tips.data[tipsId];dp.tips.player.pause();try{if(data.src.webm){dp.tips.player.setSrc(data.src.webm);}
if(data.src.mp4){dp.tips.player.setSrc(data.src.mp4);}}catch(e){};dp.tips.player.play();}}}else{this.targets.$template.detach();}},_hide:function(e,force){var _this=this;var tipsId=this.targets.$target.attr('data-tips-id');if(!dp.tips.instances[tipsId]||(force!==true&&!this._isAllowedEvent(e.type,'hide'))){return false;}
if(this.options.type==='html'){this.targets.$template.find('[data-tips-for]').detach();}
if(typeof this.options.callbacks.hide==='function'){this.options.callbacks.hide(this.targets.$template);}
delete dp.tips.instances[tipsId];this.targets.$template.css('z-index','');this.targets.$template.data('visible',false).detach();},_collectSimple:function(target){var tipsId=target.getAttribute('data-tips-id');var data=dp.tips.data[tipsId]||{type:'simple',text:target.getAttribute('title')||undefined,counter:1};if(!dp.tips.data[tipsId]){dp.tips.data[tipsId]=data;}else{dp.tips.data[tipsId].counter++;}
target.removeAttribute('title');},_collectHtml:function(target){var tipsId=target.getAttribute('data-tips-id');var $tipsData;if(dp.tips.defer.hasOwnProperty(tipsId)){$tipsData=$(dp.tips.defer[tipsId]);}else{$tipsData=$('.d_tips_data[data-tips-for="'+tipsId+'"]').eq(0).detach();}
var data=dp.tips.data[tipsId]||{type:'html',$data:undefined,counter:1};if($tipsData.length>0){data.$data=$tipsData;}
if(typeof data.$data!=='undefined'){if(dp.tips.data[tipsId]){dp.tips.data[tipsId].counter++;}else{dp.tips.data[tipsId]=data;}}
if(dp.tips.callbacks.hasOwnProperty(tipsId)&&dp.tips.data.hasOwnProperty(tipsId)){dp.tips.callbacks[tipsId](dp.tips.data[tipsId].$data,$(target));}
dp.observer.fire('dpTipsCollect',[data.$data]);},_getDataSimple:function(){return dp.tips.data[this.targets.$target.attr('data-tips-id')].text;},_getDataImage:function(){var data=dp.tips.data[this.targets.$target.attr('data-tips-id')];var $placeholderImage=this.targets.$target.get(0).tagName.toLowerCase()==='img'?this.targets.$target.clone():this.targets.$target.find('img').clone();$placeholderImage.addClass('d_tips_image_placeholder');var $img=$('<img />');var $data=$('<div />');if($placeholderImage.length>0){$data.append($placeholderImage);$img.attr('src',$placeholderImage.attr('src').replace(/(\/[a-z]+)\/1[0-9]0\//g,'$1/450/'));}else{$img.attr('src',data.src);}
$data.append($img);var $dataImg=$data.find('img');if(data.is_editorial){$data.append(this.options.template.markup.editorial);$dataImg.parent().addClass('d_is_editorial');}
if(data.dimensions.sheight>0&&data.dimensions.swidth>0){var imgCss={width:data.dimensions.swidth,height:data.dimensions.sheight};$data.css('width',data.dimensions.swidth);$dataImg.attr('style','');$dataImg.css(imgCss);$dataImg.parent().css(imgCss);$dataImg.last().css({width:'auto',height:'auto'});}
return $data;},_getDataVideo:function(){var data=dp.tips.data[this.targets.$target.attr('data-tips-id')];var nativePlayback=!!document.createElement('video').canPlayType;if(!nativePlayback){dp.tips.$player=dp.tips.player=undefined;}
var $container=$('<div />');var $player=dp.tips.getVideoPlayer();$container.append($player);if(data.is_editorial){$container.append(this.options.template.markup.editorial);}
$player.css('maxWidth',data.dimensions.swidth);$player.find('video').attr({width:data.dimensions.swidth,height:data.dimensions.sheight,poster:data.src.jpg});var $webm=$player.find('source[data-type="webm"]');var $mp4=$player.find('source[data-type="mp4"]');if(data.src.webm){$webm.attr('src',data.src.webm);$webm.css('display','block');}else{$webm.attr('src','');$webm.css('display','none');}
if(data.src.mp4){$mp4.attr('src',data.src.mp4);$mp4.css('display','block');}else{$mp4.attr('src','');$mp4.css('display','none');}
if(!nativePlayback){var $swfObject=$player.find('object');var $flashVars=$player.find('param[name="flashvars"]');var $movie=$player.find('param[name="movie"]');var $poster=$player.find('img[data-type="poster"]');if(data.src.mp4){$movie.attr('value',$movie.attr('data-value')+data.src.mp4);$flashVars.attr('value',$flashVars.attr('data-value')+data.src.mp4);$swfObject.attr({width:data.dimensions.swidth,height:data.dimensions.sheight});$swfObject.css('display','block');}else{$flashVars.attr('value','');$swfObject.css('display','none');}
$poster.attr({width:data.dimensions.swidth,height:data.dimensions.sheight,src:data.src.jpg});}else{if($player.find('source').length===0){$player.find('video').attr('src',data.src.mp4||data.src.webm);}}
return $container;},_getDataHtml:function(){var data=dp.tips.data[this.targets.$target.attr('data-tips-id')];data.$data.css('display','block').show();return data.$data;},_getOffset:function(e){var positions=this.options.template.priority;var position=(positions.indexOf(this.options.template.position)>=0)?this.options.template.position:'auto';var $pointer=this.targets.$template.find('i.d_tips_pointer');var linking=this.options.template.linking;var $linkingTo=this.targets.$target;if(linking!=='parent'&&linking!=='cursor'){var $newLinkingTo=this.targets.$target.closest(linking);if($newLinkingTo.length>0){$linkingTo=$newLinkingTo;}}
var offset={parent:linking==='cursor'?{top:e.pageY,left:e.pageX}:$linkingTo.offset(),template:{top:undefined,left:undefined},min:{left:undefined,top:undefined},max:{left:undefined,top:undefined},backup:{}};var scroll={top:this.targets.$window.scrollTop(),left:this.targets.$window.scrollLeft()};var getOuterDimensions=function($outer,offset){return{width:($outer.outerWidth()>0?$outer.outerWidth():5)+offset.left,height:($outer.outerHeight()>0?$outer.outerHeight():5)+offset.top}};var dimensions={template:{width:this.targets.$template.outerWidth(),height:this.targets.$template.outerHeight()},parent:{width:linking==='cursor'?20:$linkingTo.outerWidth(),height:linking=='cursor'?20:$linkingTo.outerHeight()},window:{width:$(this.options.display.viewport).width(),height:$(this.options.display.viewport).height()},outer:getOuterDimensions($pointer,this.options.template.offset)};var checkPosition=function(positions,min,max){return positions.left>min.left&&positions.top>min.top&&positions.left<max.left&&positions.top<max.top;};var reversePosition=function(char){switch(char){case't':return'b';case'b':return't';case'r':return'l';case'l':return'r';default:return char;}};offset.min.left=scroll.left;offset.min.top=scroll.top;offset.max.left=offset.min.left+dimensions.window.width-dimensions.template.width;offset.max.top=offset.min.top+dimensions.window.height-dimensions.template.height;if(positions.indexOf(position)>0){positions.splice(positions.indexOf(position),1);positions.unshift(position);}
for(var i=0;i<positions.length;i++){if(this.options.pointer.show===true&&$pointer.length>0){$pointer.removeClass().addClass('d_tips_pointer').addClass('d_'+reversePosition(positions[i].charAt(0))+(positions[i].charAt(1))).addClass(this.options.pointer.classname);}
dimensions.outer=getOuterDimensions($pointer,this.options.template.offset);offset.template=this.calculatePosition(positions[i],offset,scroll,dimensions);if(!offset.template)continue;if(this.options.display.force){var intersectionSegments=function(a1,b1,a2,b2){var diff=Math.min(a2,b2)-Math.max(a1,b1);return diff>0?diff:0;};offset.backup[positions[i]]={template:offset.template,diff:{w:intersectionSegments(offset.min.left,offset.template.left,offset.min.left+dimensions.window.width,offset.template.left+dimensions.template.width),h:intersectionSegments(offset.min.top,offset.template.top,offset.min.top+dimensions.window.height,offset.template.top+dimensions.template.height)}};}
if(checkPosition(offset.template,offset.min,offset.max)===true){break;}else{delete offset.template;}}
if(this.options.display.force&&typeof offset.template!=='object'){var max={square:-9999999999,position:false};for(var i in offset.backup){if(offset.backup[i].diff.w*offset.backup[i].diff.h>max.square){max={square:offset.backup[i].diff.w*offset.backup[i].diff.h,position:i}}}
offset.template=offset.backup[max.position].template;}
return offset.template;},calculatePosition:function(position,offset,scroll,dimensions){if(typeof position==='object'){switch(position[0]){case'r':return{top:offset.parent.top+position[1],left:offset.parent.left+dimensions.parent.width+dimensions.outer.width}
case'l':return{top:offset.parent.top+position[1],left:offset.parent.left-dimensions.template.width-dimensions.outer.width}}}
switch(position){case'wleft':var newTop=false;if(offset.parent.top<dimensions.template.height+scroll.top-dimensions.parent.height){newTop=scroll.top+1;}
if(offset.max.top-1<offset.parent.top){newTop=offset.max.top-1;}
return{top:newTop,left:offset.parent.left-dimensions.template.width-dimensions.outer.width}
case'wright':var newTop=false;if(offset.parent.top<dimensions.template.height+scroll.top-dimensions.parent.height){newTop=scroll.top+1;}
if(offset.max.top-1<offset.parent.top){newTop=offset.max.top-1;}
return{top:newTop,left:offset.parent.left+dimensions.parent.width+dimensions.outer.width}
case'tl':return{top:offset.parent.top-dimensions.template.height-dimensions.outer.height,left:offset.parent.left}
case'tm':return{top:offset.parent.top-dimensions.template.height-dimensions.outer.height,left:offset.parent.left+(dimensions.parent.width/2)-(dimensions.template.width/2)}
case'tr':return{top:offset.parent.top-dimensions.template.height-dimensions.outer.height,left:offset.parent.left+dimensions.parent.width-dimensions.template.width}
case'rt':return{top:offset.parent.top-(dimensions.outer.height/2),left:offset.parent.left+dimensions.parent.width+dimensions.outer.width}
case'rm':return{top:offset.parent.top+(dimensions.parent.height/2)-(dimensions.template.height/2),left:offset.parent.left+dimensions.parent.width+dimensions.outer.width}
case'rb':return{top:offset.parent.top+dimensions.parent.height-dimensions.template.height,left:offset.parent.left+dimensions.parent.width+dimensions.outer.width}
case'bl':return{top:offset.parent.top+dimensions.parent.height+dimensions.outer.height,left:offset.parent.left}
case'bm':return{top:offset.parent.top+dimensions.parent.height+dimensions.outer.height,left:offset.parent.left+(dimensions.parent.width/2)-(dimensions.template.width/2)}
case'br':return{top:offset.parent.top+dimensions.parent.height+dimensions.outer.height,left:offset.parent.left+dimensions.parent.width-dimensions.template.width}
case'lt':return{top:offset.parent.top-(dimensions.outer.height/2),left:offset.parent.left-dimensions.template.width-dimensions.outer.width}
case'lm':return{top:offset.parent.top+(dimensions.parent.height/2)-(dimensions.template.height/2),left:offset.parent.left-dimensions.template.width-dimensions.outer.width}
case'lb':return{top:offset.parent.top+dimensions.parent.height-dimensions.template.height,left:offset.parent.left-dimensions.template.width-dimensions.outer.width}
default:return false;}}});})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositFieldIndicate",{options:{placeholderColorClass:'d-placeholder-color'},_init:function(){this.$this=this.element;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{$fields:this.$this,$error:$('<span class="d_error" />')}},_handlers:function(){var _this=this;return{fields:{handler:function(e,params){var event='_'+e.type;if(typeof _this[event]!='undefined'){_this[event]($(this),params);}
$(this).data('valid',undefined);_this._setSelectorColor(e.target);},events:['correct','incorrect','progress','reset','change','input','blur','keyup','paste'],run:function(){_this.targets.$fields.each(function(){_this._setSelectorColor(this);});}}}},_setSelectorColor:function(selectorEl){var $selector=$(selectorEl);if($selector.prop('tagName')==='SELECT'){$selector.val()?$selector.removeClass(this.options.placeholderColorClass):$selector.addClass(this.options.placeholderColorClass)}},_correct:function($field){this._reset($field);$field.data('valid',true).addClass('d_correct');},_incorrect:function($field,errors){this._reset($field);$field.data('valid',false).addClass('d_incorrect');if(errors&&typeof(errors)=='object'){for(var i=0;i<errors.length;i++){var $error=this.targets.$error.clone();$error.html(errors[i]).appendTo($field.parent());}}},_progress:function($field){this._reset($field);$field.data('valid','progress').addClass('d_progress').attr('disabled','disabled');},_reset:function($field){$field.data('valid',undefined).removeClass('d_incorrect d_correct d_progress').filter(':disabled').removeAttr('disabled');$field.parent().find('span.d_error').remove();}});})(jQuery);
;(function($){$.widget('depositphotos.depositPopup',{options:{lock:true,single:false,transparency:50,zIndex:4000,showTimeout:200,showSpeed:400,hideSpeed:50,effect:undefined},_name:undefined,_init:function(){this.$this=this.element;this._name=this.$this.attr('data-name');this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,['depositPopup-'+this._name,this.widgetFullName||this.widgetBaseClass]);this.targets=this.handlers=undefined;delete dp.popup.data[this._name];},_gather:function(){return{$window:$(window),$document:$(document),$html:$('html'),$body:$('body'),$popup:this.$this,$close:this.$this.find('.popup-close, [data-popup-close]'),$overlay:$('<div class="popup'+(this.$this.hasClass('no-border')?' no-border':'')+'"></div>'),$border:$('<div class="popup-border"></div>'),$lock:$('<div />',{'class':'popup-overlay opacity-absolute d_opacity'+this.options.transparency})}},_handlers:function(){var _this=this;return{popup:{handler:function(e,caller){_this['_'+e.type](caller);},events:['show','hide','position'],run:function(){dp.popup.add(_this._name,this);_this.options.effect=this.attr('data-popup-effect')||undefined;_this._launchCallbacks(dp.popup.getCallbacks(_this._name,'init'),this);dp.observer.fire('popupCreate',[_this._name]);if(this.attr('data-show')){$popup=this;clearTimeout(_this._timeout);_this._timeout=setTimeout(function(){$popup.trigger('show');},_this.options.showTimeout);}
this.detach();}},close:{handler:function(e){e.stopPropagation();if(_this.$this.hasClass('popup-no-close')){return;}
_this.targets.$popup.trigger('hide');return false;},events:'click'},overlay:{handler:function(e){if(e.target.className.search('overlay')!==-1&&!_this.$this.hasClass('popup-no-close')){_this.targets.$popup.trigger('hide');}},events:'click',run:function(){if(_this.$this.hasClass('popup-no-drag')){return;}
this.draggable({handle:'.popup-title',opacity:$.support.opacity?'':'0.5',stop:function(){_this._onDragStop();}});}},lock:{handler:function(){_this.targets.$popup.trigger('hide');},events:'click',run:function(){this.attr('data-name',_this._name);}},document:{handler:function(e){if(dp.popup.counter){switch(e.type){case'keydown':if(e.keyCode===13&&_this.targets.$popup.find('[data-key-enter]').length){e.preventDefault();_this.targets.$popup.find('[data-key-enter]:first').trigger('click');}
break;case'keyup':if(e.keyCode===27){dp.popup.hide(_this._name);}
break;}}},events:['keyup.depositPopup-'+_this._name,'keydown.depositPopup-'+_this._name]}}},_show:function(caller){var _this=this;if(dp.popup.instances.hasOwnProperty(this._name)){return false;}
var $overlay=this.targets.$overlay;var $popup=this.targets.$popup;if(!this._launchCallbacks(dp.popup.getCallbacks(_this._name,'condition-show'),$popup,caller)){return false;}
if(this.options.single||$popup.attr('data-single')){dp.popup.hideAll();}
$overlay.empty().append(this.targets.$border).append($popup);$overlay.css('z-index',this.options.zIndex+dp.popup.counter+1);$overlay.prependTo(this.targets.$body);switch(this.options.effect){case'fade':$popup.trigger('position');$popup.hide().fadeIn(this.options.showSpeed,function(){_this._launchCallbacks(dp.popup.getCallbacks(_this._name,'show'),$popup,caller);});this.targets.$border.hide().fadeIn(this.options.showSpeed);break;default:$popup.show(0,function(){$popup.trigger('position');});this.targets.$border.show();break;}
dp.popup.instances[this._name]=$popup;dp.popup.counter++;if(this.options.lock||$popup.attr('data-lock')){this._lock();}
if(!this.options.effect){this._launchCallbacks(dp.popup.getCallbacks(_this._name,'show'),$popup,caller);}
var autoHide=$popup.attr('data-autohide');if(autoHide){clearTimeout(this._timeout);this._timeout=setTimeout(function(){$popup.trigger('hide');},autoHide);}
dp.observer.fire('popupShow',[this._name]);},_hide:function(){var _this=this;if(!dp.popup.instances.hasOwnProperty(this._name)){return false;}
clearTimeout(this._timeout);var $overlay=this.targets.$overlay;var $popup=this.targets.$popup;$('.popup-overlay[data-name="'+this._name+'"]').fadeOut(this.options.hideSpeed,function(){$(this).detach();});this._launchCallbacks(dp.popup.getCallbacks(this._name,'hide'),$popup);$popup.detach();$overlay.detach();dp.popup.counter--;delete dp.popup.instances[this._name];dp.observer.fire('popupClose',[this._name]);},_position:function(){if(!this.$this.hasClass('popup-no-position')){this.targets.$overlay.setPositionCenter();}},_lock:function(){var $lock=this.targets.$lock.clone(true);$lock.prependTo('body').show().css({opacity:0,zIndex:this.options.zIndex+dp.popup.counter});switch(this.options.effect){case'fade':$lock.animate({opacity:this.options.transparency/100},this.options.showSpeed);break;default:$lock.css({opacity:this.options.transparency/100});}},_launchCallbacks:function(callbacks,$popup,caller){var result=true;for(var i=0;i<callbacks.length;i++){result=callbacks[i].apply(this,[$popup,caller])&&result;}
return result;},_onDragStop:function(){var dx=parseInt(this.targets.$overlay.css('margin-left'));var dy=parseInt(this.targets.$overlay.css('margin-top'));var winWidth=this.targets.$window.width();var winHeight=this.targets.$window.height();var diffWidth=winWidth-this.targets.$overlay.outerWidth();var diffHeight=winHeight-this.targets.$overlay.outerHeight();var offset=this.targets.$overlay.offset();if(offset.left<0)this.targets.$overlay.css('left',-dx);if(offset.top<0)this.targets.$overlay.css('top',-dy);if(offset.left-this.targets.$window.scrollLeft()>diffWidth)this.targets.$overlay.css('left',winWidth+dx);if(offset.top-this.targets.$window.scrollTop()>diffHeight)this.targets.$overlay.css('top',winHeight+dy);}});})(jQuery);
;(function($){$.widget('depositphotos.depositLightboxPanel',{options:{conf:{},url:{controller:null,home:null},thumbs:{small:132,medium:192},markup:{item:'.lightbox-item'},defaultLightboxName:'My Collection',timers:{shadowSync:1500,sliderShow:8000,sliderSpeed:200}},_init:function(){this.$this=this.element;this.conf=this._readConf();this.folders={};this.files=[];this.selectedFiles=[];this.itemsPosition={};this.loadOffset=0;this.loadLock=false;this.timeouts={};this.adjustmentMarginValue=0;this._enableApi();this._managePopups();this._addObserver();dp.core.binder(this.targets=this._gather(),this.handlers=this._handlers(),this.widgetFullName||this.widgetBaseClass);},_readConf:function(callback){var defaults={visible:false,lightbox:null,info:false,preview:false,thumbs:'small',editor:true};var conf=$.parseJSON(dp.storage.get('lbpSettings'));if(!conf)dp.storage.set('lbpSettings',JSON.stringify(defaults));this.options.conf=$.extend(this.options.conf,{visible:dp.storage.get('panelForceVisible')?!!dp.tools.number(dp.storage.remove('panelForceVisible')):undefined});conf=$.extend(defaults,conf,this.options.conf);if(this.options.conf){dp.storage.set('lbpSettings',JSON.stringify(conf));if(this.options.conf.visible){dp.storage.remove('cLiftLvl');dp.storage.remove('currentLevel');}}
return conf;},_updatePanelConf:function(name,value,apply){if(!this.conf.hasOwnProperty(name)||typeof value==='function')return;var pair={};pair[name]=value;this.conf=$.extend($.parseJSON(dp.storage.get('lbpSettings')),this.conf,pair);dp.storage.set('lbpSettings',JSON.stringify(this.conf));if(apply)this._applyPanelConf(name,value);this._initCustomScroll();},_applyPanelConf:function(name,value){switch(name){case'visible':if(value){this.$this.show();this.targets.triggers.$state.filter('.lb-panel-open').addClass('hidden');this._adjustDistance();}else{this.$this.hide();this.targets.triggers.$state.filter('.lb-panel-open').removeClass('hidden');}
break;case'lightbox':var $lightboxList=this.targets.actions.$switchFolder.find('option').prop('selected',false);$lightboxList.filter('[value="'+this.conf.lightbox+'"]').prop('selected',true);this.viewFolder();break;case'preview':this.$this.find(this.options.markup.item).trigger('preview.dlb',[value]);break;case'thumbs':this.targets.scope.$holder[this.conf.thumbs==='small'?'removeClass':'addClass']('search-result-big');this.targets.triggers.$layout.removeClass('small medium').addClass(this.conf.thumbs);this.$this.find(this.options.markup.item).trigger('layout.dlb');this._adjustDistance();$('.d_lift').trigger('liftAdjustment',[this.conf.thumbs]);break;case'editor':this.targets.scope.$wrapper[(value)?'addClass':'removeClass']('active-notes');var $items=this.targets.scope.$container.find(this.options.markup.item);var $item=$items.first();if(this.targets.scope.$holder.width()<$items.length*($item.width()+parseInt($item.css('marginRight')))){this._adjustDistance();}
break;}},_preparePanel:function(){var _this=this;$.each(['visible','info','editor','thumbs'],function(idx,key){_this._applyPanelConf(key,_this.conf[key]);});if(!dp.config.user.id)return;this.getFolders(function(){if(!_this.conf.lightbox||!_this.folders.hasOwnProperty(_this.conf.lightbox)){_this.conf.lightbox=null;for(var id in _this.folders){if(!_this.folders.hasOwnProperty(id))continue;if(_this.folders[id]['title']===_this.options.defaultLightboxName){_this.conf.lightbox=id;break;}}
_this.conf.lightbox=_this.conf.lightbox||_this._getFirstLightboxId();}
_this._applyPanelConf('lightbox',_this.conf.lightbox);});},_gather:function(){var targets={scope:{$menu:this.$this.find('.lb-menu'),$editor:this.$this.find('.lb-notes')}};return $.extend(true,targets,{scope:{$window:$(window),$body:$('body'),$panel:this.$this,$wrapper:this.$this.find('.lb-panel-wrapper'),$container:this.$this.find('.lb-panel-container'),$holder:this.$this.find('.items-holder'),$slider:this.$this.find('.no-files')},templates:{$item:this.$this.find('.lightbox-item').detach(),$placeholder:$('<div class="move-placeholder lightbox-item"></div>')},menu:{$btn:targets.scope.$menu.find('.lightbox-menu-bicon'),$selectFiles:targets.scope.$menu.find('[data-action="select-files"]'),$copyFiles:targets.scope.$menu.find('[data-action="copy-files"]'),$moveFiles:targets.scope.$menu.find('[data-action="move-files"]'),$deleteFiles:targets.scope.$menu.find('[data-action="delete-files"]')},editor:{$pusher:targets.scope.$editor.find('.pusher-bicon'),$area:targets.scope.$editor.find('textarea[name="notes"]'),$notes:targets.scope.$editor.find('.notes-wrapper'),$form:targets.scope.$editor.find('.notes-editor'),$text:targets.scope.$editor.find('.notes-text'),$save:targets.scope.$editor.find('.save-bicon'),$cancel:targets.scope.$editor.find('.cancel-bicon')},actions:{$switchFolder:this.$this.find('.lb-list'),$createFolder:this.$this.find('[data-action="create-folder"]'),$editFolder:this.$this.find('[data-action="edit-folder"]'),$viewFolder:this.$this.find('[data-action="view-folder"]'),$shareFolder:this.$this.find('[data-action="share-folder"]'),$deleteFolder:this.$this.find('[data-action="delete-folder"]'),$cartFiles:this.$this.find('[data-action="cart-files"]')},triggers:{$state:$('.lb-panel-trigger'),$info:this.$this.find('.lb-info-trigger'),$edit:this.$this.find('[data-trigger="edit"]'),$layout:this.$this.find('.lb-header-right .layout-bicon'),$editor:targets.scope.$editor.find('.notes-bicon, .pencil-bicon')},popups:{$createFolder:dp.popup.get('create-folder'),$editFolder:dp.popup.get('edit-folder'),$shareFolder:dp.popup.get('share-folder'),$deleteFolder:dp.popup.get('delete-folder'),$copyFiles:dp.popup.get('copy-files'),$moveFiles:dp.popup.get('move-files'),$deleteFiles:dp.popup.get('delete-files')}});},_handlers:function(){var _this=this;return{scope:{window:{handler:function(e){_this._adjustDistance();},events:['_resize']},body:{handler:function(e){if(!$(e.target).closest('.popup').length&&_this.targets.scope.$menu.hasClass('active')){_this.targets.menu.$btn.trigger('click');}},events:'click'},panel:{handler:function(e){switch(e.type){case'toggle':_this._updatePanelConf('visible',!$(this).is(':visible'),true);break;case'open':_this._updatePanelConf('visible',true,true);break;}},events:['toggle','open'],run:function(){this.depositLift({dragMarker:'.lb-lift-drag',rowItemSettings:{item:'.lightbox-item'},defaultHeight:_this.options.thumbs.medium,callbacks:{afterUp:_this._initCustomScroll.bind(_this),afterDown:_this._initCustomScroll.bind(_this)},thumbs:{small:_this.options.thumbs.small,medium:_this.options.thumbs.medium},confThumbs:_this.conf.thumbs});_this._preparePanel();}},menu:{handler:function(e){e.stopPropagation();if(dp.tips.instances['lb-edit-tips']){dp.tips.instances['lb-edit-tips'].trigger('hide');}},events:'click'},container:{handler:function(e){_this._onContainerResize();},events:['resizeContainer'],run:function(){this.sortable({scroll:false,tolerance:'pointer',zIndex:9999,helper:'clone',delay:150,distance:5,items:_this.options.markup.item,placeholder:{element:function(currentItem){return _this.targets.templates.$placeholder.clone().attr('data-id',currentItem.attr('data-id')).css('margin-right',_this.adjustmentMarginValue+'px');},update:function(e,ui){return;}},start:function(e,ui){if(ui.placeholder instanceof jQuery&&ui.placeholder.parent().get(0)===this){ui.placeholder.appendTo($(this).children().first());}},stop:function(e,ui){if(ui.helper instanceof jQuery){ui.helper.remove();}},update:function(e,ui){_this._onSortableUpdate(e,ui);}});}},slider:{run:function(){this.show().depositGallery({animationTimeouts:{slide:_this.options.timers.sliderShow,show:_this.options.timers.sliderSpeed},effect:'linearFade',selectors:{slide:'.slider-wrapper > div',nav:{boxes:'.slider-pager i'}},stops:{slider:false}}).hide().trigger('stop');if(!dp.config.user.id)_this._toggleSlider();}}},menu:{btn:{events:'click',handler:function(){var $menu=_this.targets.scope.$menu;if($menu.hasClass('active')){$menu.removeClass('open').addClass('rotate');setTimeout(function(){$menu.removeClass('active');},100);}else{$menu.addClass('active open');setTimeout(function(){$menu.removeClass('rotate');},100);}}},selectFiles:{events:'click',handler:function(){_this.targets.scope.$holder.find(_this.options.markup.item).trigger(_this.targets.menu.$selectFiles.hasClass('selected')?'deselect.dlb':'select.dlb');}},copyFiles:{events:'click',handler:function(){if(!dp.lightbox.isGranted('selection'))return;dp.popup.show('copy-files');}},moveFiles:{events:'click',handler:function(){if(!dp.lightbox.isGranted('selection'))return;dp.popup.show('move-files');}},deleteFiles:{events:'click',handler:function(){if(!dp.lightbox.isGranted('selection'))return;dp.popup.show('delete-files');}}},editor:{area:{run:'simpleEditor'},notes:{run:'depositLoading'}},actions:{switchFolder:{handler:function(){if(_this.loadLock)return;_this._updatePanelConf('lightbox',$(this).val(),true);},events:'change'},createFolder:{handler:function(e){dp.lightbox.createFolder();},events:'click'},cartFiles:{handler:function(e){var $this=$(this);if(!dp.lightbox.isGranted('selection')||$this.data('busy'))return;_this.cartFiles(null,function(){$this.data('busy',false);});},events:'click'}},triggers:{state:{handler:function(e){e.stopPropagation();_this.targets.scope.$panel.trigger('toggle');$(window).trigger('scroll.depositLiftUpButton');},events:'click'},info:{handler:function(){_this._updatePanelConf('editor',!_this.targets.scope.$wrapper.hasClass('active-notes'),true);},events:'click'},edit:{handler:function(e){e.stopPropagation();},events:'click',run:function(){if(!dp.config.user.id)return;this.depositTips({type:'html',display:{show:'click',hide:'click',hideTimeout:0,showTimeout:0,position:'fixed'},pointer:{priority:['bl','br','tm','rm','lm','tl','tr','rt','rb','lt','lb','auto']},template:{priority:['tl','tm','tr','bm','bl','br','rm','lm','rt','rb','lt','lb','wright','wleft','auto']},callbacks:{show:function($tips){var $actions=$tips.find('[data-action]');$actions.each(function(){$(this).off('.dlb').on('click.dlb',function(){var $this=$(this);var action=this.getAttribute('data-action');if($(this).hasClass('disabled'))return;if(action==='preview-files'){$this.find('.checkbox-bicon').toggleClass('selected');_this._updatePanelConf('preview',!_this.conf.preview,true);setTimeout(function(){$this.parents('.d_tips').trigger('hide');},250);return;}
if(!dp.popup.get(action)&&typeof dp.lightbox[action]==='function'){dp.lightbox[action]();}else{dp.popup.show(action);}
$this.parents('.d_tips').trigger('hide');});});var $viewFolder=$actions.filter('[data-action="view-folder"]');if(_this.conf.lightbox){$actions.removeClass('disabled');$viewFolder.attr('href',_this._getLightboxViewLink(_this.conf.lightbox,_this.folders[_this.conf.lightbox]['title']));}else{$viewFolder.removeAttr('href');$actions.addClass('disabled');}
$actions.filter('[data-action="preview-files"]').find('.checkbox-bicon')[_this.conf.preview?'addClass':'removeClass']('selected');}}});}},layout:{handler:function(e){var size=_this.conf.thumbs==='small'?'medium':'small';_this._updatePanelConf('thumbs',size,true);},events:'click'},editor:{handler:function(){_this.targets.editor.$area.simpleEditor(dp.lightbox.getFolderData(_this.conf.lightbox)['description']||'');_this.targets.scope.$editor.removeClass('empty-notes');_this.targets.editor.$notes.addClass('edit-notes');_this._bindEditorEvents();},events:'click'}}};},_onContainerResize:function(){if(this.clientHeight!==this.scrollHeight){if(!this.targets.scope.$container.hasClass('empty')){if(this.targets.scope.$wrapper.hasClass('active-notes')){this.targets.editor.$pusher.addClass('inside');}else{this.targets.editor.$pusher.removeClass('inside');}
this.targets.scope.$editor.addClass('has-scroll');}}else{if(!this.targets.scope.$container.hasClass('empty')){this.targets.editor.$pusher.removeClass('inside');this.targets.scope.$editor.removeClass('has-scroll');}}
if(!this.targets.scope.$container.height()){this.targets.scope.$wrapper.addClass('flattened');}else{this.targets.scope.$wrapper.removeClass('flattened');}},_onSortableUpdate:function(e,ui){var fileId=ui.item[0].getAttribute('data-id');var curIndex=ui.item.index()+1;var allreadyInFolder=this.files.indexOf(fileId)!==-1;var isFavoriteFile=ui.item.hasClass('lightbox-item');if(!allreadyInFolder&&!isFavoriteFile){this.files.splice(ui.item.index(),0,fileId);ui.item.replaceWith(ui.placeholder);dp.lightbox.addFile(fileId,false,curIndex,{sq:dp.url(ui.item.find('a[href]').attr('href')).param('sq')});}
if(allreadyInFolder&&!isFavoriteFile){ui.item.remove();return;}
if(allreadyInFolder&&isFavoriteFile){if(ui.helper)ui.helper.remove();dp.observer.fire('favoriteFilesSort');}},_initCustomScroll:function(){var onScrolling=function(e,scrolled){if(this.targets.scope.$holder.data('scrolled')===scrolled)return;var correction=this.targets.scope.$holder.find(this.options.markup.item).outerHeight();this.targets.scope.$holder.data('scrolled',scrolled);if(this.loadLock)return;if((scrolled+this.targets.scope.$container.height()+correction)>=this.targets.scope.$holder.height()){dp.observer.fire('partLoad');}};if(this.files.length>1){this.targets.scope.$holder.slimScroll({height:'auto',alwaysVisible:false,allowPageScroll:false,wheelStep:15,distance:'0px'}).on('slimscrolling',onScrolling.bind(this));}},_bindEditorEvents:function(){var _this=this;this.targets.scope.$editor.find('.actions .save-bicon').off('click.dlb').on('click.dlb',function(){_this.targets.editor.$notes.trigger('loading');_this.targets.editor.$form.trigger('save.editor',function(){if(_this.targets.editor.$area.val()==='<br>')_this.targets.editor.$area.val('');_this.editFolder(_this.conf.lightbox,{description:_this.targets.editor.$area.val()},function(){_this.targets.editor.$notes.removeClass('edit-notes');if(!_this.targets.editor.$area.val().length)_this.targets.scope.$editor.addClass('empty-notes');_this.targets.editor.$notes.trigger('loaded').removeAttr('style');});});});this.targets.scope.$editor.find('.actions .cancel-bicon').off('click.dlb').on('click.dlb',function(){_this.targets.editor.$notes.removeClass('edit-notes');if(!_this.targets.editor.$text.html().length)_this.targets.scope.$editor.addClass('empty-notes');});},_bindItemEvents:function($item){var _this=this;var itemId=$item.data('id');var $itemCheckbox=$item.find('.item-control .checkbox-bicon');var $itemClose=$item.find('.item-control .trash-bicon');$item.off('.dlb').on({'select.dlb':function(){$item.addClass('selected');$itemCheckbox.addClass('selected');if(itemId&&_this.selectedFiles.indexOf(itemId)===-1){_this.selectedFiles.push(itemId);}
_this._selectAllCheck();},'deselect.dlb':function(){$item.removeClass('selected');$itemCheckbox.removeClass('selected');if(itemId){var arIndex=_this.selectedFiles.indexOf(itemId);if(arIndex!==-1){_this.selectedFiles.splice(arIndex,1);}}
_this._selectAllCheck();},'preview.dlb':function(e,state){$(this).find('.d_lb_tips_image').attr('data-tips-disabled',!state);},'delete.dlb':function(){$(this).trigger('deselect.dlb').remove();},'mouseenter.dlb':function(){var position=$item.position();var width=$item.width();var height=$item.height();if((_this.targets.scope.$container.height()-(position['top']+height)<height/2)&&position['left']<width){$item.data('layered',true).addClass('magic-layered');}},'mouseleave.dlb':function(){if($item.data('layered')){$item.data('layered',false).removeClass('magic-layered');}},'layout.dlb':function(){var $image=$item.find('img');$image.attr('src',$image.attr('data-thumb-'+_this.conf.thumbs));$item.find('.hover-blur img').attr('src',$image.attr('data-thumb-'+_this.conf.thumbs));}});$itemCheckbox.off('.dlb').on('click.dlb',function(e){e.stopPropagation();var action=$item.hasClass('selected')?'deselect':'select';$item.trigger(action+'.dlb');});$itemClose.off('.dlb').on('click.dlb',function(e){e.stopPropagation();_this.deleteFiles(itemId);});$item.find('a[data-viewlink]').off('.dlb').on({'click.dlb':function(e,external){e.stopPropagation();e.preventDefault();if(e.button==0||external==0||(e.button==1&&$.browser.msie&&parseInt($.browser.version)<=8)){document.location.href=$item.find('a[data-viewlink]').attr('data-viewlink');}},'mousedown.dlb':function(e,external){e.preventDefault();if(e.button==2){$(this).attr('href',$(this).attr('data-viewlink'));}},'mouseleave.dlb':function(){$(this).attr('href','').removeAttr('href');}});if(this.conf.thumbs==='medium'){$item.find('.d_medium_selection').off('.dlb').on({'mouseenter.dlb':function(){$item.find('.d_lb_tips_image').trigger('mouseenter');},'mouseleave.dlb':function(){$item.find('.d_lb_tips_image').trigger('mouseleave');$(this).removeAttr('href');},'mousedown.dlb':function(e){$item.find('a[data-viewlink]').trigger('mousedown.dlb',e.button);if(e.button===2){$(this).attr('href',$item.find('a[data-viewlink]').attr('data-viewlink'));}}});}
$item.find('.d_lb_tips_image').attr('data-tips-disabled',!_this.conf.preview).depositTips({holdposition:true,display:{effect:'fade',effectSpeed:100,showTimeout:200,position:'fixed'},pointer:{show:false},template:{linking:'.d_lb_container_item',priority:[['r',-77],'wright','rm','rt','rb',['l',-77],'wleft','lm','lt','lb','bm','bl','br','tm','tl','tr'],offset:{top:0,left:7}}});},_toggleSlider:function(){if(!this.files.length){this.targets.scope.$slider.show().trigger('start');this.targets.scope.$holder.hide();}else{this.targets.scope.$slider.hide().trigger('stop');this.targets.scope.$holder.show();}},_manageLightboxList:function(action,data){var _this=this;var redrawListItem=function(lightboxId,title,count){_this.targets.actions.$switchFolder.find('option[value="'+lightboxId+'"]').text(dp.tools.shorten(title)+' ['+count+']');};var sortLightboxSwitch=function(){_this.targets.actions.$switchFolder.find('option').sort(function(a,b){var x=a.innerHTML.toUpperCase(),y=b.innerHTML.toUpperCase();return(x<y)?-1:(x>y)?1:0;}).each(function(index,item){_this.targets.actions.$switchFolder.append(item)});};switch(action){case'add':_this.folders[data.lightboxId]=data;_this.targets.actions.$switchFolder.append($('<option value="'+data.lightboxId+'" data-title="'+data.title+'">'+dp.tools.shorten(data.title)+' ['+data.count+']</option>'));_this.targets.actions.$switchFolder.find('option[data-type="default"]').remove();sortLightboxSwitch();break;case'remove':_this.targets.actions.$switchFolder.find('option[value="'+data.lightboxId+'"]').remove();delete _this.folders[data.lightboxId];break;case'empty':_this.targets.actions.$switchFolder.append($('<option data-type="default" value="">'+dp.tr('No Folders')+'</option>'));_this._updatePanelConf('lightbox',null);_this._updateInfoPanel(null,true);break;case'edit':_this.folders[data.lightboxId]=data;redrawListItem(data.lightboxId,data.title,data.count);sortLightboxSwitch();break;case'updateCount':_this.folders[data.lightboxId].count=data.count;redrawListItem(data.lightboxId,_this.folders[data.lightboxId].title,data.count);break;}},_cloneLightboxList:function(){var $list=this.targets.actions.$switchFolder.find('option').clone().prop('selected',false);$list.eq(0).prop('selected',true);return $list;},_getLightboxViewLink:function(lightboxId,title){return'/folder/'+encodeURIComponent(title)+'-'+lightboxId+'.html';},_updateInfoPanel:function(data,reset){var description='';if(data&&typeof data==='object'&&data.hasOwnProperty('description')&&data.description!==''){description=data.description;this.targets.scope.$editor.removeClass('empty-notes');}else{this.targets.scope.$editor.addClass('empty-notes');}
this.targets.editor.$notes.removeClass('edit-notes');this.targets.editor.$text.html(description);this.targets.editor.$area.text(description);this.targets.editor.$area.simpleEditor(description);},_flushPanel:function(){this.targets.scope.$holder[0].innerHTML='';this.selectedFiles=[];this.targets.menu.$selectFiles.removeClass('selected');this.targets.menu.$selectFiles.attr('title',this.targets.menu.$selectFiles.attr('data-title-select'));},_renderItems:function(files,position){var isManualAdd=typeof position!=='undefined';var $item;var $itemImage;var $hoverImg;var itemPreview;var mediumThumb;var render=function(renderData,fileId,iteration){if(renderData===null){return;}
$item=this.targets.templates.$item.clone().removeClass('hidden');$itemImage=$item.find('.item-image img');mediumThumb=(renderData['type']==='video')?renderData['thumb_large']:renderData['thumb_medium'];itemPreview=(renderData['type']==='video')?renderData['thumbs']:renderData['thumb_huge']||'';$item.attr('data-id',fileId);$item.find('.item-holder').attr('data-viewlink',renderData['viewLink']);$itemImage.attr({'src':((this.conf.thumbs==='small')?renderData['thumb']:mediumThumb)||'','data-id':fileId,'data-type':renderData['type']=='vector'?'image':renderData['type'],'class':'d_lb_tips_image','data-thumb-small':renderData['thumb'],'data-thumb-medium':mediumThumb});$item.find('svg filter').attr('id','blur'+fileId);$hoverImg=$item.find('.hover-blur img');$hoverImg.attr('src',((this.conf.thumbs==='small')?renderData['thumb']:mediumThumb)||'');$hoverImg.css('filter','url(#blur'+fileId+')');dp.tips.setData($itemImage,{type:renderData['type'],dimensions:{height:renderData['height'],width:renderData['width'],mp:renderData['mp']},title:renderData['title'],author:renderData['author'],description:renderData['description'],src:itemPreview,is_editorial:renderData['is_editorial'],fps:renderData['fps']||''});if(!position){$item.attr('data-position',iteration+1);this.targets.scope.$holder[isManualAdd?'prepend':'append']($item);}else{var $placeholder=this.targets.scope.$holder.find('.lightbox-item[data-id="'+fileId+'"]');if($placeholder.length>0){$placeholder.replaceWith($item);}else{this.targets.scope.$holder.append($item);}
$item.attr('data-position',position+1);}
this.loadOffset++;this._bindItemEvents($item);if(isManualAdd)$item.hide().fadeIn();};if(isManualAdd){for(var id in files){if(!files.hasOwnProperty(id))continue;render.call(this,files[id],id);}}else{for(var i=0;i<this.files.length;i++){if(!files.hasOwnProperty(this.files[i]))continue;render.call(this,files[this.files[i]],this.files[i],i);}}
this.targets.scope.$panel.trigger('liftAdjustment');if(!this.files)this.invalidateFilesIndex('silent');if(isManualAdd){clearTimeout(this.timeouts['shadowSync']);this.timeouts['shadowSync']=setTimeout(this.syncFilesOrder.bind(this),this.options.timers.shadowSync);}
this._initCustomScroll();},_adjustDistance:function(){var _this=this;var minMargin=5;var maxWidth=this.targets.scope.$holder.width();var $items=this.targets.scope.$container.find(this.options.markup.item);if($items.length){var itemWidth=$items.first().width()+minMargin;var countItems=Math.floor(maxWidth/itemWidth);var diff=maxWidth-(countItems*itemWidth);this.adjustmentMarginValue=Math.floor(diff/(countItems+1))+minMargin;$items.each(function(){$(this).css('marginRight',_this.adjustmentMarginValue);});}
this.targets.scope.$container.trigger('resizeContainer');},_getItemById:function(id){return this.$this.find(this.options.markup.item).filter('[data-id='+id+']');},_getFirstLightboxId:function(){return this.targets.actions.$switchFolder.find('option').eq(0).val()||null;},_loading:function(type,on){if(!this.conf.lightbox)return;if(type==='panel'){if(on){this.targets.scope.$container.prepend('<div class="lb-panel-block"></div>');this.targets.scope.$container.find('.lb-panel-block').css('height',this.targets.scope.$container.outerHeight()+'px');}else{this.targets.scope.$container.find('.lb-panel-block').remove();}}
if(type==='item'){if(on){this.targets.scope.$holder.append('<div class="lb-item-block"></div>');}else{this.targets.scope.$holder.find('.lb-item-block').remove();}}
this.loadLock=!!on;},_calcLoadLimit:function(){return Math.floor((this.targets.scope.$container.width()||$(window).width())/this.options.thumbs[this.conf.thumbs])*5;},getFolders:function(callback){var _this=this;dp.core.ajax({url:_this.options.url.controller+'/getFolders',data:{order:'count_desc'},success:function(response){if(response.errors.length){console.log(response.errors);return;}
if(response.data&&response.data.length){dp.observer.fire('lightboxPanelLoad',[response.data]);for(var i in response.data){if(!response.data.hasOwnProperty(i))continue;_this._manageLightboxList('add',response.data[i]);}
if(typeof callback==='function')callback();}else{dp.observer.fire('lbEmptyList');}}});},createFolder:function(formData,callback){var _this=this;if(formData)formData['public']=formData.hasOwnProperty('public')?'yes':'no';formData=$.extend({title:'',description:'',keywords:'','public':'yes'},formData);dp.core.ajax({$caller:this._getPopupAction('create-folder'),url:_this.options.url.controller+'/createFolder',data:formData,success:function(response){_this._getPopupAction('create-folder').trigger('loaded');if(response.errors.length){console.log(response.errors);return;}
_this._manageLightboxList('add',response.data);_this._updatePanelConf('lightbox',response.data.lightboxId,true);dp.observer.fire('createFolder',[response.data]);if(typeof callback==='function')callback();}});},editFolder:function(lightboxId,formData,callback){var _this=this;formData['public']=formData.hasOwnProperty('public')?'yes':'no';dp.core.ajax({url:_this.options.url.controller+'/editFolder/'+lightboxId,data:formData,success:function(response){if(response.errors.length){console.log(response.errors);return;}
_this._manageLightboxList('edit',response.data);if(lightboxId==_this.conf.lightbox)_this._updateInfoPanel(response.data);dp.observer.fire('editFolder',[response.data]);if(typeof callback==='function')callback();}});},viewFolder:function(partLoad){var _this=this;if(!partLoad)this.loadOffset=0;if(partLoad&&typeof this.folders[this.conf.lightbox]!=='undefined'&&this.loadOffset>=this.folders[this.conf.lightbox].count)return;this._loading(!partLoad?'panel':'item',true);dp.core.ajax({url:this.options.url.controller+'/viewFolder',data:{lightboxId:this.conf.lightbox,offset:this.loadOffset,limit:this._calcLoadLimit()},success:function(response){if(response.errors.length){console.log(response.errors);return;}
_this._loading(!partLoad?'panel':'item',false);if(!partLoad){_this.files=response.data['itemsIdList']||[];_this._flushPanel();dp.observer.fire('renewLamps');dp.observer.fire('cartLinks',[_this.conf.lightbox]);}else{if(response.data['itemsIdList']){_this.files=response.data['itemsIdList']||[];}}
_this._updateInfoPanel(response.data);if(response.data['itemsCollection']&&typeof response.data['itemsCollection']==='object'){_this._renderItems(response.data['itemsCollection']);}
dp.observer.fire('changeFolder');}});},shareFolder:function(lightboxId,formData,callback){var _this=this;dp.core.ajax({$caller:this._getPopupAction('share-folder'),url:this.options.url.controller+'/shareFolder/'+lightboxId,data:formData,success:function(response){_this._getPopupAction('share-folder').trigger('loaded');if(response.errors.length){console.log(response.errors);return;}
if(typeof callback=='function')callback(response.data);},error:function(jqXHR,textStatus,errorThrown){$.error('jquery.depositLightbox.js. Cannot email lightbox.',jqXHR,textStatus,errorThrown)}});},moveFolder:function(targetLightbox,lightboxes,callback){var _this=this;if(!$.isArray(lightboxes))lightboxes=[lightboxes];lightboxes=lightboxes.filter(function(id){return _this.folders[id]['count']>0});if(!lightboxes.length){if(typeof callback==='function')callback();return;}
dp.core.ajax({$caller:this._getPopupAction('move-files'),url:_this.options.url.controller+'/moveFolder',data:{targetId:targetLightbox,lightboxes:lightboxes},success:function(response){_this._getPopupAction('move-files').trigger('loaded');if(response.errors.length){console.log(response.errors);return;}
if(response.data&&typeof response.data==='object'){for(var lightboxId in response.data){if(response.data.hasOwnProperty(lightboxId)){dp.observer.fire('changeFolderCount',[lightboxId,response.data[lightboxId]]);}}}
if(lightboxes.indexOf(_this.conf.lightbox)!==-1||targetLightbox===_this.conf.lightbox){_this.viewFolder();}
if(typeof callback==='function')callback();}});},deleteFolder:function(lightboxesId,callback){var _this=this;if(lightboxesId&&!(lightboxesId instanceof Array))lightboxesId=[lightboxesId];_this._loading('panel',true);dp.core.ajax({$caller:this._getPopupAction('delete-folder'),url:_this.options.url.controller+'/deleteFolder',data:{lightboxesId:lightboxesId},success:function(response){_this._getPopupAction('delete-folder').trigger('loaded');_this._loading('panel',false);if(response.errors.length){console.log(response.errors);return;}
if(response.data&&typeof response.data==='object'){for(var lightboxId in response.data){if(!response.data.hasOwnProperty(lightboxId)||!response.data[lightboxId])continue;_this._manageLightboxList('remove',{lightboxId:lightboxId});dp.observer.fire('deleteFolder',[lightboxId,_this.options.url.home]);if($.isEmptyObject(_this.folders))dp.observer.fire('lbEmptyList');}}
if(typeof callback==='function')callback();}});},cartFolder:function(lightboxesId,forceAction,callback){var _this=this;var pairs={};var allowedForceActions=['add','remove'];if(!$.isArray(lightboxesId))lightboxesId=[lightboxesId];for(var i=0;i<lightboxesId.length;i++){if(_this.folders[lightboxesId[i]]['count']==0)continue;if(allowedForceActions.indexOf(forceAction)!==-1){pairs[lightboxesId[i]]=forceAction==='remove';}else{pairs[lightboxesId[i]]=_this.folders[lightboxesId[i]]['inCart']==='yes';}}
if($.isEmptyObject(pairs)){if(typeof callback==='function')callback();return;}
_this._loading('panel',true);dp.core.ajax({url:_this.options.url.controller+'/cartFolder',data:{lightboxes:pairs},success:function(response){_this._loading('panel',false);if(response.errors.length){console.log(response.errors);return;}
if(response.data&&typeof response==='object'){for(var lightboxId in response.data){if(response.data.hasOwnProperty(lightboxId)&&response.data[lightboxId]){var result=response.data[lightboxId];_this.folders[lightboxId]['inCart']=pairs[lightboxId]?'no':'yes';dp.observer.fire('cartLinks',[lightboxId]);dp.observer.fire('cartAction',[pairs[lightboxId]?'remove':'add',result.items]);}}}
if(typeof callback==='function')callback();}});},favoriteFolder:function(lightboxId,favSpot,remove,callback){var _this=this;lightboxId=lightboxId||_this.conf.lightbox;dp.core.ajax({url:_this.options.url.controller+'/favoriteFolder/'+lightboxId,data:{favSpot:favSpot,remove:remove},success:function(response){if(response.errors.length){console.log(response.errors);return;}
if(response.data&&typeof response.data==='object'){for(var id in response.data){if(response.data.hasOwnProperty(id)&&response.data[id]){dp.observer.fire('favoriteFolder',[remove,id,favSpot]);}}}
if(typeof callback==='function')callback();}});},addFile:function(itemId,callback,position,params){var _this=this;position=dp.tools.number(position)||0;var addFile=function(){dp.core.ajax({url:_this.options.url.controller+'/addFile/'+itemId,data:{lightboxId:_this.conf.lightbox,sq:(params&&params.sq)?params.sq:'',position:position},success:function(response){if(response.errors.length){console.log(response.errors);return;}
if(!_this.conf.visible)_this._updatePanelConf('visible',true,true);_this._renderItems(response.data.items,position);dp.observer.fire('addFavoritesFile',[itemId,_this.conf.lightbox,response.data.count]);dp.observer.fire('changeFolderCount',[_this.conf.lightbox,response.data.count]);if(typeof callback==='function')callback();}});};!_this.conf.lightbox?this.createFolder(null,addFile):addFile();},deleteFiles:function(itemsId,lightboxId,callback){var _this=this;lightboxId=lightboxId||this.conf.lightbox;itemsId=(itemsId&&!(itemsId instanceof Array))?[itemsId]:itemsId||this.selectedFiles;var removeItemsPosition=[];for(var i=0;i<itemsId.length;i++){removeItemsPosition.push(this.itemsPosition[itemsId[i]]||0);}
if(!itemsId.length)return;if(itemsId.length>1)this._loading('panel',true);dp.core.ajax({$caller:this._getPopupAction('delete-files'),url:_this.options.url.controller+'/deleteFiles',data:{lightboxId:lightboxId,items:itemsId,itemsPosition:removeItemsPosition},success:function(response){_this._getPopupAction('delete-files').trigger('loaded');_this._loading('panel',false);if(response.errors.length){console.log(response.errors);return;}
if(response.data.items&&typeof response.data.items==='object'){for(var id in response.data.items){if(response.data.items.hasOwnProperty(id)&&response.data.items[id]){dp.observer.fire('deleteLightboxItem',[id,lightboxId,response.data.count]);}}}
dp.observer.fire('changeFolderCount',[lightboxId,response.data.count]);if(typeof callback==='function')callback();}});},moveFiles:function(targetLightbox,copyMode,callback){var _this=this;copyMode=!!copyMode;if(!_this.selectedFiles.length)return;if(!targetLightbox||targetLightbox==_this.conf.lightbox)return;_this._loading('panel',true);dp.core.ajax({$caller:this._getPopupAction('move-files').add(this._getPopupAction('copy-files')),url:_this.options.url.controller+'/moveFiles',data:{sourceId:_this.conf.lightbox,targetId:targetLightbox,items:_this.selectedFiles,copyMode:copyMode},success:function(response){_this._getPopupAction('move-files').trigger('loaded');_this._getPopupAction('copy-files').trigger('loaded');_this._loading('panel',false);if(response.errors.length){console.log(response.errors);return;}
if(typeof response.data.items==='object'){for(var id in response.data.items){if(response.data.items.hasOwnProperty(id)&&response.data.items[id]){if(!copyMode){dp.observer.fire('deleteLightboxItem',id);}}}}
dp.observer.fire('changeFolderCount',[targetLightbox,response.data.count.target]);dp.observer.fire('changeFolderCount',[_this.conf.lightbox,response.data.count.source]);if(typeof callback==='function')callback();}});},cartFiles:function(itemsId,callback){var _this=this;itemsId=itemsId||_this.selectedFiles;if(!itemsId.length)return;_this._loading('panel',true);dp.core.ajax({url:_this.options.url.controller+'/cartFiles',data:{items:itemsId},success:function(response){_this._loading('panel',false);if(response.errors.length){console.log(response.errors);return;}
if(response.data&&typeof response.data==='object'){dp.observer.fire('cartAction',['add',response.data]);}
dp.popup.show('cart-files');if(typeof callback==='function')callback();}});},syncFilesOrder:function(){if(!this.files.length)return;dp.core.ajax({url:this.options.url.controller+'/syncFilesOrder',data:{lightboxId:this.conf.lightbox,items:this.files},success:function(response){if(response.errors.length){console.log(response.errors);return;}
console.log('order saved');}});},_getPopupAction:function(popupName){return dp.popup.get(popupName).find('[data-action]');},_managePopups:function(){var _this=this;var formCleanUp=function($form){$form.find('input, textarea').each(function(){var $field=$(this);if(!$field.hasClass('d_placeholder_active')){if(this.getAttribute('name')==='public'){this.checked=true;this.value=1;}else{this.value='';$field.trigger('recount');}}});return $form;};var formFill=function($form,lightboxData){if(!lightboxData)return $form;for(var field in lightboxData){if(!lightboxData.hasOwnProperty(field))continue;var $formElem=$form.find('[name="'+field+'"]');if($formElem.is(':checkbox')){$formElem.prop('checked',lightboxData[field]==='yes');}else{$formElem.val(lightboxData[field]||'').trigger('recount');if(lightboxData[field]&&lightboxData[field].length){$formElem.parent().find('.d_placeholder_active').trigger('click');}}}
return $form;};dp.popup.callback('create-folder','init',function($pop){$pop.find('.has-counter').depositFieldCounter();});dp.popup.callback('create-folder','show',function($pop){var $form=formCleanUp($pop.find('form'));var $actionKey=_this._getPopupAction('create-folder');$actionKey.depositLoading();$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();_this.createFolder($form.serializeForm(true),function(){dp.popup.hide('create-folder');});});},true);dp.popup.callback('edit-folder','init',function($pop){$pop.find('.has-counter').depositFieldCounter();});dp.popup.callback('edit-folder','show',function($pop,ui){lightboxId=$pop.data('lightboxId')||_this.conf.lightbox;var $form=formFill($pop.find('form'),_this.folders[lightboxId]);var $actionKey=$pop.find('[data-action]');$actionKey.off('.dlb').on('click.dlb',function(e){if($actionKey.data('busy'))return
$actionKey.data('busy',true);_this.editFolder(lightboxId,$form.serializeForm(true),function(){$actionKey.data('busy',false);dp.popup.hide('edit-folder');});});},true);dp.popup.callback('share-folder','show',function($pop,ui){lightboxId=$pop.data('lightboxId')||_this.conf.lightbox;var $form=formCleanUp($pop.find('form'));var $actionKey=_this._getPopupAction('share-folder');var $validatedFields=$pop.find('.d-inputcheck input[name], .d-inputcheck textarea');$actionKey.depositLoading();$validatedFields.depositFieldIndicate().trigger('reset');$validatedFields.off('.dlb').on('keyup.dlb force.dlb',function(){var errors=[];var $this=$(this);$this.trigger('reset');if(!this.value.length){errors.push('e_input_empty');}
errors=errors.concat(dp.validator.validate(this.getAttribute('name'),this.value));if(!errors.length){$this.trigger('correct');}else{dp.validator.showErrorsForOne($this,[errors[0]]);}});$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();var isError=false;$validatedFields.trigger('force.dlb');$validatedFields.each(function(){if($(this).data('valid')!==true)isError=true;});if(!isError){_this.shareFolder(lightboxId,$form.serializeForm(true),function(resp){dp.popup.hide('share-folder');dp.popup.show('share-folder-after').find('.lb-mailHolder').text(resp);});}});},true);dp.popup.callback('delete-folder','show',function($pop,ui){lightboxId=$pop.data('lightboxId')||_this.conf.lightbox;var $actionKey=_this._getPopupAction('delete-folder');if(typeof _this.folders[lightboxId]!=='undefined'){$pop.find('.lb-textHolder').text(_this.folders[lightboxId].title);}
$actionKey.depositLoading();$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();_this.deleteFolder(lightboxId,function(){dp.popup.hide('delete-folder');dp.popup.show('delete-folder-after');});});},true);dp.popup.callback('copy-files','show',function($pop){var $lightboxesList=$pop.find('.custom-select');$lightboxesList.html(_this._cloneLightboxList());var $actionKey=_this._getPopupAction('copy-files');$actionKey.depositLoading();$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();var targetLightbox=$lightboxesList.find('option:selected').val();if(!targetLightbox)return;_this.moveFiles(targetLightbox,true,function(){dp.popup.hide('copy-files');dp.popup.show('copy-files-after').find('.lb-textHolder').text(_this.folders[targetLightbox].title);});});},true);dp.popup.callback('move-files','show',function($pop,ui){var lightboxes=$pop.data('lightboxes');var $lightboxesList=$pop.find('.custom-select');$lightboxesList.html(_this._cloneLightboxList());var $actionKey=_this._getPopupAction('move-files');$actionKey.depositLoading();$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();var targetLightbox=$lightboxesList.find('option:selected').val();if(!targetLightbox)return;if(!lightboxes){_this.moveFiles(targetLightbox,false,function(){dp.popup.hide('move-files');dp.popup.show('move-files-after').find('.lb-textHolder').text(_this.folders[targetLightbox].title);});}else{_this.moveFolder(targetLightbox,lightboxes,function(){dp.popup.hide('move-files');dp.popup.show('move-files-after').find('.lb-textHolder').text(_this.folders[targetLightbox].title);});}});},true);dp.popup.callback('delete-files','show',function($pop){var $actionKey=_this._getPopupAction('delete-files');$actionKey.depositLoading();$actionKey.off('.dlb').on('click.dlb',function(e){e.stopPropagation();_this.deleteFiles(null,null,function(){dp.popup.hide('delete-files');dp.popup.show('delete-files-after');});});},true);},invalidateFilesIndex:function(silent){var changes=[];this.itemsPosition={};silent=!!silent;var invalidation=function(idx,el){el.setAttribute('data-position',idx+1);var fileId=el.getAttribute('data-id');changes.push(this.files.splice(this.files.indexOf(fileId),1)[0]);this.itemsPosition[fileId]=idx+1;};this.$this.find(this.options.markup.item).each(invalidation.bind(this));this.files=changes.concat(this.files);if(!silent)this.syncFilesOrder();},_selectAllCheck:function(){if(this.targets.scope.$holder.find('.item-control .checkbox-bicon.selected').length){this.targets.menu.$selectFiles.addClass('selected');this.targets.menu.$selectFiles.attr('title',this.targets.menu.$selectFiles.attr('data-title-deselect'));}else{this.targets.menu.$selectFiles.removeClass('selected');this.targets.menu.$selectFiles.attr('title',this.targets.menu.$selectFiles.attr('data-title-select'));}},_addObserver:function(){var _this=this;dp.observer.add(this.widgetName,'favoriteFilesSort',this.invalidateFilesIndex.bind(this));dp.observer.add(this.widgetName,'partLoad',this.viewFolder.bind(this,true));dp.observer.add(this.widgetName,'deleteFolder',function(lightboxId){_this.files=[];if(lightboxId!=_this.conf.lightbox)return;var nextLightboxId=_this._getFirstLightboxId();if(nextLightboxId){_this._updatePanelConf('lightbox',nextLightboxId,true);}});dp.observer.add(this.widgetName,'dragItemToLightboxPanel',function(action){_this.targets.scope.$panel.trigger(action!==undefined?action:'toggle');});dp.observer.add(this.widgetName,'lbEmptyList',function(){_this._flushPanel();_this._manageLightboxList('empty',null);});dp.observer.add(this.widgetName,'changeFolder',function(){if(dp.storage.get('nonAuthFavFileAdding')){_this.addFile(dp.storage.remove('nonAuthFavFileAdding'));}
_this._toggleSlider();_this._adjustDistance();});dp.observer.add(this.widgetName,'changeFolderCount',function(lightboxId,count){_this._manageLightboxList('updateCount',{lightboxId:lightboxId,count:count});if(!count){_this.folders[lightboxId]['inCart']='no';dp.observer.fire('cartLinks',[lightboxId]);}
if(_this.conf.lightbox==lightboxId&&count>0){_this._adjustDistance();}
_this._toggleSlider();});dp.observer.add(this.widgetName,'addFavoritesFile',function(id){if(_this.files.indexOf(id)===-1)_this.files.unshift(id);});dp.observer.add(this.widgetName,'deleteLightboxItem',function(id){var idx=_this.files.indexOf(id);if(idx!==-1){_this.files.splice(idx,1);_this.loadOffset--;}
_this._getItemById(id).trigger('delete.dlb');_this.invalidateFilesIndex('silent');clearTimeout(_this.timeouts['shadowSync']);_this.timeouts['shadowSync']=setTimeout(_this.syncFilesOrder.bind(_this),_this.options.timers.shadowSync);});dp.observer.add(this.widgetName,'pagePartReload',function(){dp.observer.fire('renewLamps');_this._managePopups();});dp.observer.add(this.widgetName,'liftLevelChange',function(level){_this.targets.scope.$menu.attr('data-level',level);});},_enableApi:function(){if(!dp)return;var _this=this;dp.lightbox={set:function(name,val){if(!name||!_this.conf.hasOwnProperty(name))return;_this._updatePanelConf(name,val,true);},get:function(name){return _this.conf[name];},getFolderData:function(lightboxId){return _this.folders[lightboxId];},getFiles:function(){return _this.files;},createFolder:function(){dp.popup.show('create-folder');},editFolder:function(lightboxId){dp.popup.get('edit-folder').data('lightboxId',lightboxId).trigger('show');},shareFolder:function(lightboxId){dp.popup.get('share-folder').data('lightboxId',lightboxId).trigger('show');},cartFolder:function(lightboxId,callback){_this.cartFolder(lightboxId,null,callback);},moveFolder:this.moveFolder.bind(this),favoriteFolder:this.favoriteFolder.bind(this),deleteFolder:function(lightboxId){dp.popup.get('delete-folder').data('lightboxId',lightboxId).trigger('show');},massCartFolder:function(lightboxesId,forceAction,callback){_this.cartFolder(lightboxesId,forceAction,callback);},massMoveFolder:function(lightboxes){dp.popup.get('move-files').data('lightboxes',lightboxes).trigger('show');},massDeleteFolder:function(lightboxesId,callback){_this.deleteFolder(lightboxesId,callback);},addFile:this.addFile.bind(this),deleteFiles:this.deleteFiles.bind(this),cartFiles:this.cartFiles.bind(this),selectAll:function(){_this.targets.menu.$selectFiles.toggleClass('selected');_this.$this.find(_this.options.markup.item).trigger(_this.targets.menu.$selectFiles.hasClass('selected')?'select.dlb':'deselect.dlb');_this.targets.menu.$selectFiles.attr('title',_this.targets.menu.$selectFiles.attr('data-title-'+(_this.targets.menu.$selectFiles.hasClass('selected')?'deselect':'select')));},isGranted:function(permitions){if(['string','object'].indexOf(typeof permitions)===-1)return false;permitions=(typeof permitions==='string')?permitions.split(' '):permitions;var schema={selection:{rule:function(){return this.selectedFiles.length>0;},handler:function(){dp.popup.show('service-empty-selection');}}};for(var i=0;i<permitions.length;i++){if(schema[permitions[i]]['rule']&&!schema[permitions[i]]['rule'].call(_this)){schema[permitions[i]]['handler'].call(_this);return false;}}
return true;}};}});})(jQuery);
;(function($){$.widget('depositphotos.depositExpand',{options:{slideAnimated:true,toggleClass:'d_active',closeOnElsewhereClick:false,selectors:{expandArrow:'.d_expand_arrow',expandDropdown:'.d_for_d_expand'}},_init:function(){this.$this=this.element;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_gather:function(){var _this=this;return{scope:{$body:$('body')},main:{$expandWrapper:_this.$this,$expandArrow:$(_this.options.selectors.expandArrow),$expandDropdown:$(_this.options.selectors.expandDropdown)}};},_handlers:function(){var _this=this;return{scope:{body:{handler:function(){_this._hideDropdown();},events:'click',enabled:this.options.closeOnElsewhereClick}},main:{expandArrow:{handler:function(e){e.preventDefault();e.stopPropagation();if(!_this.targets.main.$expandDropdown.is(':animated')){_this._toggleDropdown();}},events:'click'},expandWrapper:{handler:function(e){switch(e.type){case'opened':_this.targets.main.$expandWrapper.addClass(_this.options.toggleClass);break;case'closed':_this.targets.main.$expandWrapper.removeClass(_this.options.toggleClass);break;}},events:['opened','closed'],enabled:typeof this.options.toggleClass!=='undefined'}}};},_toggleDropdown:function(){this._isOpened()?this._hideDropdown():this._showDropdown();},_isOpened:function(){return this.targets.main.$expandDropdown.is(':visible');},_showDropdown:function(){if(!this._isOpened()){this.options.slideAnimated?this.targets.main.$expandDropdown.slideDown():this.targets.main.$expandDropdown.show();this.targets.main.$expandWrapper.trigger('opened');}},_hideDropdown:function(){if(this._isOpened()){this.options.slideAnimated?this.targets.main.$expandDropdown.slideUp():this.targets.main.$expandDropdown.hide();this.targets.main.$expandWrapper.trigger('closed');}}})})(jQuery);
;(function($,undefined){$.widget("ui.depositTitles",{options:{hideDelay:0},_init:function(){this.$this=this.element;this.$titleDiv=$('<div />',{'class':'d_title d_radius3','css':{'top':0,'left':0}});this._collectData();this._bindEvents();},_collectData:function(){var _this=this;$.data(_this.$this,'depositTitles',$(_this.$this).attr('title')?$(_this.$this).attr('title'):'undefined title');$(_this.$this).removeAttr('title');},_bindEvents:function(){var _this=this;$(_this.$this).bind('mouseenter',function(e){clearTimeout(_this.timeoutId);var scroll={'top':$(window).scrollTop(),'left':$(window).scrollLeft()};_this.$titleDiv.html($.data(_this.$this,'depositTitles')).css({'top':-5000,'left':-5000}).appendTo("body");_this.$this.bind('mousemove',function(e){if(e.clientX+scroll.left+_this.$titleDiv.width()+20>$(window).width()-_this.$titleDiv.width())_this.$titleDiv.css({'top':e.clientY+scroll.top+22,'left':'','right':$(window).width()-e.clientX-scroll.left})
else _this.$titleDiv.css({'top':e.clientY+scroll.top+22,'left':e.clientX+scroll.left+20,'right':''});}).trigger('mousemove');$(_this.$this).bind('mouseleave',function(e){_this.timeoutId=setTimeout(function(){$(_this.$titleDiv).detach()},_this.options.hideDelay);$(_this.$this).unbind('mouseleave');$(_this.$this).unbind('mousemove');$(_this.$titleDiv).unbind();})});}});})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositSearchTypes",{_init:function(){this.$this=this.element;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){var $all=this.$this.find('input[type="checkbox"][name="all"]');return{element:{$holder:this.$this},types:{$checkboxes:this.$this.find('input[type="checkbox"]'),$indicators:this.$this.prev().find('span > i')},checkboxes:{$all:$all,$types:this.$this.find('input[type="checkbox"]').not($all)},external:{$clearable:this.$this.closest('.search').find('.d_clearable'),$input:this.$this.closest('.search').find('.search-input')}}},_handlers:function(){var _this=this;return{element:{holder:{handler:function(e){var args=Array.prototype.slice.apply(arguments,[1,arguments.length]);switch(e.type){case'set':_this._set.apply(_this,args);break;case'sync':_this._sync.apply(_this,args);break;default:break;}},events:['set','sync']}},types:{checkboxes:{handler:function(e){_this._onCheckBoxChange(this,e.type==='update');_this._redrawPlaceholder();},events:['change','update'],run:function(){_this.targets.checkboxes.$types.eq(0).trigger('update');}}}}},_onCheckBoxChange:function(target,doNotSend){if(target.name=='all'){if(target.checked){this._checkAll();}else{target.checked=true;return;}}else{var isAllChecked=this._isAllChecked();if(isAllChecked)this._checkAll();this.targets.checkboxes.$all.get(0).checked=isAllChecked;}
this._sync(doNotSend);},_sync:function(doNotSend,types){var checkedTypes={image:0,vector:0,video:0};var i;if(types){for(i in checkedTypes){checkedTypes[i]=types[i];this.targets.checkboxes.$types.filter('[name="'+i+'"]').prop('checked',dp.tools.string(types[i])!=='0');}}
if(this._isAllChecked()){for(i in checkedTypes){if(!checkedTypes.hasOwnProperty(i))continue;checkedTypes[i]=1;}
this._checkAll();}else{this.targets.checkboxes.$all.prop('checked',false);this.targets.checkboxes.$types.each(function(){if(this.checked)checkedTypes[this.name]=1;});}
this._toggleIcons(checkedTypes);if(doNotSend!==true)dp.search.set(checkedTypes);},_isAllChecked:function(){var $checked=this.targets.checkboxes.$types.filter(':checked');return $checked.length==0||this.targets.checkboxes.$types.length===$checked.length;},_checkAll:function(){this.targets.checkboxes.$types.each(function(){if(this.checked)this.checked=false;});},_toggleIcons:function(checkedTypes){this.targets.types.$indicators.show();for(var i in checkedTypes){if(checkedTypes.hasOwnProperty(i)&&checkedTypes[i]==0){this.targets.types.$indicators.filter('.'+i+'-icon').hide();}}
this.targets.external.$clearable.trigger('position');},_set:function(params){var target=this.targets.checkboxes.$types.filter('[name="'+params.key+'"]').get(0);if(target&&target.checked!==!!params.value){target.checked=!!params.value;$(target).trigger('update');}},_redrawPlaceholder:function(){var matrix=[];var prefix='searchForms_';this.targets.types.$checkboxes.each(function(idx,elem){matrix.push(elem.checked?1:0);});var translation=dp.tr(prefix+matrix.join(''));var $target=this.targets.external.$input;if($.support.placeholder)$target.attr('placeholder',translation);else $target.filter('.d_placeholder_active').val(translation);}});})(jQuery);
;(function($,undefined){$.widget("ui.depositSlidable",{options:{menuSpeed:200,menuHideDelay:800,autohide:false,hideOthers:false,effect:'fade'},_init:function(){this.$this=this.element;this.objId=this.$this.attr('id');this.callbacks=(window[this.objId])?window[this.objId]:false;this.targetObjId="#d_for_"+this.objId;this.objId="#"+this.objId;this.hasChildren=$(this.targetObjId).find('.d_has_level');if(typeof $(this.$this).attr('data-autohide')!='undefined'){this.options.autohide=($(this.$this).attr('data-autohide')=='false')?false:true;}
this._bind();if(this.hasChildren.length>0)this._level2();},_bind:function(){var _this=this;var handler=function(){if($(_this.targetObjId).is(':animated'))return false;if(_this.callbacks!=false&&_this.callbacks.hide)_this.callbacks.hide(_this.$this);if(_this.options.effect=='slide'){$(_this.targetObjId).slideUp(_this.options.menuSpeed,'linear',function(){_this.$this.removeClass('active')});}else{$(_this.targetObjId).fadeOut(_this.options.menuSpeed,'linear',function(){_this.$this.removeClass('active')});}}
if(_this.hasChildren.length==0&&_this.options.autohide==true)
{var bindings={'mouseleave':function(){$('body').removeClass('d_select_none');clearTimeout(_this.TimeoutID2);_this.TimeoutID2=setTimeout(function(){$(document.body).unbind('click',handler);handler();_this.$this.unbind();_this.$this.parent().unbind(bindings);},_this.options.menuHideDelay);},'mouseenter':function(){$('body').addClass('d_select_none');clearTimeout(_this.TimeoutID2);}};};var clickHandler=function(hndlr,toHide){if(_this.$this.hasClass('active')){return;}
$(this).unbind('click',clickHandler);if(_this.options.hideOthers==true)
{$('.'+_this.$this.attr('class').toString()).each(function(){if($(this).hasClass('active'))$(this).trigger('click');});};if(_this.callbacks!=false&&_this.callbacks.click)_this.callbacks.click(_this.$this);if(bindings)$(_this.$this.parent()).bind(bindings);var toggleHandler=function(){_this.$this.toggleClass('active');if($(this).is(":visible"))
{$(this).bind('click',function(e){e.stopPropagation();});$(document.body).bind('click',handler);}
else
{$(this).unbind();$(document.body).unbind('click',handler);};if(_this.$this.attr('type')&&_this.$this.attr('type')=='radio')_this.$this.prop('checked',true);};if(_this.options.effect=='slide')$(_this.targetObjId).slideToggle(_this.options.menuSpeed,'linear',toggleHandler);else $(_this.targetObjId).fadeToggle(_this.options.menuSpeed,'linear',toggleHandler);$(this).bind('click',clickHandler);return false;};_this.$this.parent().bind('click',clickHandler);},_level2:function(){var submenuWrapper=this;var timeout;var lastOpenedSubmenu;$(submenuWrapper.hasChildren).each(function(){$(this).bind({'mouseenter':function(){lastOpenedSubmenu===this&&clearTimeout(timeout);$(this).find('ul').fadeIn(0,'linear');},'mouseleave':function(){var submenu=this;lastOpenedSubmenu=this;timeout=setTimeout(function(){$(submenu).find('ul').fadeOut(0,'linear');},50);}});});}});})(jQuery);
;(function($,undefined){$.widget("ui.depositLoading",{options:{$loading:$('<i class="d_loading_icon d_loading_icon_loading" />'),$loadingOk:$('<i class="d_loading_icon d_loading_icon_ok" />'),$loadingFail:$('<i class="d_loading_icon d_loading_icon_fail" />'),extraIcons:false,buttonReturn:true,buttonReturnTimeout:0,buttonLeave:{fail:false,ok:false}},_init:function(){this.$this=this.element;this.$parent=this.$this.parent();this._bind();},_bind:function(){var _this=this;_this.$this.unbind('loading.depositLoading').bind('loading.depositLoading',function(){_this.$this.hide();$('.d_loading_icon',_this.$parent).detach();_this.options.$loading.clone().insertAfter(_this.$this);});_this.$this.unbind('state.depositLoading').bind('state.depositLoading',function(e,state){if(state==true)_this.options.$loadingOk.clone().insertAfter(_this.$this);else _this.options.$loadingFail.clone().insertAfter(_this.$this);if(_this.options.buttonReturn==true)_this._returnButton();});_this.$this.unbind('loaded.depositLoading').bind('loaded.depositLoading',function(e,state){$('.d_loading_icon_loading',_this.$parent).detach();if(_this.options.extraIcons==false){if(_this.options.buttonReturn==true)_this._returnButton();}else _this.$this.trigger('state',state);});},_returnButton:function(){var _this=this;var toggleProgress=function(){$('.d_loading_icon_loading',_this.$parent).detach();if(_this.options.buttonLeave.ok==false)$('.d_loading_icon_ok',_this.$parent).detach();else $('.d_loading_icon_ok',_this.$parent).addClass('d_loading_icon_leaved');if(_this.options.buttonLeave.fail==false)$('.d_loading_icon_fail',_this.$parent).detach();else $('.d_loading_icon_fail',_this.$parent).addClass('d_loading_icon_leaved');_this.$this.show();}
if(_this.options.buttonReturnTimeout>0){setTimeout(function(){toggleProgress();},_this.options.buttonReturnTimeout)}else toggleProgress();}});})(jQuery);
;(function($){$.widget('depositphotos.depositInCart',{options:{highLight:true,fullClass:'cart-full'},_init:function(){this.$this=this.element;this.count=undefined;this.busy={};this._addObserver();this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.observer.remove(this.widgetName);dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_addObserver:function(){var _this=this;dp.observer.add(_this.widgetName,'cartAction',function(action,items){for(var id in items){if(items.hasOwnProperty(id)&&items[id]){_this.$this.trigger('setCounter',action==='add'?1:-1);}}})},_gather:function(){return{$wrap:this.$this,$value:this.$this.find('[data-value]')};},_handlers:function(){var _this=this;return{wrap:{handler:function(e,data){var handlerName='_'+e.type;if(typeof _this[handlerName]==='function'){_this[handlerName](data);}},events:['setCounter','addItem','removeItem','highlight'],run:function(){_this.count=parseInt(_this.targets.$value.attr('data-value'));},trigger:'highlight'}}},_setCounter:function(count){this.count=Math.max(0,this.count+parseInt(count));if(this.count>0){this.targets.$value.removeClass('hidden');}else{this.targets.$value.addClass('hidden');}
this.targets.$value.attr('data-value',this.count).text(this.count);this.targets.$wrap.trigger('highlight');},_highlight:function(){if(this.options.highLight&&this.count>0){this.targets.$wrap.addClass(this.options.fullClass);}else{this.targets.$wrap.removeClass(this.options.fullClass);}},_addItem:function(data){this._addAndRemoveAction('add',data);},_removeItem:function(data){this._addAndRemoveAction('remove',data);},_addAndRemoveAction:function(action,cartData){var _this=this;if(_this.busy.hasOwnProperty(cartData.data.id)&&_this.busy[cartData.data.id]===true)return false;_this.busy[cartData.data.id]=true;dp.core.ajax({url:dp.config.cart.url,data:cartData.data,type:action==='add'?'put':'delete',success:function(data){if(data&&_this.targets){_this.busy[cartData.data.id]=false;if(data.result!==true){return $.error('jquery.depositInCart.js add/remove to/from cart method wrong responce: '+data);}
_this.targets.$wrap.trigger('setCounter',action==='add'?1:-1);if(typeof cartData.callback==='function'){cartData.callback(data,action);}}}});}});})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositInHeader",{options:{},_init:function(){this.$this=this.element;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{$header:this.$this,$variables:this.$this.find('[data-balance]'),$subsStatus:this.$this.find('[data-subs-status]')};},_handlers:function(){var _this=this;return{variables:{handler:function(e,data){_this._set(this,data)},events:'update'}}},_set:function(target,value){var type=target.getAttribute('data-balance');if(!value){switch(type){case'credits':value=dp.config.user.credits;break;case'subscription':value=dp.config.user.subscriptionFilesCount;if(value==0){this.targets.$subsStatus.show();}
break;case'bonus':value=dp.config.user.imagePacksCount;break;}}
if(typeof value!='number')value=parseFloat(value);if(type=='credits')value=value.toFixed(2);else value=parseInt(value);target.innerHTML=value;}});})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositLiveChat",{options:{id:null,lang:null,logged:null,skillsMap:{defaultSkill:4,guest:{'en':4,'de':5,'fr':6,'es':7,'sp':7,'ru':8,'it':9,'pt':10,'pl':11,'nl':12,'jp':13,'cz':14,'se':15,'cn':16,'tr':17},logged:{'en':18,'de':19,'fr':20,'es':21,'sp':21,'ru':22,'it':23,'pt':24,'pl':25,'nl':26,'jp':27,'cz':28,'se':29,'cn':30,'tr':31}},windowProps:{width:544,height:544,top:function(props){return(window.screen.height/2)-(props.height/2);},left:function(props){return(window.screen.width/2)-(props.width/2);},resizable:'yes',scrollbars:'no',status:'yes',location:'no'}},_init:function(){this.$this=this.element;this.options.lang=this.options.lang=='sp'?'es':this.options.lang;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{$button:this.$this}},_handlers:function(){var _this=this;return{button:{handler:function(){_this._livechatHandler();},events:'click'}}},_livechatHandler:function(){var _this=this;this.targets.$button.addClass('loading');if(window.__lc_inited){_this._windowOpener();_this.targets.$button.removeClass('loading');}else{window.__lc=window.__lc||{};window.__lc.license=this.options.id;window.__lc.skill=this._getSkills(this.options.lang);window.__lc.params=this._getAndSetParams();window.LC_API=window.LC_API||{};window.LC_API.on_before_load=function(){if(_this._livechatWindow){_this._livechatWindow.location.href=_this._getChatUrl();_this.targets.$button.removeClass('loading');}};var lc=document.createElement('script');lc.type='text/javascript';lc.async=true;lc.src=document.location.protocol+'//cdn.livechatinc.com/tracking.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(lc,s);_this._windowOpener();}},_windowOpener:function(){if(!this._livechatWindow||this._livechatWindow.closed==true){this._livechatWindow=window.open(this._getChatUrl(),'_blank',this._getWindowProps());}else{this._livechatWindow.focus();}},_getChatUrl:function(){var name=this.options.logged?'&name='+window.__lc.visitor.name:'';return'https://secure.livechatinc.com/licence/'+window.__lc.license+'/open_chat.cgi?lang='+this.options.lang+'&groups='+window.__lc.skill+'&uuid='+getUUID()+name+'#'+encodeURIComponent(window.location.href);},_getSkills:function(skill){return this.options.skillsMap[this.options.logged>0?'logged':'guest'][skill]||this.options.skillsMap.defaultSkill;},_getAndSetParams:function(){if(this.options.logged){window.__lc.visitor={name:dp.config.user.name||dp.config.user.username};return[{name:'Login',value:dp.config.user.username},{name:'Name',value:dp.config.user.name},{name:'Email',value:dp.config.user.email}]}
return[];},_getWindowProps:function(){var props=[];for(var propName in this.options.windowProps){if(!this.options.windowProps.hasOwnProperty(propName))continue;var propValue=this.options.windowProps[propName];props.push(propName+'='+(typeof propValue=='function'?propValue(this.options.windowProps):propValue));}
return props.join(',');}})})(jQuery);
;(function($,undefined){$.widget('ui.depositSeries',{options:{name:'',display:'',mode:'',alone:'',page:'all',markup:{element:'.series-holder'}},_init:function(){this.$this=this.element;this.$seriesElems=this.$this.find(this.options.markup.element);this._raiseParams();this.configKey='ds_'+this.options.display;this.sharedConfig=this._getSharedConfig();this._prepareDisplay();this._initItemsTracking();},_initItemsTracking:function(){var _this=this;var index;var offset=0;var scope='.series[data-display="default"],.series[data-display="slider"],.series[data-display="table"] a';var $document=$(document);var $items;var schema=['version_3_1_mainpage_event','landing_event'];var params={'indexMainSlider':schema[0]+',Slider,View image','indexAmazing':schema[0]+',Amazing Photos,Left;'+schema[1]+',Main,#','indexAmazing1':schema[0]+',Amazing Photos,Right-top;'+schema[1]+',Main,#','indexAmazing2':schema[0]+',Amazing Photos,Right-bottom;'+schema[1]+',Main,#','indexProfessional1':schema[0]+',Professional Vectors,Left;'+schema[1]+',Main,#','indexProfessional2':schema[0]+',Professional Vectors,Right;'+schema[1]+',Main,#','indexFresh1':schema[0]+',Fresh Editorial,Left;'+schema[1]+',Main,#','indexFresh2':schema[0]+',Fresh Editorial,Center;'+schema[1]+',Main,#','indexFresh3':schema[0]+',Fresh Editorial,Right;'+schema[1]+',Main,#','indexVideos1':schema[0]+',HD Videos,Left-top;'+schema[1]+',Main,#','indexVideos2':schema[0]+',HD Videos,Right-top;'+schema[1]+',Main,#','indexVideos3':schema[0]+',HD Videos,Left-bottom;'+schema[1]+',Main,#','indexVideos4':schema[0]+',HD Videos,Right-bottom;'+schema[1]+',Main,#','landingPhotosMain':schema[1]+',Photo,#','landingPhotos':schema[1]+',Photo,#','landingVectorsMain':schema[1]+',Vectors,#','landingVectors':schema[1]+',Vectors,#','landingEditorialMain':schema[1]+',Editorial,#','landingEditorial':schema[1]+',Editorial,#','landingVideosMain':schema[1]+',Video,#','landingVideos1':schema[1]+',Video,#','landingVideos2':schema[1]+',Video,#'};if(!params.hasOwnProperty(this.options.name)){return;}
switch(this.options.display){case'default':case'slider':$items=this.$this;break;case'table':$items=this.$this.find('a');break;}
if($document.find('.series[data-name="indexMainSlider"]').length){offset=1;}
$items.each(function(){$item=$(this);index=$item.index(scope)+1-offset;$item.attr('data-smart-event',params[_this.options.name].replace('#',index));});},_prepareDisplay:function(){switch(this.options.display){case'banner':this.initBanners();break;case'slider':this.initSlider();break;}},_getSharedConfig:function(){return $.parseJSON(dp.storage.get(this.configKey));},_updateConfig:function(value){var confEntry={};confEntry[this.options.page]={};confEntry[this.options.page][this.options.name]=value;this.sharedConfig=$.extend(true,this._getSharedConfig(),confEntry);dp.storage.set(this.configKey,JSON.stringify(this.sharedConfig),true);},_applyElementParams:function($element){var params={url:null,gashow:null,gaclick:null,guestpopup:null,authpopup:null};var regex=/^data-/;var attributes=$element[0].attributes;for(var i=0;i<attributes.length;){if(attributes[i].nodeName.search(regex)!=-1){params[attributes[i].nodeName.replace(regex,'')]=attributes[i].nodeValue;$element[0].removeAttribute(attributes[i].nodeName);}else i++;}
if(params.gashow&&this._needToShow()){dp.track.fire(params.gashow);}
var $bannerLink=$element.find('.d-series-element');if(!$bannerLink.length)return;if(params.url)$bannerLink.attr('href',params.url);if(params.gaclick){$bannerLink.off('click.depositSeriesGA').on('click.depositSeriesGA',function(e){e.stopPropagation();dp.track.fire(params.gaclick);});}
if(params.guestpopup||params.authpopup){var popup=(!dp.config.user.id)?params.guestpopup:params.authpopup;if(popup){$bannerLink.off('click.depositSeries').on('click.depositSeries',function(e){e.stopPropagation();e.preventDefault();dp.popup.show(popup);});}}},_needToShow:function(){var conf=this.sharedConfig;var o=this.options;return!(conf&&typeof conf==='object'&&conf[o.page]&&conf[o.page][o.name]&&!conf[o.page][o.name]['visible']);},initBanners:function(){var _this=this;if(_this.$seriesElems.length){_this.$seriesElems.each(function(){var $this=$(this);var $closeBtn=$this.find('.d_close');if(_this._needToShow())$this.show();if($this.find('.d_binded_resize').is(':visible'))$this.find('.d_binded_resize').depositTextAutoWidth();_this._applyElementParams($this);$closeBtn.show().off('.depositSeries').on('click.depositSeries',function(e){e.stopPropagation();_this._updateConfig({visible:false});dp.track.fire('t_close_banner_ViewItemProffer');$this.hide();});});}
dp.observer.fire('initSeriesDone',[_this.options.name]);},initSlider:function(){this.$this.depositGallery({effect:($.browser.msie||$.browser.mobile)?'fade':'blinds',effectMisc:{bars:this.options.name.toLocaleLowerCase().indexOf('fresh')>-1?5:7,barDelay:175},animationTimeouts:{slide:2000,show:500},autorun:false,selectors:{slide:this.options.markup.element,nav:{}},navigation:false,stops:{slider:true}});},_raiseParams:function(){var _this=this;var attributes=this.$this[0].attributes;var regex=/^data-/;var setParam=function(name,value){var names=name.split('-');if(value=="true")value=true;if(value=="false")value=false;if(names.length==2&&_this.options.hasOwnProperty(names[0])&&_this.options[names[0]].hasOwnProperty(names[1]))_this.options[names[0]][names[1]]=value;if(names.length==1&&_this.options.hasOwnProperty(names[0]))_this.options[names[0]]=value;};for(var i=0;i<attributes.length;i++){if(attributes[i].nodeName.search(regex)>=0){setParam(attributes[i].nodeName.replace(regex,''),attributes[i].nodeValue);}}}});})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositItem",{options:{quick:{disabledWidth:1200},inline:{disabledWidth:1200}},_init:function(){this.$this=this.element;this.id=this.$this.attr('data-id');this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.observer.remove(this.widgetName);dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{main:{$item:this.$this,$shoppingCart:$('.shopping-cart-menu'),$link:this.$this.find('.item-holder')},buttons:{$lightboxSwitch:this.$this.find('.item-action .lightbox-button'),$cartSwitch:this.$this.find('.item-action .shopping-cart-button')},indicators:{$lightbox:this.$this.find('.in-sections .in-lightbox-icon'),$cart:this.$this.find('.in-sections .in-cart-icon')}}},_handlers:function(){var _this=this;return{main:{item:{handler:function(e){switch(e.type){case'click':var $this=$(this);if(dp.config.action==='home'){dp.track.fire(dp.url().data.attr.file==='lightbox.html'?'user_menu_recent':'user_menu_new',[$this.parent().children('div').index($this)+1]);}
break;case'removeQuickUrlParams':_this._removeQuickUrlParams();break;}},events:['click','removeQuickUrlParams'],run:function(){_this._renew();this.draggable({appendTo:'body',containment:'body',zIndex:4001,scroll:false,opacity:0.5,helper:'clone',cursor:'move',cursorAt:{left:0,top:0},delay:150,distance:5,connectToSortable:'.lb-panel-container',fromSortable:function(e,ui){ui.helper.appendTo('body');},drag:function(e,ui){if(!$('.lb-panel-open').hasClass('hidden')&&ui.position.top>$(window).height()+$(document).scrollTop()-ui.helper.height()){dp.observer.fire('dragItemToLightboxPanel',['open']);$('.lb-panel-container').sortable('refresh');}}});}},link:{handler:function(e){if(e.ctrlKey||e.metaKey){return;}
if(typeof this.getAttribute('target')!=='undefined'&&this.getAttribute('target')==='_blank'){return;}
var quickAllowed=!!$('.search-result:visible').length||!!$('.quick-view-item:visible').length;var inlineAllowed=!!$('.search-result:visible').length||!!$('.inline-view-item:visible').length;if(quickAllowed&&dp.config.viewItemMode===1&&$(window).width()>_this.options.quick.disabledWidth){e.preventDefault();dp.observer.fire('showQuickViewItem',[this.getAttribute('href'),$(this).parent()]);return;}
if(inlineAllowed&&(dp.config.viewItemMode===2||dp.config.viewItemMode===3)){var $inlineViewItem=$('.inline-view-item');if($inlineViewItem.is(':visible')&&$inlineViewItem.attr('data-id')===_this.id&&!$(this).closest('.related-content').length){e.preventDefault();$inlineViewItem.trigger('hide');}else{if($(window).width()>_this.options.inline.disabledWidth){e.preventDefault();var href=this.getAttribute('href');dp.observer.fire('showInlineViewItem',[href,$(this).parent()]);}else{_this._removeQuickUrlParams();}}}},events:'click'}},buttons:{lightboxSwitch:{handler:function(e){e.stopPropagation();e.preventDefault();_this.trackItemActionClick($(e.target),'lightbox_add_icon_click');_this._handleLightboxSwitch();},events:['touchstart','click']},cartSwitch:{handler:function(e){e.stopPropagation();e.preventDefault();_this.trackItemActionClick($(e.target),'cart_add_icon_click');_this._handleCartSwitch();},events:['touchstart','click']}}}},getItemId:function(){return this.id;},_handleItemAction:function(action){if(typeof this.targets=='undefined')return false;switch(action){case'cartOn':this.targets.indicators.$cart.removeClass('hidden');this.targets.buttons.$cartSwitch.addClass('active').attr('title',tr('Remove from Shopping Cart'));break;case'cartOff':this.targets.indicators.$cart.addClass('hidden');this.targets.buttons.$cartSwitch.removeClass('active').attr('title',tr('Add to Shopping Cart'));break;case'lampOn':this.targets.indicators.$lightbox.removeClass('hidden');this.targets.buttons.$lightboxSwitch.addClass('active').attr('title',tr('Remove from Favorites'));break;case'lampOff':this.targets.indicators.$lightbox.addClass('hidden');this.targets.buttons.$lightboxSwitch.removeClass('active').attr('title',tr('Add to Favorites'));break;}},_handleLightboxSwitch:function(){var _this=this;var $target=_this.targets.buttons.$lightboxSwitch;if(!dp.config.user.id){dp.popup.callback('need_auth','show',function(popup){dp.popup.dispatch($(popup).find('[data-popup]'));},true);dp.storage.set('nonAuthFavFileAdding',_this.id,true,0);return dp.popup.show('need_auth');}
if(dp.lightbox&&!$target.data('busy')){$target.data('busy',true);if(!$target.hasClass('active')){dp.lightbox.addFile(_this.id,function(){$target.data('busy',false);},undefined,{sq:dp.url(_this.targets.main.$link.attr('href')).param('sq')});}else{dp.lightbox.deleteFiles(_this.id,null,function(){$target.data('busy',false);});}}},_handleCartSwitch:function(){var _this=this;var $target=_this.targets.buttons.$cartSwitch;var action=$target.hasClass('active')?'remove':'add';var cartData={data:{id:this.id,sq:dp.config.search.id||undefined},callback:function(data,action){_this._handleItemAction(action==='add'?'cartOn':'cartOff');dp.observer.fire('viewItemCartAction',[action,_this.id]);}};_this.targets.main.$shoppingCart.filter(':visible').eq(0).trigger(action+'Item',cartData);},_renew:function(){var _this=this;dp.observer.add(_this.widgetName+_this.id,'renewLamps, lbEmptyList',function(){var idsList=dp.lightbox?dp.lightbox.getFiles():[];_this._handleItemAction('lampOff');for(var i=0;i<idsList.length;i++){if(idsList[i]==_this.id){_this._handleItemAction('lampOn');break;}}},'content');dp.observer.add(_this.widgetName+_this.id,'cartAction',function(action,items){for(var id in items){if(items.hasOwnProperty(id)&&items[id]){if(_this.id==id){if(action=='add')_this._handleItemAction('cartOn');if(action=='remove')_this._handleItemAction('cartOff');break;}}}},'content');dp.observer.add(_this.widgetName+_this.id,'addFavoritesFile',function(id){if(id==_this.id)_this._handleItemAction('lampOn');},'content');dp.observer.add(_this.widgetName+_this.id,'deleteLightboxItem',function(id){if(id==_this.id)_this._handleItemAction('lampOff');},'content');dp.observer.add(_this.widgetName+_this.id,'cartIndicator',function(action,id){if(_this.id===id){if(action==='add')_this._handleItemAction('cartOn');if(action==='remove')_this._handleItemAction('cartOff');}},'content');},trackItemActionClick:function($button,eventCode){if(!$button.data('wasTrackingClicked')){$button.data('wasTrackingClicked',true);dp.track.fire(eventCode,[dp.config.user.id?'User logged':'User not logged']);}},_removeQuickUrlParams:function(){var url=dp.url();url.param('qview',null);if(history&&history.replaceState){history.replaceState({from:'ajaxLoader'},document.title,url.attr('source'));}}})})(jQuery);
;(function($,undefined){$.widget('depositphotos.depositLiftUpButton',{options:{showBelow:150,toTopButtonSpeed:200},_init:function(){this.$this=this.element;this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.observer.remove(this.widgetName);dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{widget:{$element:this.$this},system:{$window:$(window),$body:$('html, body')}};},_handlers:function(){var _this=this;return{widget:{element:{handler:function(){_this._goToTop();},trigger:'scroll'}},system:{window:{handler:function(){if(_this.targets.system.$body.is(':animated'))return false;if(_this.targets.system.$window.scrollTop()<_this.options.showBelow){_this._hideButton();}else{_this._showButton();}},events:'scroll'}}}},_goToTop:function(){this.targets.system.$body.stop().animate({'scrollTop':0},this.options.toTopButtonSpeed);this._hideButton();},_hideButton:function(){if(this.targets.widget.$element.is(':visible')){this.targets.widget.$element.stop(true,true).hide();}},_showButton:function(){if(!this.targets.widget.$element.is(':visible')){this.targets.widget.$element.stop(true,true).fadeIn('fast');}}})})(jQuery);
;(function($,undefined){$.widget("depositphotos.depositPasswordRecovery",{options:{url:undefined,requestUrl:undefined,step:1,checkTimeout:500,trigger:'resetPass'},_init:function(){this.$this=this.element;this.options.requestUrl='//'+window.location.host+this.options.url;this._counter=0;this._buffer={};this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this._triggerData=null;this._checkTimeouts={};this.initApi();this._bindPopup();this._searchTrigger();},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},initApi:function(){var _this=this;dp.recovery={pass:function(step,buffer){_this._buffer=buffer;_this.step=step||_this.options.step;_this.targets.scope.$popup.trigger('hide').trigger('show');}}},_gather:function(){return{scope:{$popup:dp.popup.get('password-recovery')},fields:{$inputs:this.$this.find('input[name]'),$passwords:this.$this.find('input[name^="password"]')},buttons:{$send:this.$this.find('.d-sendLink'),$save:this.$this.find('.d-savePass'),$update:this.$this.find('.d-updatePass'),$again:this.$this.find('.d-tryAgain')},triggers:{$showPass:this.$this.find('.d-show-pass-trigger'),$login:this.$this.find('.d_forLogin')}}},_handlers:function(){var _this=this;return{fields:{inputs:{handler:function(e){var input=this;var name=input.getAttribute('name');if(input.getAttribute('data-sync')==='true'&&e.type==='keyup'){$(input).parent().find('[name][data-sync]').not(input)[0].value=input.value;}
clearTimeout(_this._checkTimeouts[name]);if(e.type!=='force'){_this._checkTimeouts[name]=setTimeout(function(){_this._validate(input);},_this.options.checkTimeout);}else{_this._validate(input);}},events:['change','input','blur','keyup','paste','force'],run:'depositFieldIndicate'}},buttons:{send:{handler:function(){var $btn=$(this);var $form=_this._getForm(_this.$this);var $inputs=$form.find('.d-input[name]').trigger('reset');var emptyFields=0;$inputs.each(function(){var $el=$(this);if($el.val().length){$el.trigger('force');}else{emptyFields++;}});if($inputs.length<=emptyFields||$form.find('.d_incorrect').length)return;$btn.trigger('loading');_this._sendRequest($.extend({handler:'sendResetLink'},$form.serializeForm()),function(resp){$btn.trigger('loaded');if(resp.result){dp.recovery.pass(2);}else{dp.validator.showErrors($inputs,resp.errors);}},$btn);},events:['click'],run:'depositLoading'},save:{handler:function(){var $btn=$(this);var $form=_this._getForm(_this.$this);var $inputs=$form.find('.d-input[name]').trigger('reset').trigger('force');if($form.find('.d_incorrect').length)return;$btn.trigger('loading');_this._sendRequest($.extend({handler:'savePassword',userId:_this._triggerData.userId},$form.serializeForm()),function(resp){$btn.trigger('loaded');_this._triggerData=null;if(resp.result){dp.recovery.pass(4);}else{dp.validator.showErrors($inputs,resp.errors);}},$btn);},events:['click'],run:'depositLoading'},update:{handler:function(){var $btn=$(this);var $form=_this._getForm(_this.$this);var $inputs=$form.find('.d-input[name]').trigger('reset').trigger('force');if($form.find('.d_incorrect').length)return;$btn.trigger('loading');_this._sendRequest($.extend({handler:'updatePassword',userId:dp.config.user.id},$form.serializeForm(),_this._buffer),function(resp){$btn.trigger('loaded');if(resp.result){dp.recovery.pass(4);_this.targets.scope.$popup.find('.d-tthide').hide();}else{dp.validator.showErrors($inputs,resp.errors);}},$btn);},events:['click'],run:'depositLoading'},again:{handler:function(){dp.recovery[_this._triggerData['type']]();_this._triggerData=null;},events:['click']}},triggers:{showPass:{handler:function(){_this._toggleInputs(this.checked?'text':'password',true);},events:['click']},login:{handler:function(){_this.targets.scope.$popup.trigger('hide');dp.popup.show('login');},events:['click']}}}},_validate:function(field){var errors=[];var $fields=$(field);var cpass=(field.name==='password2')?this._getForm(this.$this).find('input[name="password"]').filter('[type='+field.type+']').val():null;if((['username','email'].indexOf(field.name)===-1||field.value)&&field.name!=='password0'){errors=dp.validator.validate(field.name,field.value,cpass);}
if(field.name==='password'&&this._getForm(this.$this).find('input[name="password2"]').val()){this._getForm(this.$this).find('input[name="password2"]').trigger('force');}
if(field.name.indexOf('pass')!=-1){$fields=this.targets.fields.$passwords.filter('[name="'+field.name+'"]');}
$fields.trigger('reset');if(errors.length){dp.validator.showErrors($fields,errors);}else if(field.value){$fields.trigger('correct');}},_searchTrigger:function(){this._triggerData=$.parseJSON(dp.storage.get(this.options.trigger));if(this._isValidTrigger(this._triggerData)){dp.recovery[this._triggerData['type']](this._triggerData['step']);dp.storage.remove(this.options.trigger);}},_bindPopup:function(){var _this=this;dp.popup.callback('password-recovery','show',function($pop){step=parseInt(_this.step)||1;_this.targets.fields.$inputs.trigger('reset').val('');$pop.find('[data-step]').hide().filter('[data-step="'+step+'"]').show();if(step==6){_this._toggleInputs('text');_this.targets.triggers.$showPass.prop('checked',true);}else{_this._toggleInputs('password');_this.targets.triggers.$showPass.prop('checked',false);}
dp.tools.focusOnStraightBrowsersInput(_this.targets.fields.$inputs.eq(0));},true);},_toggleInputs:function(type,withValidation){withValidation=!!withValidation;var $form=this._getForm(this.$this);var $visibleInputs=$form.find('.d-show-pass input').hide().filter('[name][type="'+type+'"]');var fakePlaceholderEq=type==='password'?0:1;if($form.find('.d_placeholder_active').length){$visibleInputs.each(function(){var $this=$(this);if(!$this.val().length){$this.parent().find('.d_placeholder_active').eq(fakePlaceholderEq).show();}else{$this.show();}});}else{$visibleInputs.show();}
if(withValidation===true)$visibleInputs.trigger('keyup');},_isValidTrigger:function(triggerData){if(!triggerData||typeof triggerData!=='object')return false;return!(!triggerData.hasOwnProperty('userId')||!triggerData.hasOwnProperty('type')||!triggerData.hasOwnProperty('step'));},_getForm:function($pop){return $pop.find('form:visible');},_sendRequest:function(data,callback,$btn){var _this=this;var uuid=getUUID();data=$.extend(data,{callback:'depositPasswordRecovery'+uuid});var ajaxOptions={url:this.options.requestUrl,jsonp:false,jsonpCallback:'depositPasswordRecovery'+uuid,data:data,xhrFields:{withCredentials:true},success:function(data){if(typeof callback==='function'){callback(data);}},error:function(jqXHR,textStatus,errorThrown){if(errorThrown==='timeout'&&_this._counter++<2){_this._sendRequest(data,callback,$btn);}else{var $form=_this._getForm(_this.$this);var $input=$form.find('input:visible').eq(0);var errors={};errors[$input.attr('name')]=[tr('Network error. Please try again')];dp.validator.showErrors($input,errors);if($btn){$btn.trigger('loaded');}}}};if(dp.config.isHttpsAllowed&&window.location.protocol.search('https')===-1){ajaxOptions.dataType='jsonp';ajaxOptions.data.dataType='jsonp';ajaxOptions.url='https:'+this.options.requestUrl;ajaxOptions.timeoutTime=6000;}else{ajaxOptions.url=this.options.requestUrl;};return dp.core.ajax(ajaxOptions);}})})(jQuery);
;(function($,undefined){$.widget("ui.depositGallery",{options:{animationTimeouts:{slide:4500,show:2000},effect:'fade',effectMisc:{bars:7,barDelay:50},autorun:true,callbacks:{onslide:function(widget,$slide,idx){var toggleSearchFollow=function($obj,mode){if(mode==1){$obj.stop(true,true).fadeIn(widget.options.animationTimeouts.show)}else{$obj.stop(true,true).fadeOut(widget.options.animationTimeouts.show)}};toggleSearchFollow(widget.$this.find('.d_gallery_search_wrapper'),$slide.hasClass('d_gallery_has_search')?1:0);toggleSearchFollow(widget.$this.find('.d_gallery_social'),$slide.hasClass('d_gallery_has_social')?1:0);}},selectors:{slide:'div.d_item',nav:{boxes:'.d_gallery_nav a',buttons:undefined,next:undefined,prev:undefined},effects:{bar:'.blind-bar'}},markup:{effects:{bar:'blind-bar'}},navigation:function($items){var templates={$holder:$('<div class="d_gallery_nav d_select_none" />'),$item:$('<a class="d_slide d_select_none">')};$items.each(function(idx){var $item=templates.$item.clone();$item.attr('data-idx',idx);if($(this).is(':visible'))$item.addClass('d_active');$item.appendTo(templates.$holder);});return templates.$holder;},stops:{buttons:false,slider:true,external:'.d_gallery_can_stop'}},_init:function(){this.$this=this.element;this._prepareNavigation();this._gather();this._prepareSlider();this._prepareVariables();this._setNextTimeout();this._startAutorun();this._bindEvents();if(this.options.callbacks&&this.options.callbacks.init)this.options.callbacks.init(this.$this,this.currentSlide);},_prepareSlider:function(){if(this.options.effect==='blinds'){var $slideHolder=this.$this.parent();var $holder,$img;this._targets.$slides.each(function(){$holder=$(this).find('img').parent();$img=$holder.find('img');$holder.css({background:'url('+$img.attr('src')+')',width:$slideHolder.width()+'px',height:$slideHolder.height()+'px'});$img.remove();});}},_prepareNavigation:function(){if(typeof this.options.navigation=='function'){this.$this.append(this.options.navigation(this.$this.find(this.options.selectors.slide)));}},_gather:function(){this._targets={$boxes:this.$this.find(this.options.selectors.nav.boxes),$buttons:this.$this.find(this.options.selectors.nav.buttons),$next:this.$this.find(this.options.selectors.nav.next),$prev:this.$this.find(this.options.selectors.nav.prev),$slides:this.$this.find(this.options.selectors.slide),$bar:$('<i class="'+this.options.markup.effects.bar+'"></i>')};},_prepareVariables:function(){this.currentSlide=this._targets.$slides.filter(':visible:eq(0)').index();this.slidesCount=this._targets.$slides.length;this.currentTimeout=this.options.animationTimeouts.slide;this.maxDelay=Math.max(this.options.effectMisc.barDelay*this.options.effectMisc.bars,this.options.animationTimeouts.slide);},_setNextTimeout:function(idx){var $cSlide=idx?this._targets.$slides.eq(idx):this._getCurrentSlide();if(parseInt($cSlide.attr('data-timeout'))>0)this.currentTimeout=parseInt($cSlide.attr('data-timeout'));else this.currentTimeout=this.options.animationTimeouts.slide;},_startAutorun:function(){var _this=this;if(_this.options.autorun!==true)return;_this.timeoutId=setTimeout(function(){_this._autorunHelper();},_this.currentTimeout);},_autorunHelper:function(){var _this=this;if(_this.stopTimeout===true)return;this._slide(_this._getNextSlideIdx(),function(){_this._startAutorun();});this._setNextTimeout();},_bindEvents:function(){var _this=this;_this._targets.$boxes.unbind('click.depositGallery').bind('click.depositGallery',function(){_this._slide(dp.tools.number(this.getAttribute('data-idx'))||$(this).index())});_this._targets.$next.unbind('click.depositGallery').bind('click.depositGallery',function(){_this._slide(_this._getNextSlideIdx())});_this._targets.$prev.unbind('click.depositGallery').bind('click.depositGallery',function(){_this._slide(_this._getPrevSlideIdx())});_this.$this.unbind('.depositGallery').bind({'stop.depositGallery':function(){_this.stopTimeout=true;clearTimeout(_this.timeoutId);},'start.depositGallery':function(){_this.stopTimeout=false;clearTimeout(_this.timeoutId);_this._startAutorun();},'slide.depositGallery':function(e,idx){$(this).trigger('stop');_this._setNextTimeout(idx);_this._slide(idx,function(){_this.$this.trigger('start')})}});var $stops=false;var addStops=function($stops,$object){if(!$stops)return $object;else return $stops.add($object)};if(_this.options.stops.buttons)$stops=addStops($stops,_this._targets.$buttons);if(_this.options.stops.slider)$stops=addStops($stops,_this.$this);if(_this.options.stops.external){var $stop=$(_this.options.stops.external);if($stop.length>0)$stops=addStops($stops,$stop);}
if($stops.length>0){$stops.unbind('.depositGalleryMouse').bind({'mouseenter.depositGalleryMouse':function(){_this.$this.trigger('stop')},'mouseleave.depositGalleryMouse':function(){_this.$this.trigger('start')}});}},_getNextSlideIdx:function(){var idx=this.currentSlide+1;if(idx>this.slidesCount-1)idx=0;return idx;},_getPrevSlideIdx:function(){var idx=this.currentSlide-1;if(idx<0)idx=this.slidesCount-1;return idx;},_getCurrentSlide:function(){return this._targets.$slides.eq(this.currentSlide);},_getDirection:function(a,b){return b>a?'next':'prev';},start:function(){this._slide(this._getNextSlideIdx());},_slide:function(idx,callback){var _this=this;var $slide=_this._targets.$slides.eq(idx);if($slide.is(':visible')&&_this.options.effect!=='linearFade')$slide.hide();_this._setActiveBox(idx);_this.currentSlide=idx;_this._targets.$boxes.removeClass("active");_this._targets.$boxes.eq(idx).addClass("active");var $slideToHide=_this._targets.$slides.filter(':visible');var callbacks=function(){if(typeof(callback)=='function')callback();};if(_this.options.callbacks&&_this.options.callbacks.onslide)_this.options.callbacks.onslide(_this,$slide,idx);switch(_this.options.effect){case'fade':$slideToHide.stop(true).fadeOut(_this.options.animationTimeouts.show);$slide.stop(true).fadeIn(_this.options.animationTimeouts.show,callbacks);break;case'linearFade':if($slideToHide.index()===$slide.index())break;$slideToHide.stop(true).fadeOut(_this.options.animationTimeouts.show,function(){$slide.stop(true).fadeIn(_this.options.animationTimeouts.show,callbacks);});break;case'blinds':var slideW=$slideToHide.width();var slideH=$slideToHide.height();var method=slideW>=slideH?'round':'ceil';var barWidth=Math[method](slideW/_this.options.effectMisc.bars);var offsetLeft;var backgroundImage=$slideToHide.find('.series-element').css('background-image');$slideToHide.css('z-index','1001').show().find('a').hide();$slide.css('z-index','1000').show().find('.series-element').show();for(var i=0;i<=_this.options.effectMisc.bars-1;i++){offsetLeft=barWidth*i;_this._targets.$bar.clone().css({'position':'absolute','display':'block','top':0,'left':offsetLeft+'px','width':barWidth+'px','height':slideH+'px','background':backgroundImage,'background-position':'-'+offsetLeft+'px 0'}).appendTo($slideToHide).css3({'transition-duration':_this.options.animationTimeouts.show+'ms','transition-timing-function':'linear','transition-property':'all','transition-delay':(_this.options.effectMisc.barDelay*i)+'ms'});}
setTimeout(function(){$slideToHide.find(_this.options.selectors.effects.bar).css3({'transform':'scalex(0)'});},50);setTimeout(function(){$slideToHide.hide().find('.blind-bar').remove();callbacks();},_this.maxDelay);break;default:var slideToHideWidth=$slideToHide.outerWidth();var dir=_this._getDirection($slideToHide.index(),idx);$slideToHide.stop(true).animate({left:(dir=='next')?-slideToHideWidth:slideToHideWidth},_this.options.animationTimeouts.show,function(){$(this).hide().css('left',0);});$slide.stop(true).css('left',dir=='next'?slideToHideWidth:-slideToHideWidth).show().animate({left:0},_this.options.animationTimeouts.show,callbacks);break;}},_setActiveBox:function(idx){var $box=this._targets.$boxes.eq(idx);if($box.hasClass('d_active'))return;this._targets.$boxes.removeClass('d_active');$box.addClass('d_active');}});})(jQuery);
;(function($,undefined){$.widget('depositphotos.depositFormData',{options:{excludeFields:[]},_init:function(){this.$this=this.element;this._addObserver();this.options.excludeFields=this.options.excludeFields.concat(['cvv','password']);this.targets=this._gather();},_destroy:function(){dp.observer.remove(this.widgetName);dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{$fields:this.$this.find(':input, textarea, select')};},_addObserver:function(){var _this=this;dp.observer.add(this.widgetName,'load',function(){_this._saveFormData();});dp.observer.add(this.widgetName,'pagePartReload',function(){_this._restoreFormData();});},_saveFormData:function(){var itemStates=this.targets.$fields.serializeForm();this.options.excludeFields.forEach(function(index){if(!itemStates.hasOwnProperty(index)){return;}
delete itemStates[index];});this._setFormState(itemStates);},_setFormState:function(state){var date=new Date();date.setTime(date.getTime()+(120*1000));dp.storage.set('form-data-cache-'+this.$this.attr('form-data-cache'),JSON.stringify(state),true,date);},_restoreFormData:function(){var formState=this._getFormState();this.targets.$fields.each(function(){if(!formState.hasOwnProperty(this.name)){return true;}
var value=formState[this.name];if(['checkbox','radio'].indexOf(this.type)!==-1){this.checked=(this.value===value);return true;}
this.value=value;});this._clearFormState();},_getFormState:function(){return JSON.parse(dp.storage.get('form-data-cache-'+this.$this.attr('form-data-cache')))||{};},_clearFormState:function(){dp.storage.remove('form-data-cache-'+this.$this.attr('form-data-cache'));}})})(jQuery);
;var mejs=mejs||{};mejs.version='2.16.4';mejs.meIndex=0;mejs.plugins={silverlight:[{version:[3,0],types:['video/mp4','video/m4v','video/mov','video/wmv','audio/wma','audio/m4a','audio/mp3','audio/wav','audio/mpeg']}],flash:[{version:[9,0,124],types:['video/mp4','video/m4v','video/mov','video/flv','video/rtmp','video/x-flv','audio/flv','audio/x-flv','audio/mp3','audio/m4a','audio/mpeg','video/youtube','video/x-youtube','application/x-mpegURL']}],youtube:[{version:null,types:['video/youtube','video/x-youtube','audio/youtube','audio/x-youtube']}],vimeo:[{version:null,types:['video/vimeo','video/x-vimeo']}]};mejs.Utility={encodeUrl:function(url){return encodeURIComponent(url);},escapeHTML:function(s){return s.toString().split('&').join('&amp;').split('<').join('&lt;').split('"').join('&quot;');},absolutizeUrl:function(url){var el=document.createElement('div');el.innerHTML='<a href="'+this.escapeHTML(url)+'">x</a>';return el.firstChild.href;},getScriptPath:function(scriptNames){var
i=0,j,codePath='',testname='',slashPos,filenamePos,scriptUrl,scriptPath,scriptFilename,scripts=document.getElementsByTagName('script'),il=scripts.length,jl=scriptNames.length;for(;i<il;i++){scriptUrl=scripts[i].src;slashPos=scriptUrl.lastIndexOf('/');if(slashPos>-1){scriptFilename=scriptUrl.substring(slashPos+1);scriptPath=scriptUrl.substring(0,slashPos+1);}else{scriptFilename=scriptUrl;scriptPath='';}
for(j=0;j<jl;j++){testname=scriptNames[j];filenamePos=scriptFilename.indexOf(testname);if(filenamePos>-1){codePath=scriptPath;break;}}
if(codePath!==''){break;}}
return codePath;},secondsToTimeCode:function(time,forceHours,showFrameCount,fps){if(typeof showFrameCount=='undefined'){showFrameCount=false;}else if(typeof fps=='undefined'){fps=25;}
var hours=Math.floor(time/3600)%24,minutes=Math.floor(time/60)%60,seconds=Math.floor(time%60),frames=Math.floor(((time%1)*fps).toFixed(3)),result=((forceHours||hours>0)?(hours<10?'0'+hours:hours)+':':'')
+(minutes<10?'0'+minutes:minutes)+':'
+(seconds<10?'0'+seconds:seconds)
+((showFrameCount)?':'+(frames<10?'0'+frames:frames):'');return result;},timeCodeToSeconds:function(hh_mm_ss_ff,forceHours,showFrameCount,fps){if(typeof showFrameCount=='undefined'){showFrameCount=false;}else if(typeof fps=='undefined'){fps=25;}
var tc_array=hh_mm_ss_ff.split(":"),tc_hh=parseInt(tc_array[0],10),tc_mm=parseInt(tc_array[1],10),tc_ss=parseInt(tc_array[2],10),tc_ff=0,tc_in_seconds=0;if(showFrameCount){tc_ff=parseInt(tc_array[3])/fps;}
tc_in_seconds=(tc_hh*3600)+(tc_mm*60)+tc_ss+tc_ff;return tc_in_seconds;},convertSMPTEtoSeconds:function(SMPTE){if(typeof SMPTE!='string')
return false;SMPTE=SMPTE.replace(',','.');var secs=0,decimalLen=(SMPTE.indexOf('.')!=-1)?SMPTE.split('.')[1].length:0,multiplier=1;SMPTE=SMPTE.split(':').reverse();for(var i=0;i<SMPTE.length;i++){multiplier=1;if(i>0){multiplier=Math.pow(60,i);}
secs+=Number(SMPTE[i])*multiplier;}
return Number(secs.toFixed(decimalLen));},removeSwf:function(id){var obj=document.getElementById(id);if(obj&&/object|embed/i.test(obj.nodeName)){if(mejs.MediaFeatures.isIE){obj.style.display="none";(function(){if(obj.readyState==4){mejs.Utility.removeObjectInIE(id);}else{setTimeout(arguments.callee,10);}})();}else{obj.parentNode.removeChild(obj);}}},removeObjectInIE:function(id){var obj=document.getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null;}}
obj.parentNode.removeChild(obj);}}};mejs.PluginDetector={hasPluginVersion:function(plugin,v){var pv=this.plugins[plugin];v[1]=v[1]||0;v[2]=v[2]||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false;},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(p,pluginName,mimeType,activeX,axDetect){this.plugins[p]=this.detectPlugin(pluginName,mimeType,activeX,axDetect);},detectPlugin:function(pluginName,mimeType,activeX,axDetect){var version=[0,0,0],description,i,ax;if(typeof(this.nav.plugins)!='undefined'&&typeof this.nav.plugins[pluginName]=='object'){description=this.nav.plugins[pluginName].description;if(description&&!(typeof this.nav.mimeTypes!='undefined'&&this.nav.mimeTypes[mimeType]&&!this.nav.mimeTypes[mimeType].enabledPlugin)){version=description.replace(pluginName,'').replace(/^\s+/,'').replace(/\sr/gi,'.').split('.');for(i=0;i<version.length;i++){version[i]=parseInt(version[i].match(/\d+/),10);}}}else if(typeof(window.ActiveXObject)!='undefined'){try{ax=new ActiveXObject(activeX);if(ax){version=axDetect(ax);}}
catch(e){}}
return version;}};mejs.PluginDetector.addPlugin('flash','Shockwave Flash','application/x-shockwave-flash','ShockwaveFlash.ShockwaveFlash',function(ax){var version=[],d=ax.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");version=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)];}
return version;});mejs.PluginDetector.addPlugin('silverlight','Silverlight Plug-In','application/x-silverlight-2','AgControl.AgControl',function(ax){var v=[0,0,0,0],loopMatch=function(ax,v,i,n){while(ax.isVersionSupported(v[0]+"."+v[1]+"."+v[2]+"."+v[3])){v[i]+=n;}
v[i]-=n;};loopMatch(ax,v,0,1);loopMatch(ax,v,1,1);loopMatch(ax,v,2,10000);loopMatch(ax,v,2,1000);loopMatch(ax,v,2,100);loopMatch(ax,v,2,10);loopMatch(ax,v,2,1);loopMatch(ax,v,3,1);return v;});mejs.MediaFeatures={init:function(){var
t=this,d=document,nav=mejs.PluginDetector.nav,ua=mejs.PluginDetector.ua.toLowerCase(),i,v,html5Elements=['source','track','audio','video'];t.isiPad=(ua.match(/ipad/i)!==null);t.isiPhone=(ua.match(/iphone/i)!==null);t.isiOS=t.isiPhone||t.isiPad;t.isAndroid=(ua.match(/android/i)!==null);t.isBustedAndroid=(ua.match(/android 2\.[12]/)!==null);t.isBustedNativeHTTPS=(location.protocol==='https:'&&(ua.match(/android [12]\./)!==null||ua.match(/macintosh.* version.* safari/)!==null));t.isIE=(nav.appName.toLowerCase().indexOf("microsoft")!=-1||nav.appName.toLowerCase().match(/trident/gi)!==null);t.isChrome=(ua.match(/chrome/gi)!==null);t.isChromium=(ua.match(/chromium/gi)!==null);t.isFirefox=(ua.match(/firefox/gi)!==null);t.isWebkit=(ua.match(/webkit/gi)!==null);t.isGecko=(ua.match(/gecko/gi)!==null)&&!t.isWebkit&&!t.isIE;t.isOpera=(ua.match(/opera/gi)!==null);t.hasTouch=('ontouchstart'in window);t.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;for(i=0;i<html5Elements.length;i++){v=document.createElement(html5Elements[i]);}
t.supportsMediaTag=(typeof v.canPlayType!=='undefined'||t.isBustedAndroid);try{v.canPlayType("video/mp4");}catch(e){t.supportsMediaTag=false;}
t.hasSemiNativeFullScreen=(typeof v.webkitEnterFullscreen!=='undefined');t.hasNativeFullscreen=(typeof v.requestFullscreen!=='undefined');t.hasWebkitNativeFullScreen=(typeof v.webkitRequestFullScreen!=='undefined');t.hasMozNativeFullScreen=(typeof v.mozRequestFullScreen!=='undefined');t.hasMsNativeFullScreen=(typeof v.msRequestFullscreen!=='undefined');t.hasTrueNativeFullScreen=(t.hasWebkitNativeFullScreen||t.hasMozNativeFullScreen||t.hasMsNativeFullScreen);t.nativeFullScreenEnabled=t.hasTrueNativeFullScreen;if(t.hasMozNativeFullScreen){t.nativeFullScreenEnabled=document.mozFullScreenEnabled;}else if(t.hasMsNativeFullScreen){t.nativeFullScreenEnabled=document.msFullscreenEnabled;}
if(t.isChrome){t.hasSemiNativeFullScreen=false;}
if(t.hasTrueNativeFullScreen){t.fullScreenEventName='';if(t.hasWebkitNativeFullScreen){t.fullScreenEventName='webkitfullscreenchange';}else if(t.hasMozNativeFullScreen){t.fullScreenEventName='mozfullscreenchange';}else if(t.hasMsNativeFullScreen){t.fullScreenEventName='MSFullscreenChange';}
t.isFullScreen=function(){if(t.hasMozNativeFullScreen){return d.mozFullScreen;}else if(t.hasWebkitNativeFullScreen){return d.webkitIsFullScreen;}else if(t.hasMsNativeFullScreen){return d.msFullscreenElement!==null;}}
t.requestFullScreen=function(el){if(t.hasWebkitNativeFullScreen){el.webkitRequestFullScreen();}else if(t.hasMozNativeFullScreen){el.mozRequestFullScreen();}else if(t.hasMsNativeFullScreen){el.msRequestFullscreen();}}
t.cancelFullScreen=function(){if(t.hasWebkitNativeFullScreen){document.webkitCancelFullScreen();}else if(t.hasMozNativeFullScreen){document.mozCancelFullScreen();}else if(t.hasMsNativeFullScreen){document.msExitFullscreen();}}}
if(t.hasSemiNativeFullScreen&&ua.match(/mac os x 10_5/i)){t.hasNativeFullScreen=false;t.hasSemiNativeFullScreen=false;}}};mejs.MediaFeatures.init();mejs.HtmlMediaElement={pluginType:'native',isFullScreen:false,setCurrentTime:function(time){this.currentTime=time;},setMuted:function(muted){this.muted=muted;},setVolume:function(volume){this.volume=volume;},stop:function(){this.pause();},setSrc:function(url){var
existingSources=this.getElementsByTagName('source');while(existingSources.length>0){this.removeChild(existingSources[0]);}
if(typeof url=='string'){this.src=url;}else{var i,media;for(i=0;i<url.length;i++){media=url[i];if(this.canPlayType(media.type)){this.src=media.src;break;}}}},setVideoSize:function(width,height){this.width=width;this.height=height;}};mejs.PluginMediaElement=function(pluginid,pluginType,mediaUrl){this.id=pluginid;this.pluginType=pluginType;this.src=mediaUrl;this.events={};this.attributes={};};mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:'',isFullScreen:false,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,error:null,tagName:'',muted:false,volume:1,currentTime:0,play:function(){if(this.pluginApi!=null){if(this.pluginType=='youtube'||this.pluginType=='vimeo'){this.pluginApi.playVideo();}else{this.pluginApi.playMedia();}
this.paused=false;}},load:function(){if(this.pluginApi!=null){if(this.pluginType=='youtube'||this.pluginType=='vimeo'){}else{this.pluginApi.loadMedia();}
this.paused=false;}},pause:function(){if(this.pluginApi!=null){if(this.pluginType=='youtube'||this.pluginType=='vimeo'){this.pluginApi.pauseVideo();}else{this.pluginApi.pauseMedia();}
this.paused=true;}},stop:function(){if(this.pluginApi!=null){if(this.pluginType=='youtube'||this.pluginType=='vimeo'){this.pluginApi.stopVideo();}else{this.pluginApi.stopMedia();}
this.paused=true;}},canPlayType:function(type){var i,j,pluginInfo,pluginVersions=mejs.plugins[this.pluginType];for(i=0;i<pluginVersions.length;i++){pluginInfo=pluginVersions[i];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,pluginInfo.version)){for(j=0;j<pluginInfo.types.length;j++){if(type==pluginInfo.types[j]){return'probably';}}}}
return'';},positionFullscreenButton:function(x,y,visibleAndAbove){if(this.pluginApi!=null&&this.pluginApi.positionFullscreenButton){this.pluginApi.positionFullscreenButton(Math.floor(x),Math.floor(y),visibleAndAbove);}},hideFullscreenButton:function(){if(this.pluginApi!=null&&this.pluginApi.hideFullscreenButton){this.pluginApi.hideFullscreenButton();}},setSrc:function(url){if(typeof url=='string'){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url));this.src=mejs.Utility.absolutizeUrl(url);}else{var i,media;for(i=0;i<url.length;i++){media=url[i];if(this.canPlayType(media.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src));this.src=mejs.Utility.absolutizeUrl(url);break;}}}},setCurrentTime:function(time){if(this.pluginApi!=null){if(this.pluginType=='youtube'||this.pluginType=='vimeo'){this.pluginApi.seekTo(time);}else{this.pluginApi.setCurrentTime(time);}
this.currentTime=time;}},setVolume:function(volume){if(this.pluginApi!=null){if(this.pluginType=='youtube'){this.pluginApi.setVolume(volume*100);}else{this.pluginApi.setVolume(volume);}
this.volume=volume;}},setMuted:function(muted){if(this.pluginApi!=null){if(this.pluginType=='youtube'){if(muted){this.pluginApi.mute();}else{this.pluginApi.unMute();}
this.muted=muted;this.dispatchEvent('volumechange');}else{this.pluginApi.setMuted(muted);}
this.muted=muted;}},setVideoSize:function(width,height){if(this.pluginElement&&this.pluginElement.style){this.pluginElement.style.width=width+'px';this.pluginElement.style.height=height+'px';}
if(this.pluginApi!=null&&this.pluginApi.setVideoSize){this.pluginApi.setVideoSize(width,height);}},setFullscreen:function(fullscreen){if(this.pluginApi!=null&&this.pluginApi.setFullscreen){this.pluginApi.setFullscreen(fullscreen);}},enterFullScreen:function(){if(this.pluginApi!=null&&this.pluginApi.setFullscreen){this.setFullscreen(true);}},exitFullScreen:function(){if(this.pluginApi!=null&&this.pluginApi.setFullscreen){this.setFullscreen(false);}},addEventListener:function(eventName,callback,bubble){this.events[eventName]=this.events[eventName]||[];this.events[eventName].push(callback);},removeEventListener:function(eventName,callback){if(!eventName){this.events={};return true;}
var callbacks=this.events[eventName];if(!callbacks)return true;if(!callback){this.events[eventName]=[];return true;}
for(var i=0;i<callbacks.length;i++){if(callbacks[i]===callback){this.events[eventName].splice(i,1);return true;}}
return false;},dispatchEvent:function(eventName){var i,args,callbacks=this.events[eventName];if(callbacks){args=Array.prototype.slice.call(arguments,1);for(i=0;i<callbacks.length;i++){callbacks[i].apply(this,args);}}},hasAttribute:function(name){return(name in this.attributes);},removeAttribute:function(name){delete this.attributes[name];},getAttribute:function(name){if(this.hasAttribute(name)){return this.attributes[name];}
return'';},setAttribute:function(name,value){this.attributes[name]=value;},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id);mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id);}};mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(id,pluginMediaElement,htmlMediaElement){this.pluginMediaElements[id]=pluginMediaElement;this.htmlMediaElements[id]=htmlMediaElement;},unregisterPluginElement:function(id){delete this.pluginMediaElements[id];delete this.htmlMediaElements[id];},initPlugin:function(id){var pluginMediaElement=this.pluginMediaElements[id],htmlMediaElement=this.htmlMediaElements[id];if(pluginMediaElement){switch(pluginMediaElement.pluginType){case"flash":pluginMediaElement.pluginElement=pluginMediaElement.pluginApi=document.getElementById(id);break;case"silverlight":pluginMediaElement.pluginElement=document.getElementById(pluginMediaElement.id);pluginMediaElement.pluginApi=pluginMediaElement.pluginElement.Content.MediaElementJS;break;}
if(pluginMediaElement.pluginApi!=null&&pluginMediaElement.success){pluginMediaElement.success(pluginMediaElement,htmlMediaElement);}}},fireEvent:function(id,eventName,values){var
e,i,bufferedTime,pluginMediaElement=this.pluginMediaElements[id];if(!pluginMediaElement){return;}
e={type:eventName,target:pluginMediaElement};for(i in values){pluginMediaElement[i]=values[i];e[i]=values[i];}
bufferedTime=values.bufferedTime||0;e.target.buffered=e.buffered={start:function(index){return 0;},end:function(index){return bufferedTime;},length:1};pluginMediaElement.dispatchEvent(e.type,e);}};mejs.MediaElementDefaults={mode:'auto',plugins:['flash','silverlight','youtube','vimeo'],enablePluginDebug:false,httpsBasicAuthSite:false,type:'',pluginPath:mejs.Utility.getScriptPath(['mediaelement.js','mediaelement.min.js','mediaelement-and-player.js','mediaelement-and-player.min.js']),flashName:'../swf/flashmediaelement.swf',flashStreamer:'',enablePluginSmoothing:false,enablePseudoStreaming:false,pseudoStreamingStartQueryParam:'start',silverlightName:'silverlightmediaelement.xap',defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:0.8,success:function(){},error:function(){}};mejs.MediaElement=function(el,o){return mejs.HtmlMediaElementShim.create(el,o);};mejs.HtmlMediaElementShim={create:function(el,o){var
options=mejs.MediaElementDefaults,htmlMediaElement=(typeof(el)=='string')?document.getElementById(el):el,tagName=htmlMediaElement.tagName.toLowerCase(),isMediaTag=(tagName==='audio'||tagName==='video'),src=(isMediaTag)?htmlMediaElement.getAttribute('src'):htmlMediaElement.getAttribute('href'),poster=htmlMediaElement.getAttribute('poster'),autoplay=htmlMediaElement.getAttribute('autoplay'),preload=htmlMediaElement.getAttribute('preload'),controls=htmlMediaElement.getAttribute('controls'),playback,prop;for(prop in o){options[prop]=o[prop];}
src=(typeof src=='undefined'||src===null||src=='')?null:src;poster=(typeof poster=='undefined'||poster===null)?'':poster;preload=(typeof preload=='undefined'||preload===null||preload==='false')?'none':preload;autoplay=!(typeof autoplay=='undefined'||autoplay===null||autoplay==='false');controls=!(typeof controls=='undefined'||controls===null||controls==='false');playback=this.determinePlayback(htmlMediaElement,options,mejs.MediaFeatures.supportsMediaTag,isMediaTag,src);playback.url=(playback.url!==null)?mejs.Utility.absolutizeUrl(playback.url):'';if(playback.method=='native'){if(mejs.MediaFeatures.isBustedAndroid){htmlMediaElement.src=playback.url;htmlMediaElement.addEventListener('click',function(){htmlMediaElement.play();},false);}
return this.updateNative(playback,options,autoplay,preload);}else if(playback.method!==''){return this.createPlugin(playback,options,poster,autoplay,preload,controls);}else{this.createErrorMessage(playback,options,poster);return this;}},determinePlayback:function(htmlMediaElement,options,supportsMediaTag,isMediaTag,src){var
mediaFiles=[],i,j,k,l,n,type,result={method:'',url:'',htmlMediaElement:htmlMediaElement,isVideo:(htmlMediaElement.tagName.toLowerCase()!='audio')},pluginName,pluginVersions,pluginInfo,dummy,media;if(typeof options.type!='undefined'&&options.type!==''){if(typeof options.type=='string'){mediaFiles.push({type:options.type,url:src});}else{for(i=0;i<options.type.length;i++){mediaFiles.push({type:options.type[i],url:src});}}}else if(src!==null){type=this.formatType(src,htmlMediaElement.getAttribute('type'));mediaFiles.push({type:type,url:src});}else{for(i=0;i<htmlMediaElement.childNodes.length;i++){n=htmlMediaElement.childNodes[i];if(n.nodeType==1&&n.tagName.toLowerCase()=='source'){src=n.getAttribute('src');type=this.formatType(src,n.getAttribute('type'));media=n.getAttribute('media');if(!media||!window.matchMedia||(window.matchMedia&&window.matchMedia(media).matches)){mediaFiles.push({type:type,url:src});}}}}
if(!isMediaTag&&mediaFiles.length>0&&mediaFiles[0].url!==null&&this.getTypeFromFile(mediaFiles[0].url).indexOf('audio')>-1){result.isVideo=false;}
if(mejs.MediaFeatures.isBustedAndroid){htmlMediaElement.canPlayType=function(type){return(type.match(/video\/(mp4|m4v)/gi)!==null)?'maybe':'';};}
if(mejs.MediaFeatures.isChromium){htmlMediaElement.canPlayType=function(type){return(type.match(/video\/(webm|ogv|ogg)/gi)!==null)?'maybe':'';};}
if(supportsMediaTag&&(options.mode==='auto'||options.mode==='auto_plugin'||options.mode==='native')&&!(mejs.MediaFeatures.isBustedNativeHTTPS&&options.httpsBasicAuthSite===true)){if(!isMediaTag){dummy=document.createElement(result.isVideo?'video':'audio');htmlMediaElement.parentNode.insertBefore(dummy,htmlMediaElement);htmlMediaElement.style.display='none';result.htmlMediaElement=htmlMediaElement=dummy;}
for(i=0;i<mediaFiles.length;i++){if(mediaFiles[i].type=="video/m3u8"||htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/,'')!==''||htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,'mpeg')).replace(/no/,'')!==''||htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/m4a/,'mp4')).replace(/no/,'')!==''){result.method='native';result.url=mediaFiles[i].url;break;}}
if(result.method==='native'){if(result.url!==null){htmlMediaElement.src=result.url;}
if(options.mode!=='auto_plugin'){return result;}}}
if(options.mode==='auto'||options.mode==='auto_plugin'||options.mode==='shim'){for(i=0;i<mediaFiles.length;i++){type=mediaFiles[i].type;for(j=0;j<options.plugins.length;j++){pluginName=options.plugins[j];pluginVersions=mejs.plugins[pluginName];for(k=0;k<pluginVersions.length;k++){pluginInfo=pluginVersions[k];if(pluginInfo.version==null||mejs.PluginDetector.hasPluginVersion(pluginName,pluginInfo.version)){for(l=0;l<pluginInfo.types.length;l++){if(type==pluginInfo.types[l]){result.method=pluginName;result.url=mediaFiles[i].url;return result;}}}}}}}
if(options.mode==='auto_plugin'&&result.method==='native'){return result;}
if(result.method===''&&mediaFiles.length>0){result.url=mediaFiles[0].url;}
return result;},formatType:function(url,type){var ext;if(url&&!type){return this.getTypeFromFile(url);}else{if(type&&~type.indexOf(';')){return type.substr(0,type.indexOf(';'));}else{return type;}}},getTypeFromFile:function(url){url=url.split('?')[0];var ext=url.substring(url.lastIndexOf('.')+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(ext)?'video':'audio')+'/'+this.getTypeFromExtension(ext);},getTypeFromExtension:function(ext){switch(ext){case'mp4':case'm4v':case'm4a':return'mp4';case'webm':case'webma':case'webmv':return'webm';case'ogg':case'oga':case'ogv':return'ogg';default:return ext;}},createErrorMessage:function(playback,options,poster){var
htmlMediaElement=playback.htmlMediaElement,errorContainer=document.createElement('div');errorContainer.className='me-cannotplay';try{errorContainer.style.width=htmlMediaElement.width+'px';errorContainer.style.height=htmlMediaElement.height+'px';}catch(e){}
if(options.customError){errorContainer.innerHTML=options.customError;}else{errorContainer.innerHTML=(poster!=='')?'<a href="'+playback.url+'"><img src="'+poster+'" width="100%" height="100%" /></a>':'<a href="'+playback.url+'"><span>'+mejs.i18n.t('Download File')+'</span></a>';}
htmlMediaElement.parentNode.insertBefore(errorContainer,htmlMediaElement);htmlMediaElement.style.display='none';options.error(htmlMediaElement);},createPlugin:function(playback,options,poster,autoplay,preload,controls){var
htmlMediaElement=playback.htmlMediaElement,width=1,height=1,pluginid='me_'+playback.method+'_'+(mejs.meIndex++),pluginMediaElement=new mejs.PluginMediaElement(pluginid,playback.method,playback.url),container=document.createElement('div'),specialIEContainer,node,initVars;pluginMediaElement.tagName=htmlMediaElement.tagName
for(var i=0;i<htmlMediaElement.attributes.length;i++){var attribute=htmlMediaElement.attributes[i];if(attribute.specified==true){pluginMediaElement.setAttribute(attribute.name,attribute.value);}}
node=htmlMediaElement.parentNode;while(node!==null&&node.tagName&&node.tagName.toLowerCase()!=='body'&&node.parentNode!=null){if(node.parentNode.tagName&&node.parentNode.tagName.toLowerCase()==='p'){node.parentNode.parentNode.insertBefore(node,node.parentNode);break;}
node=node.parentNode;}
if(playback.isVideo){width=(options.pluginWidth>0)?options.pluginWidth:(options.videoWidth>0)?options.videoWidth:(htmlMediaElement.getAttribute('width')!==null)?htmlMediaElement.getAttribute('width'):options.defaultVideoWidth;height=(options.pluginHeight>0)?options.pluginHeight:(options.videoHeight>0)?options.videoHeight:(htmlMediaElement.getAttribute('height')!==null)?htmlMediaElement.getAttribute('height'):options.defaultVideoHeight;width=mejs.Utility.encodeUrl(width);height=mejs.Utility.encodeUrl(height);}else{if(options.enablePluginDebug){width=320;height=240;}}
pluginMediaElement.success=options.success;mejs.MediaPluginBridge.registerPluginElement(pluginid,pluginMediaElement,htmlMediaElement);container.className='me-plugin';container.id=pluginid+'_container';if(playback.isVideo){htmlMediaElement.parentNode.insertBefore(container,htmlMediaElement);}else{document.body.insertBefore(container,document.body.childNodes[0]);}
initVars=['id='+pluginid,'jsinitfunction='+"mejs.MediaPluginBridge.initPlugin",'jscallbackfunction='+"mejs.MediaPluginBridge.fireEvent",'isvideo='+((playback.isVideo)?"true":"false"),'autoplay='+((autoplay)?"true":"false"),'preload='+preload,'width='+width,'startvolume='+options.startVolume,'timerrate='+options.timerRate,'flashstreamer='+options.flashStreamer,'height='+height,'pseudostreamstart='+options.pseudoStreamingStartQueryParam];if(playback.url!==null){if(playback.method=='flash'){initVars.push('file='+mejs.Utility.encodeUrl(playback.url));}else{initVars.push('file='+playback.url);}}
if(options.enablePluginDebug){initVars.push('debug=true');}
if(options.enablePluginSmoothing){initVars.push('smoothing=true');}
if(options.enablePseudoStreaming){initVars.push('pseudostreaming=true');}
if(controls){initVars.push('controls=true');}
if(options.pluginVars){initVars=initVars.concat(options.pluginVars);}
switch(playback.method){case'silverlight':container.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+pluginid+'" name="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim">'+'<param name="initParams" value="'+initVars.join(',')+'" />'+'<param name="windowless" value="true" />'+'<param name="background" value="black" />'+'<param name="minRuntimeVersion" value="3.0.0.0" />'+'<param name="autoUpgrade" value="true" />'+'<param name="source" value="'+options.pluginPath+options.silverlightName+'" />'+'</object>';break;case'flash':if(mejs.MediaFeatures.isIE){specialIEContainer=document.createElement('div');container.appendChild(specialIEContainer);specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" '+'id="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim">'+'<param name="movie" value="'+options.pluginPath+options.flashName+'?x='+(new Date())+'" />'+'<param name="flashvars" value="'+initVars.join('&amp;')+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#000000" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+'<param name="scale" value="default" />'+'</object>';}else{container.innerHTML='<embed id="'+pluginid+'" name="'+pluginid+'" '+'play="true" '+'loop="false" '+'quality="high" '+'bgcolor="#000000" '+'wmode="transparent" '+'allowScriptAccess="always" '+'allowFullScreen="true" '+'type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" '+'src="'+options.pluginPath+options.flashName+'" '+'flashvars="'+initVars.join('&')+'" '+'width="'+width+'" '+'height="'+height+'" '+'scale="default"'+'class="mejs-shim"></embed>';}
break;case'youtube':var videoId;if(playback.url.lastIndexOf("youtu.be")!=-1){videoId=playback.url.substr(playback.url.lastIndexOf('/')+1);if(videoId.indexOf('?')!=-1){videoId=videoId.substr(0,videoId.indexOf('?'));}}
else{videoId=playback.url.substr(playback.url.lastIndexOf('=')+1);}
youtubeSettings={container:container,containerId:container.id,pluginMediaElement:pluginMediaElement,pluginId:pluginid,videoId:videoId,height:height,width:width};if(mejs.PluginDetector.hasPluginVersion('flash',[10,0,0])){mejs.YouTubeApi.createFlash(youtubeSettings);}else{mejs.YouTubeApi.enqueueIframe(youtubeSettings);}
break;case'vimeo':var player_id=pluginid+"_player";pluginMediaElement.vimeoid=playback.url.substr(playback.url.lastIndexOf('/')+1);container.innerHTML='<iframe src="//player.vimeo.com/video/'+pluginMediaElement.vimeoid+'?api=1&portrait=0&byline=0&title=0&player_id='+player_id+'" width="'+width+'" height="'+height+'" frameborder="0" class="mejs-shim" id="'+player_id+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';if(typeof($f)=='function'){var player=$f(container.childNodes[0]);player.addEvent('ready',function(){player.playVideo=function(){player.api('play');}
player.stopVideo=function(){player.api('unload');}
player.pauseVideo=function(){player.api('pause');}
player.seekTo=function(seconds){player.api('seekTo',seconds);}
player.setVolume=function(volume){player.api('setVolume',volume);}
player.setMuted=function(muted){if(muted){player.lastVolume=player.api('getVolume');player.api('setVolume',0);}else{player.api('setVolume',player.lastVolume);delete player.lastVolume;}}
function createEvent(player,pluginMediaElement,eventName,e){var obj={type:eventName,target:pluginMediaElement};if(eventName=='timeupdate'){pluginMediaElement.currentTime=obj.currentTime=e.seconds;pluginMediaElement.duration=obj.duration=e.duration;}
pluginMediaElement.dispatchEvent(obj.type,obj);}
player.addEvent('play',function(){createEvent(player,pluginMediaElement,'play');createEvent(player,pluginMediaElement,'playing');});player.addEvent('pause',function(){createEvent(player,pluginMediaElement,'pause');});player.addEvent('finish',function(){createEvent(player,pluginMediaElement,'ended');});player.addEvent('playProgress',function(e){createEvent(player,pluginMediaElement,'timeupdate',e);});pluginMediaElement.pluginElement=container;pluginMediaElement.pluginApi=player;mejs.MediaPluginBridge.initPlugin(pluginid);});}
else{console.warn("You need to include froogaloop for vimeo to work");}
break;}
htmlMediaElement.style.display='none';htmlMediaElement.removeAttribute('autoplay');return pluginMediaElement;},updateNative:function(playback,options,autoplay,preload){var htmlMediaElement=playback.htmlMediaElement,m;for(m in mejs.HtmlMediaElement){htmlMediaElement[m]=mejs.HtmlMediaElement[m];}
options.success(htmlMediaElement,htmlMediaElement);return htmlMediaElement;}};mejs.YouTubeApi={isIframeStarted:false,isIframeLoaded:false,loadIframeApi:function(){if(!this.isIframeStarted){var tag=document.createElement('script');tag.src="//www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);this.isIframeStarted=true;}},iframeQueue:[],enqueueIframe:function(yt){if(this.isLoaded){this.createIframe(yt);}else{this.loadIframeApi();this.iframeQueue.push(yt);}},createIframe:function(settings){var
pluginMediaElement=settings.pluginMediaElement,player=new YT.Player(settings.containerId,{height:settings.height,width:settings.width,videoId:settings.videoId,playerVars:{controls:0},events:{'onReady':function(){settings.pluginMediaElement.pluginApi=player;mejs.MediaPluginBridge.initPlugin(settings.pluginId);setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,'timeupdate');},250);},'onStateChange':function(e){mejs.YouTubeApi.handleStateChange(e.data,player,pluginMediaElement);}}});},createEvent:function(player,pluginMediaElement,eventName){var obj={type:eventName,target:pluginMediaElement};if(player&&player.getDuration){pluginMediaElement.currentTime=obj.currentTime=player.getCurrentTime();pluginMediaElement.duration=obj.duration=player.getDuration();obj.paused=pluginMediaElement.paused;obj.ended=pluginMediaElement.ended;obj.muted=player.isMuted();obj.volume=player.getVolume()/100;obj.bytesTotal=player.getVideoBytesTotal();obj.bufferedBytes=player.getVideoBytesLoaded();var bufferedTime=obj.bufferedBytes/obj.bytesTotal*obj.duration;obj.target.buffered=obj.buffered={start:function(index){return 0;},end:function(index){return bufferedTime;},length:1};}
pluginMediaElement.dispatchEvent(obj.type,obj);},iFrameReady:function(){this.isLoaded=true;this.isIframeLoaded=true;while(this.iframeQueue.length>0){var settings=this.iframeQueue.pop();this.createIframe(settings);}},flashPlayers:{},createFlash:function(settings){this.flashPlayers[settings.pluginId]=settings;var specialIEContainer,youtubeUrl='//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid='+settings.pluginId+'&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0';if(mejs.MediaFeatures.isIE){specialIEContainer=document.createElement('div');settings.container.appendChild(specialIEContainer);specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" '+'id="'+settings.pluginId+'" width="'+settings.width+'" height="'+settings.height+'" class="mejs-shim">'+'<param name="movie" value="'+youtubeUrl+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+'</object>';}else{settings.container.innerHTML='<object type="application/x-shockwave-flash" id="'+settings.pluginId+'" data="'+youtubeUrl+'" '+'width="'+settings.width+'" height="'+settings.height+'" style="visibility: visible; " class="mejs-shim">'+'<param name="allowScriptAccess" value="always">'+'<param name="wmode" value="transparent">'+'</object>';}},flashReady:function(id){var
settings=this.flashPlayers[id],player=document.getElementById(id),pluginMediaElement=settings.pluginMediaElement;pluginMediaElement.pluginApi=pluginMediaElement.pluginElement=player;mejs.MediaPluginBridge.initPlugin(id);player.cueVideoById(settings.videoId);var callbackName=settings.containerId+'_callback';window[callbackName]=function(e){mejs.YouTubeApi.handleStateChange(e,player,pluginMediaElement);}
player.addEventListener('onStateChange',callbackName);setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,'timeupdate');},250);mejs.YouTubeApi.createEvent(player,pluginMediaElement,'canplay');},handleStateChange:function(youTubeState,player,pluginMediaElement){switch(youTubeState){case-1:pluginMediaElement.paused=true;pluginMediaElement.ended=true;mejs.YouTubeApi.createEvent(player,pluginMediaElement,'loadedmetadata');break;case 0:pluginMediaElement.paused=false;pluginMediaElement.ended=true;mejs.YouTubeApi.createEvent(player,pluginMediaElement,'ended');break;case 1:pluginMediaElement.paused=false;pluginMediaElement.ended=false;mejs.YouTubeApi.createEvent(player,pluginMediaElement,'play');mejs.YouTubeApi.createEvent(player,pluginMediaElement,'playing');break;case 2:pluginMediaElement.paused=true;pluginMediaElement.ended=false;mejs.YouTubeApi.createEvent(player,pluginMediaElement,'pause');break;case 3:mejs.YouTubeApi.createEvent(player,pluginMediaElement,'progress');break;case 5:break;}}}
function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady();}
function onYouTubePlayerReady(id){mejs.YouTubeApi.flashReady(id);}
window.mejs=mejs;window.MediaElement=mejs.MediaElement;;(function(context,exports,undefined){"use strict";var i18n={"locale":{"language":(exports.i18n&&exports.i18n.locale.language)||'',"strings":(exports.i18n&&exports.i18n.locale.strings)||{}},"ietf_lang_regex":/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,"methods":{}};i18n.getLanguage=function(){var language=i18n.locale.language||window.navigator.userLanguage||window.navigator.language;return i18n.ietf_lang_regex.exec(language)?language:null;};if(typeof mejsL10n!='undefined'){i18n.locale.language=mejsL10n.language;}
i18n.methods.checkPlain=function(str){var character,regex,replace={'&':'&amp;','"':'&quot;','<':'&lt;','>':'&gt;'};str=String(str);for(character in replace){if(replace.hasOwnProperty(character)){regex=new RegExp(character,'g');str=str.replace(regex,replace[character]);}}
return str;};i18n.methods.t=function(str,options){if(i18n.locale.strings&&i18n.locale.strings[options.context]&&i18n.locale.strings[options.context][str]){str=i18n.locale.strings[options.context][str];}
return i18n.methods.checkPlain(str);};i18n.t=function(str,options){if(typeof str==='string'&&str.length>0){var language=i18n.getLanguage();options=options||{"context":language};return i18n.methods.t(str,options);}
else{throw{"name":'InvalidArgumentException',"message":'First argument is either not a string or empty.'};}};exports.i18n=i18n;}(document,mejs));;(function(exports,undefined){"use strict";if(typeof mejsL10n!='undefined'){exports[mejsL10n.language]=mejsL10n.strings;}}(mejs.i18n.locale.strings));if(typeof jQuery!='undefined'){mejs.$=jQuery;}else if(typeof ender!='undefined'){mejs.$=ender;}
(function($){mejs.MepDefaults={poster:'',showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(media){return(media.duration*0.05);},defaultSeekForwardInterval:function(media){return(media.duration*0.05);},setDimensions:true,audioWidth:-1,audioHeight:-1,startVolume:0.8,loop:false,autoRewind:true,enableAutosize:true,alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,hideVideoControlsOnLoad:true,clickToPlayPause:true,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:['playpause','current','progress','duration','tracks','volume','fullscreen'],isVideo:true,enableKeyboard:true,pauseOtherPlayers:false,keyActions:[{keys:[32,179],action:function(player,media){if(media.paused||media.ended){player.play();}else{player.pause();}}},{keys:[38],action:function(player,media){player.container.find('.mejs-volume-slider').css('display','block');if(player.isVideo){player.showControls();player.startControlsTimer();}
var newVolume=Math.min(media.volume+0.1,1);media.setVolume(newVolume);}},{keys:[40],action:function(player,media){player.container.find('.mejs-volume-slider').css('display','block');if(player.isVideo){player.showControls();player.startControlsTimer();}
var newVolume=Math.max(media.volume-0.1,0);media.setVolume(newVolume);}},{keys:[37,227],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer();}
var newTime=Math.max(media.currentTime-player.options.defaultSeekBackwardInterval(media),0);media.setCurrentTime(newTime);}}},{keys:[39,228],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer();}
var newTime=Math.min(media.currentTime+player.options.defaultSeekForwardInterval(media),media.duration);media.setCurrentTime(newTime);}}},{keys:[70],action:function(player,media){if(typeof player.enterFullScreen!=='undefined'&&player.allowFullScreen){if(player.isFullScreen){player.exitFullScreen();}else{player.enterFullScreen();}}}},{keys:[77],action:function(player,media){player.container.find('.mejs-volume-slider').css('display','block');if(player.isVideo){player.showControls();player.startControlsTimer();}
if(player.media.muted){player.setMuted(false);}else{player.setMuted(true);}}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(node,o){if(!(this instanceof mejs.MediaElementPlayer)){return new mejs.MediaElementPlayer(node,o);}
var t=this;t.$media=t.$node=$(node);t.node=t.media=t.$media[0];if(typeof t.node.player!='undefined'){return t.node.player;}else{t.node.player=t;}
if(typeof o=='undefined'){o=t.$node.data('mejsoptions');}
t.options=$.extend({},mejs.MepDefaults,o);t.id='mep_'+mejs.mepIndex++;mejs.players[t.id]=t;t.init();return t;};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,allowFullScreen:true,init:function(){var
t=this,mf=mejs.MediaFeatures,meOptions=$.extend(true,{},t.options,{success:function(media,domNode){t.meReady(media,domNode);},error:function(e){t.handleError(e);}}),tagName=t.media.tagName.toLowerCase();t.isDynamic=(tagName!=='audio'&&tagName!=='video');if(t.isDynamic){t.isVideo=t.options.isVideo;}else{t.isVideo=(tagName!=='audio'&&t.options.isVideo);}
if((mf.isiPad&&t.options.iPadUseNativeControls)||(mf.isiPhone&&t.options.iPhoneUseNativeControls)){t.$media.attr('controls','controls');if(mf.isiPad&&t.media.getAttribute('autoplay')!==null){t.play();}}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){}else{t.$media.removeAttr('controls');var videoPlayerTitle=t.isVideo?mejs.i18n.t('Video Player'):mejs.i18n.t('Audio Player');$('<span class="mejs-offscreen">'+videoPlayerTitle+'</span>').insertBefore(t.$media);t.container=$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?'svg':'no-svg')+'" tabindex="0" role="application" aria-label="'+videoPlayerTitle+'">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+'</div>'+'</div>').addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){if(!t.controlsAreVisible){t.showControls(true);var playButton=t.container.find('.mejs-playpause-button > button');playButton.focus();}});t.container.addClass((mf.isAndroid?'mejs-android ':'')+
(mf.isiOS?'mejs-ios ':'')+
(mf.isiPad?'mejs-ipad ':'')+
(mf.isiPhone?'mejs-iphone ':'')+
(t.isVideo?'mejs-video ':'mejs-audio '));if(mf.isiOS){var $newMedia=t.$media.clone();t.container.find('.mejs-mediaelement').append($newMedia);t.$media.remove();t.$node=t.$media=$newMedia;t.node=t.media=$newMedia[0];}else{t.container.find('.mejs-mediaelement').append(t.$media);}
t.controls=t.container.find('.mejs-controls');t.layers=t.container.find('.mejs-layers');var tagType=(t.isVideo?'video':'audio'),capsTagName=tagType.substring(0,1).toUpperCase()+tagType.substring(1);if(t.options[tagType+'Width']>0||t.options[tagType+'Width'].toString().indexOf('%')>-1){t.width=t.options[tagType+'Width'];}else if(t.media.style.width!==''&&t.media.style.width!==null){t.width=t.media.style.width;}else if(t.media.getAttribute('width')!==null){t.width=t.$media.attr('width');}else{t.width=t.options['default'+capsTagName+'Width'];}
if(t.options[tagType+'Height']>0||t.options[tagType+'Height'].toString().indexOf('%')>-1){t.height=t.options[tagType+'Height'];}else if(t.media.style.height!==''&&t.media.style.height!==null){t.height=t.media.style.height;}else if(t.$media[0].getAttribute('height')!==null){t.height=t.$media.attr('height');}else{t.height=t.options['default'+capsTagName+'Height'];}
t.setPlayerSize(t.width,t.height);meOptions.pluginWidth=t.width;meOptions.pluginHeight=t.height;}
mejs.MediaElement(t.$media[0],meOptions);if(typeof(t.container)!='undefined'&&t.controlsAreVisible){t.container.trigger('controlsshown');}},showControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=='undefined'||doAnimation;if(t.controlsAreVisible)
return;if(doAnimation){t.controls.css('visibility','visible').stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true;t.container.trigger('controlsshown');});t.container.find('.mejs-control').css('visibility','visible').stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true;});}else{t.controls.css('visibility','visible').css('display','block');t.container.find('.mejs-control').css('visibility','visible').css('display','block');t.controlsAreVisible=true;t.container.trigger('controlsshown');}
t.setControlsSize();},hideControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=='undefined'||doAnimation;if(!t.controlsAreVisible||t.options.alwaysShowControls||t.keyboardAction)
return;if(doAnimation){t.controls.stop(true,true).fadeOut(200,function(){$(this).css('visibility','hidden').css('display','block');t.controlsAreVisible=false;t.container.trigger('controlshidden');});t.container.find('.mejs-control').stop(true,true).fadeOut(200,function(){$(this).css('visibility','hidden').css('display','block');});}else{t.controls.css('visibility','hidden').css('display','block');t.container.find('.mejs-control').css('visibility','hidden').css('display','block');t.controlsAreVisible=false;t.container.trigger('controlshidden');}},controlsTimer:null,startControlsTimer:function(timeout){var t=this;timeout=typeof timeout!='undefined'?timeout:1500;t.killControlsTimer('start');t.controlsTimer=setTimeout(function(){t.hideControls();t.killControlsTimer('hide');},timeout);},killControlsTimer:function(src){var t=this;if(t.controlsTimer!==null){clearTimeout(t.controlsTimer);delete t.controlsTimer;t.controlsTimer=null;}},controlsEnabled:true,disableControls:function(){var t=this;t.killControlsTimer();t.hideControls(false);this.controlsEnabled=false;},enableControls:function(){var t=this;t.showControls(false);t.controlsEnabled=true;},meReady:function(media,domNode){var t=this,mf=mejs.MediaFeatures,autoplayAttr=domNode.getAttribute('autoplay'),autoplay=!(typeof autoplayAttr=='undefined'||autoplayAttr===null||autoplayAttr==='false'),featureIndex,feature;if(t.created){return;}else{t.created=true;}
t.media=media;t.domNode=domNode;if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){t.buildposter(t,t.controls,t.layers,t.media);t.buildkeyboard(t,t.controls,t.layers,t.media);t.buildoverlays(t,t.controls,t.layers,t.media);t.findTracks();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t['build'+feature]){try{t['build'+feature](t,t.controls,t.layers,t.media);}catch(e){}}}
t.container.trigger('controlsready');t.setPlayerSize(t.width,t.height);t.setControlsSize();if(t.isVideo){if(mejs.MediaFeatures.hasTouch){t.$media.bind('touchstart',function(){if(t.controlsAreVisible){t.hideControls(false);}else{if(t.controlsEnabled){t.showControls(false);}}});}else{t.clickToPlayPauseCallback=function(){if(t.options.clickToPlayPause){if(t.media.paused){t.play();}else{t.pause();}}};t.media.addEventListener('click',t.clickToPlayPauseCallback,false);t.container.bind('mouseenter mouseover',function(){if(t.controlsEnabled){if(!t.options.alwaysShowControls){t.killControlsTimer('enter');t.showControls();t.startControlsTimer(2500);}}}).bind('mousemove',function(){if(t.controlsEnabled){if(!t.controlsAreVisible){t.showControls();}
if(!t.options.alwaysShowControls){t.startControlsTimer(2500);}}}).bind('mouseleave',function(){if(t.controlsEnabled){if(!t.media.paused&&!t.options.alwaysShowControls){t.startControlsTimer(1000);}}});}
if(t.options.hideVideoControlsOnLoad){t.hideControls(false);}
if(autoplay&&!t.options.alwaysShowControls){t.hideControls();}
if(t.options.enableAutosize){t.media.addEventListener('loadedmetadata',function(e){if(t.options.videoHeight<=0&&t.domNode.getAttribute('height')===null&&!isNaN(e.target.videoHeight)){t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);t.setControlsSize();t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight);}},false);}}
media.addEventListener('play',function(){var playerIndex;for(playerIndex in mejs.players){var p=mejs.players[playerIndex];if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){p.pause();}
p.hasFocus=false;}
t.hasFocus=true;},false);t.media.addEventListener('ended',function(e){if(t.options.autoRewind){try{t.media.setCurrentTime(0);window.setTimeout(function(){$(t.container).find('.mejs-overlay-loading').parent().hide();},20);}catch(exp){}}
t.media.pause();if(t.setProgressRail){t.setProgressRail();}
if(t.setCurrentRail){t.setCurrentRail();}
if(t.options.loop){t.play();}else if(!t.options.alwaysShowControls&&t.controlsEnabled){t.showControls();}},false);t.media.addEventListener('loadedmetadata',function(e){if(t.updateDuration){t.updateDuration();}
if(t.updateCurrent){t.updateCurrent();}
if(!t.isFullScreen){t.setPlayerSize(t.width,t.height);t.setControlsSize();}},false);t.container.focusout(function(e){if(e.relatedTarget){var $target=$(e.relatedTarget);if(t.keyboardAction&&$target.parents('.mejs-container').length===0){t.keyboardAction=false;t.hideControls(true);}}});setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize();},50);t.globalBind('resize',function(){if(!(t.isFullScreen||(mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen))){t.setPlayerSize(t.width,t.height);}
t.setControlsSize();});if(t.media.pluginType=='youtube'&&(mf.isiOS||mf.isAndroid)){t.container.find('.mejs-overlay-play').hide();}}
if(autoplay&&media.pluginType=='native'){t.play();}
if(t.options.success){if(typeof t.options.success=='string'){window[t.options.success](t.media,t.domNode,t);}else{t.options.success(t.media,t.domNode,t);}}},handleError:function(e){var t=this;t.controls.hide();if(t.options.error){t.options.error(e);}},setPlayerSize:function(width,height){var t=this;if(!t.options.setDimensions){return false;}
if(typeof width!='undefined'){t.width=width;}
if(typeof height!='undefined'){t.height=height;}
if(t.height.toString().indexOf('%')>0||t.$node.css('max-width')==='100%'||(t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==='100%')){var nativeWidth=(function(){if(t.isVideo){if(t.media.videoWidth&&t.media.videoWidth>0){return t.media.videoWidth;}else if(t.media.getAttribute('width')!==null){return t.media.getAttribute('width');}else{return t.options.defaultVideoWidth;}}else{return t.options.defaultAudioWidth;}})();var nativeHeight=(function(){if(t.isVideo){if(t.media.videoHeight&&t.media.videoHeight>0){return t.media.videoHeight;}else if(t.media.getAttribute('height')!==null){return t.media.getAttribute('height');}else{return t.options.defaultVideoHeight;}}else{return t.options.defaultAudioHeight;}})();var
parentWidth=t.container.parent().closest(':visible').width(),parentHeight=t.container.parent().closest(':visible').height(),newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;if(isNaN(newHeight)){newHeight=parentHeight;}
if(t.container.parent()[0].tagName.toLowerCase()==='body'){parentWidth=$(window).width();newHeight=$(window).height();}
if(newHeight&&parentWidth){t.container.width(parentWidth).height(newHeight);t.$media.add(t.container.find('.mejs-shim')).width('100%').height('100%');if(t.isVideo){if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,newHeight);}}
t.layers.children('.mejs-layer').width('100%').height('100%');}}else{t.container.width(t.width).height(t.height);t.layers.children('.mejs-layer').width(t.width).height(t.height);}
var playLayer=t.layers.find('.mejs-overlay-play'),playButton=playLayer.find('.mejs-overlay-button');playLayer.height(t.container.height()-t.controls.height());playButton.css('margin-top','-'+(playButton.height()/2-t.controls.height()/2).toString()+'px');},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find('.mejs-time-rail'),total=t.controls.find('.mejs-time-total'),current=t.controls.find('.mejs-time-current'),loaded=t.controls.find('.mejs-time-loaded'),others=rail.siblings(),lastControl=others.last(),lastControlPosition=null;if(!t.container.is(':visible')||!rail.length||!rail.is(':visible')){return;}
if(t.options&&!t.options.autosizeProgress){railWidth=parseInt(rail.css('width'),10);}
if(railWidth===0||!railWidth){others.each(function(){var $this=$(this);if($this.css('position')!='absolute'&&$this.is(':visible')){usedWidth+=$(this).outerWidth(true);}});railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width());}
do{rail.width(railWidth);total.width(railWidth-(total.outerWidth(true)-total.width()));if(lastControl.css('position')!='absolute'){lastControlPosition=lastControl.position();railWidth--;}}while(lastControlPosition!==null&&lastControlPosition.top>0&&railWidth>0);if(t.setProgressRail)
t.setProgressRail();if(t.setCurrentRail)
t.setCurrentRail();},buildposter:function(player,controls,layers,media){var t=this,poster=$('<div class="mejs-poster mejs-layer">'+'</div>').appendTo(layers),posterUrl=player.$media.attr('poster');if(player.options.poster!==''){posterUrl=player.options.poster;}
if(posterUrl){t.setPoster(posterUrl);}else{poster.hide();}
media.addEventListener('play',function(){poster.hide();},false);if(player.options.showPosterWhenEnded&&player.options.autoRewind){media.addEventListener('ended',function(){poster.show();},false);}},setPoster:function(url){var t=this,posterDiv=t.container.find('.mejs-poster'),posterImg=posterDiv.find('img');if(posterImg.length===0){posterImg=$('<img width="100%" height="100%" />').appendTo(posterDiv);}
posterImg.attr('src',url);posterDiv.css({'background-image':'url('+url+')'});},buildoverlays:function(player,controls,layers,media){var t=this;if(!player.isVideo)
return;var
loading=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-loading"><span></span></div>'+'</div>').hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-error"></div>'+'</div>').hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+'<div class="mejs-overlay-button"></div>'+'</div>').appendTo(layers).bind('click',function(){if(t.options.clickToPlayPause){if(media.paused){media.play();}}});media.addEventListener('play',function(){bigPlay.hide();loading.hide();controls.find('.mejs-time-buffering').hide();error.hide();},false);media.addEventListener('playing',function(){bigPlay.hide();loading.hide();controls.find('.mejs-time-buffering').hide();error.hide();},false);media.addEventListener('seeking',function(){loading.show();controls.find('.mejs-time-buffering').show();},false);media.addEventListener('seeked',function(){loading.hide();controls.find('.mejs-time-buffering').hide();},false);media.addEventListener('pause',function(){if(!mejs.MediaFeatures.isiPhone){bigPlay.show();}},false);media.addEventListener('waiting',function(){loading.show();controls.find('.mejs-time-buffering').show();},false);media.addEventListener('loadeddata',function(){loading.show();controls.find('.mejs-time-buffering').show();if(mejs.MediaFeatures.isAndroid){media.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var evt=document.createEvent('HTMLEvents');evt.initEvent('canplay',true,true);return media.dispatchEvent(evt);}},300);}},false);media.addEventListener('canplay',function(){loading.hide();controls.find('.mejs-time-buffering').hide();clearTimeout(media.canplayTimeout);},false);media.addEventListener('error',function(){loading.hide();controls.find('.mejs-time-buffering').hide();error.show();error.find('mejs-overlay-error').html("Error loading this resource");},false);media.addEventListener('keydown',function(e){t.onkeydown(player,media,e);},false);},buildkeyboard:function(player,controls,layers,media){var t=this;t.container.keydown(function(){t.keyboardAction=true;});t.globalBind('keydown',function(e){return t.onkeydown(player,media,e);});t.globalBind('click',function(event){player.hasFocus=$(event.target).closest('.mejs-container').length!==0;});},onkeydown:function(player,media,e){if(player.hasFocus&&player.options.enableKeyboard){for(var i=0,il=player.options.keyActions.length;i<il;i++){var keyAction=player.options.keyActions[i];for(var j=0,jl=keyAction.keys.length;j<jl;j++){if(e.keyCode==keyAction.keys[j]){if(typeof(e.preventDefault)=="function")e.preventDefault();keyAction.action(player,media,e.keyCode);return false;}}}}
return true;},findTracks:function(){var t=this,tracktags=t.$media.find('track');t.tracks=[];tracktags.each(function(index,track){track=$(track);t.tracks.push({srclang:(track.attr('srclang'))?track.attr('srclang').toLowerCase():'',src:track.attr('src'),kind:track.attr('kind'),label:track.attr('label')||'',entries:[],isLoaded:false});});},changeSkin:function(className){this.container[0].className='mejs-container '+className;this.setPlayerSize(this.width,this.height);this.setControlsSize();},play:function(){this.load();this.media.play();},pause:function(){try{this.media.pause();}catch(e){}},load:function(){if(!this.isLoaded){this.media.load();}
this.isLoaded=true;},setMuted:function(muted){this.media.setMuted(muted);},setCurrentTime:function(time){this.media.setCurrentTime(time);},getCurrentTime:function(){return this.media.currentTime;},setVolume:function(volume){this.media.setVolume(volume);},getVolume:function(){return this.media.volume;},setSrc:function(src){this.media.setSrc(src);},remove:function(){var t=this,featureIndex,feature;for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t['clean'+feature]){try{t['clean'+feature](t);}catch(e){}}}
if(!t.isDynamic){t.$media.prop('controls',true);t.$node.clone().insertBefore(t.container).show();t.$node.remove();}else{t.$node.insertBefore(t.container);}
if(t.media.pluginType!=='native'){t.media.remove();}
delete mejs.players[t.id];if(typeof t.container=='object'){t.container.remove();}
t.globalUnbind();delete t.node.player;},rebuildtracks:function(){var t=this;t.findTracks();t.buildtracks(t,t.controls,t.layers,t.media);}};(function(){var rwindow=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;function splitEvents(events,id){var ret={d:[],w:[]};$.each((events||'').split(' '),function(k,v){var eventname=v+'.'+id;if(eventname.indexOf('.')===0){ret.d.push(eventname);ret.w.push(eventname);}
else{ret[rwindow.test(v)?'w':'d'].push(eventname);}});ret.d=ret.d.join(' ');ret.w=ret.w.join(' ');return ret;}
mejs.MediaElementPlayer.prototype.globalBind=function(events,data,callback){var t=this;events=splitEvents(events,t.id);if(events.d)$(document).bind(events.d,data,callback);if(events.w)$(window).bind(events.w,data,callback);};mejs.MediaElementPlayer.prototype.globalUnbind=function(events,callback){var t=this;events=splitEvents(events,t.id);if(events.d)$(document).unbind(events.d,callback);if(events.w)$(window).unbind(events.w,callback);};})();if(typeof $!='undefined'){$.fn.mediaelementplayer=function(options){if(options===false){this.each(function(){var player=$(this).data('mediaelementplayer');if(player){player.remove();}
$(this).removeData('mediaelementplayer');});}
else{this.each(function(){$(this).data('mediaelementplayer',new mejs.MediaElementPlayer(this,options));});}
return this;};$(document).ready(function(){$('.mejs-player').mediaelementplayer();});}
window.MediaElementPlayer=mejs.MediaElementPlayer;})(mejs.$);(function($){$.extend(mejs.MepDefaults,{playText:mejs.i18n.t('Play'),pauseText:mejs.i18n.t('Pause')});$.extend(MediaElementPlayer.prototype,{buildplaypause:function(player,controls,layers,media){var
t=this,op=t.options,play=$('<div class="mejs-button mejs-playpause-button mejs-play" >'+'<button type="button" aria-controls="'+t.id+'" title="'+op.playText+'" aria-label="'+op.playText+'"></button>'+'</div>').appendTo(controls).click(function(e){e.preventDefault();if(media.paused){media.play();}else{media.pause();}
return false;}),play_btn=play.find('button');function togglePlayPause(which){if('play'===which){play.removeClass('mejs-play').addClass('mejs-pause');play_btn.attr({'title':op.pauseText,'aria-label':op.pauseText});}else{play.removeClass('mejs-pause').addClass('mejs-play');play_btn.attr({'title':op.playText,'aria-label':op.playText});}};togglePlayPause('pse');media.addEventListener('play',function(){togglePlayPause('play');},false);media.addEventListener('playing',function(){togglePlayPause('play');},false);media.addEventListener('pause',function(){togglePlayPause('pse');},false);media.addEventListener('paused',function(){togglePlayPause('pse');},false);}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{stopText:'Stop'});$.extend(MediaElementPlayer.prototype,{buildstop:function(player,controls,layers,media){var t=this,stop=$('<div class="mejs-button mejs-stop-button mejs-stop">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button>'+'</div>').appendTo(controls).click(function(){if(!media.paused){media.pause();}
if(media.currentTime>0){media.setCurrentTime(0);media.pause();controls.find('.mejs-time-current').width('0px');controls.find('.mejs-time-handle').css('left','0px');controls.find('.mejs-time-float-current').html(mejs.Utility.secondsToTimeCode(0));controls.find('.mejs-currenttime').html(mejs.Utility.secondsToTimeCode(0));layers.find('.mejs-poster').show();}});}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t('Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.')});$.extend(MediaElementPlayer.prototype,{buildprogress:function(player,controls,layers,media){$('<div class="mejs-time-rail">'+'<span  class="mejs-time-total mejs-time-slider">'+'<span class="mejs-time-buffering"></span>'+'<span class="mejs-time-loaded"></span>'+'<span class="mejs-time-current"></span>'+'<span class="mejs-time-handle"></span>'+'<span class="mejs-time-float">'+'<span class="mejs-time-float-current">00:00</span>'+'<span class="mejs-time-float-corner"></span>'+'</span>'+'</div>').appendTo(controls);controls.find('.mejs-time-buffering').hide();var
t=this,total=controls.find('.mejs-time-total'),loaded=controls.find('.mejs-time-loaded'),current=controls.find('.mejs-time-current'),handle=controls.find('.mejs-time-handle'),timefloat=controls.find('.mejs-time-float'),timefloatcurrent=controls.find('.mejs-time-float-current'),slider=controls.find('.mejs-time-slider'),handleMouseMove=function(e){var offset=total.offset(),width=total.outerWidth(true),percentage=0,newTime=0,pos=0,x;if(e.originalEvent.changedTouches){x=e.originalEvent.changedTouches[0].pageX;}else{x=e.pageX;}
if(media.duration){if(x<offset.left){x=offset.left;}else if(x>width+offset.left){x=width+offset.left;}
pos=x-offset.left;percentage=(pos/width);newTime=(percentage<=0.02)?0:percentage*media.duration;if(mouseIsDown&&newTime!==media.currentTime){media.setCurrentTime(newTime);}
if(!mejs.MediaFeatures.hasTouch){timefloat.css('left',pos);timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime));timefloat.show();}}},mouseIsDown=false,mouseIsOver=false,lastKeyPressTime=0,startedPaused=false,autoRewindInitial=player.options.autoRewind;var updateSlider=function(e){var seconds=media.currentTime,timeSliderText=mejs.i18n.t('Time Slider'),time=mejs.Utility.secondsToTimeCode(seconds),duration=media.duration;slider.attr({'aria-label':timeSliderText,'aria-valuemin':0,'aria-valuemax':duration,'aria-valuenow':seconds,'aria-valuetext':time,'role':'slider','tabindex':0});};var restartPlayer=function(){var now=new Date();if(now-lastKeyPressTime>=1000){media.play();}};slider.bind('focus',function(e){player.options.autoRewind=false;});slider.bind('blur',function(e){player.options.autoRewind=autoRewindInitial;});slider.bind('keydown',function(e){if((new Date()-lastKeyPressTime)>=1000){startedPaused=media.paused;}
var keyCode=e.keyCode,duration=media.duration,seekTime=media.currentTime;switch(keyCode){case 37:seekTime-=1;break;case 39:seekTime+=1;break;case 38:seekTime+=Math.floor(duration*0.1);break;case 40:seekTime-=Math.floor(duration*0.1);break;case 36:seekTime=0;break;case 35:seekTime=duration;break;case 10:media.paused?media.play():media.pause();return;case 13:media.paused?media.play():media.pause();return;default:return;}
seekTime=seekTime<0?0:(seekTime>=duration?duration:Math.floor(seekTime));lastKeyPressTime=new Date();if(!startedPaused){media.pause();}
if(seekTime<media.duration&&!startedPaused){setTimeout(restartPlayer,1100);}
media.setCurrentTime(seekTime);e.preventDefault();e.stopPropagation();return false;});total.bind('mousedown touchstart',function(e){if(e.which===1||e.which===0){mouseIsDown=true;handleMouseMove(e);t.globalBind('mousemove.dur touchmove.dur',function(e){handleMouseMove(e);});t.globalBind('mouseup.dur touchend.dur',function(e){mouseIsDown=false;timefloat.hide();t.globalUnbind('.dur');});}}).bind('mouseenter',function(e){mouseIsOver=true;t.globalBind('mousemove.dur',function(e){handleMouseMove(e);});if(!mejs.MediaFeatures.hasTouch){timefloat.show();}}).bind('mouseleave',function(e){mouseIsOver=false;if(!mouseIsDown){t.globalUnbind('.dur');timefloat.hide();}});media.addEventListener('progress',function(e){player.setProgressRail(e);player.setCurrentRail(e);},false);media.addEventListener('timeupdate',function(e){player.setProgressRail(e);player.setCurrentRail(e);updateSlider(e);},false);t.loaded=loaded;t.total=total;t.current=current;t.handle=handle;},setProgressRail:function(e){var
t=this,target=(e!==undefined)?e.target:t.media,percent=null;if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){percent=target.buffered.end(0)/target.duration;}
else if(target&&target.bytesTotal!==undefined&&target.bytesTotal>0&&target.bufferedBytes!==undefined){percent=target.bufferedBytes/target.bytesTotal;}
else if(e&&e.lengthComputable&&e.total!==0){percent=e.loaded/e.total;}
if(percent!==null){percent=Math.min(1,Math.max(0,percent));if(t.loaded&&t.total){t.loaded.width(t.total.width()*percent);}}},setCurrentRail:function(){var t=this;if(t.media.currentTime!==undefined&&t.media.duration){if(t.total&&t.handle){var
newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),handlePos=newWidth-Math.round(t.handle.outerWidth(true)/2);t.current.width(newWidth);t.handle.css('left',handlePos);}}}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:'<span> | </span>'});$.extend(MediaElementPlayer.prototype,{buildcurrent:function(player,controls,layers,media){var t=this;$('<div class="mejs-time" role="timer" aria-live="off">'+'<span class="mejs-currenttime">'+
(player.options.alwaysShowHours?'00:':'')+
(player.options.showTimecodeFrameCount?'00:00:00':'00:00')+'</span>'+'</div>').appendTo(controls);t.currenttime=t.controls.find('.mejs-currenttime');media.addEventListener('timeupdate',function(){player.updateCurrent();},false);},buildduration:function(player,controls,layers,media){var t=this;if(controls.children().last().find('.mejs-currenttime').length>0){$(t.options.timeAndDurationSeparator+'<span class="mejs-duration">'+
(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):((player.options.alwaysShowHours?'00:':'')+(player.options.showTimecodeFrameCount?'00:00:00':'00:00')))+'</span>').appendTo(controls.find('.mejs-time'));}else{controls.find('.mejs-currenttime').parent().addClass('mejs-currenttime-container');$('<div class="mejs-time mejs-duration-container">'+'<span class="mejs-duration">'+
(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):((player.options.alwaysShowHours?'00:':'')+(player.options.showTimecodeFrameCount?'00:00:00':'00:00')))+'</span>'+'</div>').appendTo(controls);}
t.durationD=t.controls.find('.mejs-duration');media.addEventListener('timeupdate',function(){player.updateDuration();},false);},updateCurrent:function(){var t=this;if(t.currenttime){t.currenttime.html(mejs.Utility.secondsToTimeCode(t.media.currentTime,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));}},updateDuration:function(){var t=this;t.container.toggleClass("mejs-long-video",t.media.duration>3600);if(t.durationD&&(t.options.duration>0||t.media.duration)){t.durationD.html(mejs.Utility.secondsToTimeCode(t.options.duration>0?t.options.duration:t.media.duration,t.options.alwaysShowHours,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));}}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{muteText:mejs.i18n.t('Mute Toggle'),allyVolumeControlText:mejs.i18n.t('Use Up/Down Arrow keys to increase or decrease volume.'),hideVolumeOnTouchDevices:true,audioVolume:'horizontal',videoVolume:'vertical'});$.extend(MediaElementPlayer.prototype,{buildvolume:function(player,controls,layers,media){if((mejs.MediaFeatures.isAndroid||mejs.MediaFeatures.isiOS)&&this.options.hideVolumeOnTouchDevices)
return;var t=this,mode=(t.isVideo)?t.options.videoVolume:t.options.audioVolume,mute=(mode=='horizontal')?$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+'</div>'+'<a href="javascript:void(0);" class="mejs-horizontal-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+'</span>'+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+'</a>').appendTo(controls):$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+'<a href="javascript:void(0);" class="mejs-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+'</span>'+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+'</a>'+'</div>').appendTo(controls),volumeSlider=t.container.find('.mejs-volume-slider, .mejs-horizontal-volume-slider'),volumeTotal=t.container.find('.mejs-volume-total, .mejs-horizontal-volume-total'),volumeCurrent=t.container.find('.mejs-volume-current, .mejs-horizontal-volume-current'),volumeHandle=t.container.find('.mejs-volume-handle, .mejs-horizontal-volume-handle'),positionVolumeHandle=function(volume,secondTry){if(!volumeSlider.is(':visible')&&typeof secondTry=='undefined'){volumeSlider.show();positionVolumeHandle(volume,true);volumeSlider.hide();return;}
volume=Math.max(0,volume);volume=Math.min(volume,1);if(volume===0){mute.removeClass('mejs-mute').addClass('mejs-unmute');}else{mute.removeClass('mejs-unmute').addClass('mejs-mute');}
var totalPosition=volumeTotal.position();if(mode=='vertical'){var
totalHeight=volumeTotal.height(),newTop=totalHeight-(totalHeight*volume);volumeHandle.css('top',Math.round(totalPosition.top+newTop-(volumeHandle.height()/2)));volumeCurrent.height(totalHeight-newTop);volumeCurrent.css('top',totalPosition.top+newTop);}else{var
totalWidth=volumeTotal.width(),newLeft=totalWidth*volume;volumeHandle.css('left',Math.round(totalPosition.left+newLeft-(volumeHandle.width()/2)));volumeCurrent.width(Math.round(newLeft));}},handleVolumeMove=function(e){var volume=null,totalOffset=volumeTotal.offset();if(mode==='vertical'){var
railHeight=volumeTotal.height(),totalTop=parseInt(volumeTotal.css('top').replace(/px/,''),10),newY=e.pageY-totalOffset.top;volume=(railHeight-newY)/railHeight;if(totalOffset.top===0||totalOffset.left===0){return;}}else{var
railWidth=volumeTotal.width(),newX=e.pageX-totalOffset.left;volume=newX/railWidth;}
volume=Math.max(0,volume);volume=Math.min(volume,1);positionVolumeHandle(volume);if(volume===0){media.setMuted(true);}else{media.setMuted(false);}
media.setVolume(volume);},mouseIsDown=false,mouseIsOver=false;mute.hover(function(){volumeSlider.show();mouseIsOver=true;},function(){mouseIsOver=false;if(!mouseIsDown&&mode=='vertical'){volumeSlider.hide();}});var updateVolumeSlider=function(e){var volume=Math.floor(media.volume*100);volumeSlider.attr({'aria-label':mejs.i18n.t('volumeSlider'),'aria-valuemin':0,'aria-valuemax':100,'aria-valuenow':volume,'aria-valuetext':volume+'%','role':'slider','tabindex':0});};volumeSlider.bind('mouseover',function(){mouseIsOver=true;}).bind('mousedown',function(e){handleVolumeMove(e);t.globalBind('mousemove.vol',function(e){handleVolumeMove(e);});t.globalBind('mouseup.vol',function(){mouseIsDown=false;t.globalUnbind('.vol');if(!mouseIsOver&&mode=='vertical'){volumeSlider.hide();}});mouseIsDown=true;return false;}).bind('keydown',function(e){var keyCode=e.keyCode;var volume=media.volume;switch(keyCode){case 38:volume+=0.1;break;case 40:volume=volume-0.1;break;default:return true;}
mouseIsDown=false;positionVolumeHandle(volume);media.setVolume(volume);return false;}).bind('blur',function(){volumeSlider.hide();});mute.find('button').click(function(){media.setMuted(!media.muted);});mute.find('button').bind('focus',function(){volumeSlider.show();});media.addEventListener('volumechange',function(e){if(!mouseIsDown){if(media.muted){positionVolumeHandle(0);mute.removeClass('mejs-mute').addClass('mejs-unmute');}else{positionVolumeHandle(media.volume);mute.removeClass('mejs-unmute').addClass('mejs-mute');}}
updateVolumeSlider(e);},false);if(t.container.is(':visible')){positionVolumeHandle(player.options.startVolume);if(player.options.startVolume===0){media.setMuted(true);}
if(media.pluginType==='native'){media.setVolume(player.options.startVolume);}}}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{usePluginFullScreen:true,newWindowCallback:function(){return'';},fullscreenText:mejs.i18n.t('Fullscreen')});$.extend(MediaElementPlayer.prototype,{isFullScreen:false,isNativeFullScreen:false,isInIframe:false,buildfullscreen:function(player,controls,layers,media){if(!player.isVideo)
return;player.isInIframe=(window.location!=window.parent.location);if(mejs.MediaFeatures.hasTrueNativeFullScreen){var func=function(e){if(player.isFullScreen){if(mejs.MediaFeatures.isFullScreen()){player.isNativeFullScreen=true;player.setControlsSize();}else{player.isNativeFullScreen=false;player.exitFullScreen();}}};player.globalBind(mejs.MediaFeatures.fullScreenEventName,func);}
var t=this,normalHeight=0,normalWidth=0,container=player.container,fullscreenBtn=$('<div class="mejs-button mejs-fullscreen-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.fullscreenText+'" aria-label="'+t.options.fullscreenText+'"></button>'+'</div>').appendTo(controls);if(t.media.pluginType==='native'||(!t.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)){fullscreenBtn.click(function(){var isFullScreen=(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||player.isFullScreen;if(isFullScreen){player.exitFullScreen();}else{player.enterFullScreen();}});}else{var hideTimeout=null,supportsPointerEvents=(function(){var element=document.createElement('x'),documentElement=document.documentElement,getComputedStyle=window.getComputedStyle,supports;if(!('pointerEvents'in element.style)){return false;}
element.style.pointerEvents='auto';element.style.pointerEvents='x';documentElement.appendChild(element);supports=getComputedStyle&&getComputedStyle(element,'').pointerEvents==='auto';documentElement.removeChild(element);return!!supports;})();if(supportsPointerEvents&&!mejs.MediaFeatures.isOpera){var fullscreenIsDisabled=false,restoreControls=function(){if(fullscreenIsDisabled){for(var i in hoverDivs){hoverDivs[i].hide();}
fullscreenBtn.css('pointer-events','');t.controls.css('pointer-events','');t.media.removeEventListener('click',t.clickToPlayPauseCallback);fullscreenIsDisabled=false;}},hoverDivs={},hoverDivNames=['top','left','right','bottom'],i,len,positionHoverDivs=function(){var fullScreenBtnOffsetLeft=fullscreenBtn.offset().left-t.container.offset().left,fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,fullScreenBtnWidth=fullscreenBtn.outerWidth(true),fullScreenBtnHeight=fullscreenBtn.outerHeight(true),containerWidth=t.container.width(),containerHeight=t.container.height();for(i in hoverDivs){hoverDivs[i].css({position:'absolute',top:0,left:0});}
hoverDivs['top'].width(containerWidth).height(fullScreenBtnOffsetTop);hoverDivs['left'].width(fullScreenBtnOffsetLeft).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop});hoverDivs['right'].width(containerWidth-fullScreenBtnOffsetLeft-fullScreenBtnWidth).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop,left:fullScreenBtnOffsetLeft+fullScreenBtnWidth});hoverDivs['bottom'].width(containerWidth).height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop).css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight});};t.globalBind('resize',function(){positionHoverDivs();});for(i=0,len=hoverDivNames.length;i<len;i++){hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide();}
fullscreenBtn.on('mouseover',function(){if(!t.isFullScreen){var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,false);fullscreenBtn.css('pointer-events','none');t.controls.css('pointer-events','none');t.media.addEventListener('click',t.clickToPlayPauseCallback);for(i in hoverDivs){hoverDivs[i].show();}
positionHoverDivs();fullscreenIsDisabled=true;}});media.addEventListener('fullscreenchange',function(e){t.isFullScreen=!t.isFullScreen;if(t.isFullScreen){t.media.removeEventListener('click',t.clickToPlayPauseCallback);}else{t.media.addEventListener('click',t.clickToPlayPauseCallback);}
restoreControls();});t.globalBind('mousemove',function(e){if(fullscreenIsDisabled){var fullscreenBtnPos=fullscreenBtn.offset();if(e.pageY<fullscreenBtnPos.top||e.pageY>fullscreenBtnPos.top+fullscreenBtn.outerHeight(true)||e.pageX<fullscreenBtnPos.left||e.pageX>fullscreenBtnPos.left+fullscreenBtn.outerWidth(true)){fullscreenBtn.css('pointer-events','');t.controls.css('pointer-events','');fullscreenIsDisabled=false;}}});}else{fullscreenBtn.on('mouseover',function(){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout;}
var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,true);}).on('mouseout',function(){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout;}
hideTimeout=setTimeout(function(){media.hideFullscreenButton();},1500);});}}
player.fullscreenBtn=fullscreenBtn;t.globalBind('keydown',function(e){if(((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||t.isFullScreen)&&e.keyCode==27){player.exitFullScreen();}});},cleanfullscreen:function(player){player.exitFullScreen();},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if(t.media.pluginType!=='native'&&(mejs.MediaFeatures.isFirefox||t.options.usePluginFullScreen)){return;}
$(document.documentElement).addClass('mejs-fullscreen');normalHeight=t.container.height();normalWidth=t.container.width();if(t.media.pluginType==='native'){if(mejs.MediaFeatures.hasTrueNativeFullScreen){mejs.MediaFeatures.requestFullScreen(t.container[0]);if(t.isInIframe){setTimeout(function checkFullscreen(){if(t.isNativeFullScreen){var zoomMultiplier=window["devicePixelRatio"]||1;var percentErrorMargin=0.002;var windowWidth=zoomMultiplier*$(window).width();var screenWidth=screen.width;var absDiff=Math.abs(screenWidth-windowWidth);var marginError=screenWidth*percentErrorMargin;if(absDiff>marginError){t.exitFullScreen();}else{setTimeout(checkFullscreen,500);}}},500);}}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){t.media.webkitEnterFullscreen();return;}}
if(t.isInIframe){var url=t.options.newWindowCallback(this);if(url!==''){if(!mejs.MediaFeatures.hasTrueNativeFullScreen){t.pause();window.open(url,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');return;}else{setTimeout(function(){if(!t.isNativeFullScreen){t.pause();window.open(url,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');}},250);}}}
t.container.addClass('mejs-container-fullscreen').width('100%').height('100%');t.containerSizeTimeout=setTimeout(function(){t.container.css({width:'100%',height:'100%'});t.setControlsSize();},500);if(t.media.pluginType==='native'){t.$media.width('100%').height('100%');}else{t.container.find('.mejs-shim').width('100%').height('100%');t.media.setVideoSize($(window).width(),$(window).height());}
t.layers.children('div').width('100%').height('100%');if(t.fullscreenBtn){t.fullscreenBtn.removeClass('mejs-fullscreen').addClass('mejs-unfullscreen');}
t.setControlsSize();t.isFullScreen=true;t.container.find('.mejs-captions-text').css('font-size',screen.width/t.width*1.00*100+'%');t.container.find('.mejs-captions-position').css('bottom','45px');},exitFullScreen:function(){var t=this;clearTimeout(t.containerSizeTimeout);if(t.media.pluginType!=='native'&&mejs.MediaFeatures.isFirefox){t.media.setFullscreen(false);return;}
if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){mejs.MediaFeatures.cancelFullScreen();}
$(document.documentElement).removeClass('mejs-fullscreen');t.container.removeClass('mejs-container-fullscreen').width(normalWidth).height(normalHeight);if(t.media.pluginType==='native'){t.$media.width(normalWidth).height(normalHeight);}else{t.container.find('.mejs-shim').width(normalWidth).height(normalHeight);t.media.setVideoSize(normalWidth,normalHeight);}
t.layers.children('div').width(normalWidth).height(normalHeight);t.fullscreenBtn.removeClass('mejs-unfullscreen').addClass('mejs-fullscreen');t.setControlsSize();t.isFullScreen=false;t.container.find('.mejs-captions-text').css('font-size','');t.container.find('.mejs-captions-position').css('bottom','');}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{speeds:['2.00','1.50','1.25','1.00','0.75'],defaultSpeed:'1.00',speedChar:'x'});$.extend(MediaElementPlayer.prototype,{buildspeed:function(player,controls,layers,media){var t=this;if(t.media.pluginType=='native'){var
speedButton=null,speedSelector=null,playbackSpeed=null,html='<div class="mejs-button mejs-speed-button">'+'<button type="button">'+t.options.defaultSpeed+t.options.speedChar+'</button>'+'<div class="mejs-speed-selector">'+'<ul>';if($.inArray(t.options.defaultSpeed,t.options.speeds)===-1){t.options.speeds.push(t.options.defaultSpeed);}
t.options.speeds.sort(function(a,b){return parseFloat(b)-parseFloat(a);});for(var i=0,il=t.options.speeds.length;i<il;i++){html+='<li>'+'<input type="radio" name="speed" '+'value="'+t.options.speeds[i]+'" '+'id="'+t.options.speeds[i]+'" '+
(t.options.speeds[i]==t.options.defaultSpeed?' checked':'')+' />'+'<label for="'+t.options.speeds[i]+'" '+
(t.options.speeds[i]==t.options.defaultSpeed?' class="mejs-speed-selected"':'')+'>'+t.options.speeds[i]+t.options.speedChar+'</label>'+'</li>';}
html+='</ul></div></div>';speedButton=$(html).appendTo(controls);speedSelector=speedButton.find('.mejs-speed-selector');playbackspeed=t.options.defaultSpeed;speedSelector.on('click','input[type="radio"]',function(){var newSpeed=$(this).attr('value');playbackspeed=newSpeed;media.playbackRate=parseFloat(newSpeed);speedButton.find('button').html(newSpeed+t.options.speedChar);speedButton.find('.mejs-speed-selected').removeClass('mejs-speed-selected');speedButton.find('input[type="radio"]:checked').next().addClass('mejs-speed-selected');});speedSelector.height(speedButton.find('.mejs-speed-selector ul').outerHeight(true)+
speedButton.find('.mejs-speed-translations').outerHeight(true)).css('top',(-1*speedSelector.height())+'px');}}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{startLanguage:'',tracksText:mejs.i18n.t('Captions/Subtitles'),hideCaptionsButtonWhenEmpty:true,toggleCaptionsButtonWhenOnlyOne:false,slidesSelector:''});$.extend(MediaElementPlayer.prototype,{hasChapters:false,cleartracks:function(player,controls,layers,media){if(player){if(player.captions)player.captions.remove();if(player.chapters)player.chapters.remove();if(player.captionsText)player.captionsText.remove();if(player.captionsButton)player.captionsButton.remove();}},buildtracks:function(player,controls,layers,media){if(player.tracks.length===0)
return;var t=this,i,options='';if(t.domNode.textTracks){for(i=t.domNode.textTracks.length-1;i>=0;i--){t.domNode.textTracks[i].mode="hidden";}}
t.cleartracks(player,controls,layers,media);player.chapters=$('<div class="mejs-chapters mejs-layer"></div>').prependTo(layers).hide();player.captions=$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" role="log" aria-live="assertive" aria-atomic="false"><span class="mejs-captions-text"></span></div></div>').prependTo(layers).hide();player.captionsText=player.captions.find('.mejs-captions-text');player.captionsButton=$('<div class="mejs-button mejs-captions-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.tracksText+'" aria-label="'+t.options.tracksText+'"></button>'+'<div class="mejs-captions-selector">'+'<ul>'+'<li>'+'<input type="radio" name="'+player.id+'_captions" id="'+player.id+'_captions_none" value="none" checked="checked" />'+'<label for="'+player.id+'_captions_none">'+mejs.i18n.t('None')+'</label>'+'</li>'+'</ul>'+'</div>'+'</div>').appendTo(controls);var subtitleCount=0;for(i=0;i<player.tracks.length;i++){if(player.tracks[i].kind=='subtitles'){subtitleCount++;}}
if(t.options.toggleCaptionsButtonWhenOnlyOne&&subtitleCount==1){player.captionsButton.on('click',function(){if(player.selectedTrack===null){lang=player.tracks[0].srclang;}else{lang='none';}
player.setTrack(lang);});}else{player.captionsButton.on('mouseenter focusin',function(){$(this).find('.mejs-captions-selector').css('visibility','visible');}).on('click','input[type=radio]',function(){lang=this.value;player.setTrack(lang);});player.captionsButton.on('mouseleave focusout',function(){$(this).find(".mejs-captions-selector").css("visibility","hidden");});}
if(!player.options.alwaysShowControls){player.container.bind('controlsshown',function(){player.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');}).bind('controlshidden',function(){if(!media.paused){player.container.find('.mejs-captions-position').removeClass('mejs-captions-position-hover');}});}else{player.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');}
player.trackToLoad=-1;player.selectedTrack=null;player.isLoadingTrack=false;for(i=0;i<player.tracks.length;i++){if(player.tracks[i].kind=='subtitles'){player.addTrackButton(player.tracks[i].srclang,player.tracks[i].label);}}
player.loadNextTrack();media.addEventListener('timeupdate',function(e){player.displayCaptions();},false);if(player.options.slidesSelector!==''){player.slidesContainer=$(player.options.slidesSelector);media.addEventListener('timeupdate',function(e){player.displaySlides();},false);}
media.addEventListener('loadedmetadata',function(e){player.displayChapters();},false);player.container.hover(function(){if(player.hasChapters){player.chapters.css('visibility','visible');player.chapters.fadeIn(200).height(player.chapters.find('.mejs-chapter').outerHeight());}},function(){if(player.hasChapters&&!media.paused){player.chapters.fadeOut(200,function(){$(this).css('visibility','hidden');$(this).css('display','block');});}});if(player.node.getAttribute('autoplay')!==null){player.chapters.css('visibility','hidden');}},setTrack:function(lang){var t=this,i;if(lang=='none'){t.selectedTrack=null;t.captionsButton.removeClass('mejs-captions-enabled');}else{for(i=0;i<t.tracks.length;i++){if(t.tracks[i].srclang==lang){if(t.selectedTrack===null)
t.captionsButton.addClass('mejs-captions-enabled');t.selectedTrack=t.tracks[i];t.captions.attr('lang',t.selectedTrack.srclang);t.displayCaptions();break;}}}},loadNextTrack:function(){var t=this;t.trackToLoad++;if(t.trackToLoad<t.tracks.length){t.isLoadingTrack=true;t.loadTrack(t.trackToLoad);}else{t.isLoadingTrack=false;t.checkForTracks();}},loadTrack:function(index){var
t=this,track=t.tracks[index],after=function(){track.isLoaded=true;t.enableTrackButton(track.srclang,track.label);t.loadNextTrack();};$.ajax({url:track.src,dataType:"text",success:function(d){if(typeof d=="string"&&(/<tt\s+xml/ig).exec(d)){track.entries=mejs.TrackFormatParser.dfxp.parse(d);}else{track.entries=mejs.TrackFormatParser.webvtt.parse(d);}
after();if(track.kind=='chapters'){t.media.addEventListener('play',function(e){if(t.media.duration>0){t.displayChapters(track);}},false);}
if(track.kind=='slides'){t.setupSlides(track);}},error:function(){t.loadNextTrack();}});},enableTrackButton:function(lang,label){var t=this;if(label===''){label=mejs.language.codes[lang]||lang;}
t.captionsButton.find('input[value='+lang+']').prop('disabled',false).siblings('label').html(label);if(t.options.startLanguage==lang){$('#'+t.id+'_captions_'+lang).prop('checked',true).trigger('click');}
t.adjustLanguageBox();},addTrackButton:function(lang,label){var t=this;if(label===''){label=mejs.language.codes[lang]||lang;}
t.captionsButton.find('ul').append($('<li>'+'<input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_'+lang+'" value="'+lang+'" disabled="disabled" />'+'<label for="'+t.id+'_captions_'+lang+'">'+label+' (loading)'+'</label>'+'</li>'));t.adjustLanguageBox();t.container.find('.mejs-captions-translations option[value='+lang+']').remove();},adjustLanguageBox:function(){var t=this;t.captionsButton.find('.mejs-captions-selector').height(t.captionsButton.find('.mejs-captions-selector ul').outerHeight(true)+
t.captionsButton.find('.mejs-captions-translations').outerHeight(true));},checkForTracks:function(){var
t=this,hasSubtitles=false;if(t.options.hideCaptionsButtonWhenEmpty){for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=='subtitles'){hasSubtitles=true;break;}}
if(!hasSubtitles){t.captionsButton.hide();t.setControlsSize();}}},displayCaptions:function(){if(typeof this.tracks=='undefined')
return;var
t=this,i,track=t.selectedTrack;if(track!==null&&track.isLoaded){for(i=0;i<track.entries.times.length;i++){if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){t.captionsText.html(track.entries.text[i]).attr('class','mejs-captions-text '+(track.entries.times[i].identifier||''));t.captions.show().height(0);return;}}
t.captions.hide();}else{t.captions.hide();}},setupSlides:function(track){var t=this;t.slides=track;t.slides.entries.imgs=[t.slides.entries.text.length];t.showSlide(0);},showSlide:function(index){if(typeof this.tracks=='undefined'||typeof this.slidesContainer=='undefined'){return;}
var t=this,url=t.slides.entries.text[index],img=t.slides.entries.imgs[index];if(typeof img=='undefined'||typeof img.fadeIn=='undefined'){t.slides.entries.imgs[index]=img=$('<img src="'+url+'">').on('load',function(){img.appendTo(t.slidesContainer).hide().fadeIn().siblings(':visible').fadeOut();});}else{if(!img.is(':visible')&&!img.is(':animated')){img.fadeIn().siblings(':visible').fadeOut();}}},displaySlides:function(){if(typeof this.slides=='undefined')
return;var
t=this,slides=t.slides,i;for(i=0;i<slides.entries.times.length;i++){if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop){t.showSlide(i);return;}}},displayChapters:function(){var
t=this,i;for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=='chapters'&&t.tracks[i].isLoaded){t.drawChapters(t.tracks[i]);t.hasChapters=true;break;}}},drawChapters:function(chapters){var
t=this,i,dur,percent=0,usedPercent=0;t.chapters.empty();for(i=0;i<chapters.entries.times.length;i++){dur=chapters.entries.times[i].stop-chapters.entries.times[i].start;percent=Math.floor(dur/t.media.duration*100);if(percent+usedPercent>100||i==chapters.entries.times.length-1&&percent+usedPercent<100)
{percent=100-usedPercent;}
t.chapters.append($('<div class="mejs-chapter" rel="'+chapters.entries.times[i].start+'" style="left: '+usedPercent.toString()+'%;width: '+percent.toString()+'%;">'+'<div class="mejs-chapter-block'+((i==chapters.entries.times.length-1)?' mejs-chapter-block-last':'')+'">'+'<span class="ch-title">'+chapters.entries.text[i]+'</span>'+'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start)+'&ndash;'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop)+'</span>'+'</div>'+'</div>'));usedPercent+=percent;}
t.chapters.find('div.mejs-chapter').click(function(){t.media.setCurrentTime(parseFloat($(this).attr('rel')));if(t.media.paused){t.media.play();}});t.chapters.show();}});mejs.language={codes:{af:'Afrikaans',sq:'Albanian',ar:'Arabic',be:'Belarusian',bg:'Bulgarian',ca:'Catalan',zh:'Chinese','zh-cn':'Chinese Simplified','zh-tw':'Chinese Traditional',hr:'Croatian',cs:'Czech',da:'Danish',nl:'Dutch',en:'English',et:'Estonian',fl:'Filipino',fi:'Finnish',fr:'French',gl:'Galician',de:'German',el:'Greek',ht:'Haitian Creole',iw:'Hebrew',hi:'Hindi',hu:'Hungarian',is:'Icelandic',id:'Indonesian',ga:'Irish',it:'Italian',ja:'Japanese',ko:'Korean',lv:'Latvian',lt:'Lithuanian',mk:'Macedonian',ms:'Malay',mt:'Maltese',no:'Norwegian',fa:'Persian',pl:'Polish',pt:'Portuguese',ro:'Romanian',ru:'Russian',sr:'Serbian',sk:'Slovak',sl:'Slovenian',es:'Spanish',sw:'Swahili',sv:'Swedish',tl:'Tagalog',th:'Thai',tr:'Turkish',uk:'Ukrainian',vi:'Vietnamese',cy:'Welsh',yi:'Yiddish'}};mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(trackText){var
i=0,lines=mejs.TrackFormatParser.split2(trackText,/\r?\n/),entries={text:[],times:[]},timecode,text,identifier;for(;i<lines.length;i++){timecode=this.pattern_timecode.exec(lines[i]);if(timecode&&i<lines.length){if((i-1)>=0&&lines[i-1]!==''){identifier=lines[i-1];}
i++;text=lines[i];i++;while(lines[i]!==''&&i<lines.length){text=text+'\n'+lines[i];i++;}
text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text);entries.times.push({identifier:identifier,start:(mejs.Utility.convertSMPTEtoSeconds(timecode[1])===0)?0.200:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),settings:timecode[5]});}
identifier='';}
return entries;}},dfxp:{parse:function(trackText){trackText=$(trackText).filter("tt");var
i=0,container=trackText.children("div").eq(0),lines=container.find("p"),styleNode=trackText.find("#"+container.attr("style")),styles,begin,end,text,entries={text:[],times:[]};if(styleNode.length){var attributes=styleNode.removeAttr("id").get(0).attributes;if(attributes.length){styles={};for(i=0;i<attributes.length;i++){styles[attributes[i].name.split(":")[1]]=attributes[i].value;}}}
for(i=0;i<lines.length;i++){var style;var _temp_times={start:null,stop:null,style:null};if(lines.eq(i).attr("begin"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"));if(!_temp_times.start&&lines.eq(i-1).attr("end"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"));if(lines.eq(i).attr("end"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"));if(!_temp_times.stop&&lines.eq(i+1).attr("begin"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"));if(styles){style="";for(var _style in styles){style+=_style+":"+styles[_style]+";";}}
if(style)_temp_times.style=style;if(_temp_times.start===0)_temp_times.start=0.200;entries.times.push(_temp_times);text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text);if(entries.times.start===0)entries.times.start=2;}
return entries;}},split2:function(text,regex){return text.split(regex);}};if('x\n\ny'.split(/\n/gi).length!=3){mejs.TrackFormatParser.split2=function(text,regex){var
parts=[],chunk='',i;for(i=0;i<text.length;i++){chunk+=text.substring(i,i+1);if(regex.test(chunk)){parts.push(chunk.replace(regex,''));chunk='';}}
parts.push(chunk);return parts;};}})(mejs.$);(function($){$.extend(mejs.MepDefaults,{'contextMenuItems':[{render:function(player){if(typeof player.enterFullScreen=='undefined')
return null;if(player.isFullScreen){return mejs.i18n.t('Turn off Fullscreen');}else{return mejs.i18n.t('Go Fullscreen');}},click:function(player){if(player.isFullScreen){player.exitFullScreen();}else{player.enterFullScreen();}}},{render:function(player){if(player.media.muted){return mejs.i18n.t('Unmute');}else{return mejs.i18n.t('Mute');}},click:function(player){if(player.media.muted){player.setMuted(false);}else{player.setMuted(true);}}},{isSeparator:true},{render:function(player){return mejs.i18n.t('Download Video');},click:function(player){window.location.href=player.media.currentSrc;}}]});$.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(player,controls,layers,media){player.contextMenu=$('<div class="mejs-contextmenu"></div>').appendTo($('body')).hide();player.container.bind('contextmenu',function(e){if(player.isContextMenuEnabled){e.preventDefault();player.renderContextMenu(e.clientX-1,e.clientY-1);return false;}});player.container.bind('click',function(){player.contextMenu.hide();});player.contextMenu.bind('mouseleave',function(){player.startContextMenuTimer();});},cleancontextmenu:function(player){player.contextMenu.remove();},isContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true;},disableContextMenu:function(){this.isContextMenuEnabled=false;},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;t.killContextMenuTimer();t.contextMenuTimer=setTimeout(function(){t.hideContextMenu();t.killContextMenuTimer();},750);},killContextMenuTimer:function(){var timer=this.contextMenuTimer;if(timer!=null){clearTimeout(timer);delete timer;timer=null;}},hideContextMenu:function(){this.contextMenu.hide();},renderContextMenu:function(x,y){var t=this,html='',items=t.options.contextMenuItems;for(var i=0,il=items.length;i<il;i++){if(items[i].isSeparator){html+='<div class="mejs-contextmenu-separator"></div>';}else{var rendered=items[i].render(t);if(rendered!=null){html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+(Math.random()*1000000)+'">'+rendered+'</div>';}}}
t.contextMenu.empty().append($(html)).css({top:y,left:x}).show();t.contextMenu.find('.mejs-contextmenu-item').each(function(){var $dom=$(this),itemIndex=parseInt($dom.data('itemindex'),10),item=t.options.contextMenuItems[itemIndex];if(typeof item.show!='undefined')
item.show($dom,t);$dom.click(function(){if(typeof item.click!='undefined')
item.click(t);t.contextMenu.hide();});});setTimeout(function(){t.killControlsTimer('rev3');},100);}});})(mejs.$);(function($){$.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t('Close')});$.extend(MediaElementPlayer.prototype,{buildpostroll:function(player,controls,layers,media){var
t=this,postrollLink=t.container.find('link[rel="postroll"]').attr('href');if(typeof postrollLink!=='undefined'){player.postroll=$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+t.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(layers).hide();t.media.addEventListener('ended',function(e){$.ajax({dataType:'html',url:postrollLink,success:function(data,textStatus){layers.find('.mejs-postroll-layer-content').html(data);}});player.postroll.show();},false);}}});})(mejs.$);
;