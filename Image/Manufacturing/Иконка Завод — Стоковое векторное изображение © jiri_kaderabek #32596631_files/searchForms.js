(function($,undefined){$.widget("depositphotos.depositSearchForms",{options:{selector:'.search-form, .search, .d_sort, .laconic-search-form, [data-tips-for^="laconicSearch"]',$resetTemplate:$('<a class="reset" />'),colorRegex:/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,laconicSearchSlideDelay:300,extraTypes:['image','vector','video'],searchFormsTypes:/laconic|main/g,minWidthSmallPlaceholder:540},_init:function(){this.$this=this.element;this._resets=this._resets||{};this._searchParams={st:0,query:'',image:1,vector:1,video:1,sorting:'',category:'',seller:'',exclude_keywords:'',editorial_only:'',editorial_exclude:'',orientation:'',search_size:'',limit:'',color:'',nudity:''};this._hiddenSettings={};this._fillServerParams();this._setGlobalObject();this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this._markedSearchParams={};this._settings=$.extend({},dp.config.search.userSearchSettings);},_destroy:function(){dp.observer.remove(this.widgetName);dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;this._markedSearchParams=undefined;},_gather:function(){var $searchForms=this.$this.find(this.options.selector);var $laconicFilterBlock=$searchForms.find('.laconic-search-form-wrapper .search-filter-block').parent();var boxBlocksSelector='.search-filter-block';var $searchInput=$searchForms.find('.search-input');var $seller=$searchForms.find('input[name*="seller"]');var $header=$('header');return{advanced:{$searchForms:$searchForms,$input:$searchInput,$typesHolder:$searchForms.find('.search-type-selector'),$typesButton:$searchForms.find('.search-type-wrap > span'),$typesApply:$searchForms.find('.search-type-selector .apply-types'),$typesBox:$searchForms.find('input[name][data-group="type"]'),$fields:$searchForms.find('input[name], select[name]').not('[data-group="type-s"]').not('[name="types_input"]').not($searchInput).not($seller),$orientation:$searchForms.find('input[name*="orientation"]'),$seller:$seller,$boxSwitchers:$searchForms.find(boxBlocksSelector).prev(),$reset:$searchForms.find('input.d-reset-button').add('.expand-left-side .control .search-reset').add('.userbar .laconic-search > a .search-reset').add('.laconic-search-form .clear-search'),$submitButton:$searchForms.find('.search-right .button'),$hideSearchForm:$searchForms.find('.hide-search-form'),$showSearchForm:$('.expand-left-side'),$control:$('.userbar .laconic-search > a .control, .laconic-search-form .clear-search, .expand-left-side .control'),$searchParamsCount:$('.userbar .laconic-search > a .params-count i, .expand-left-side .control .params-count i')},laconic:{$laconicSearchForm:$('.laconic-search-form'),$laconicSearchFormButton:$header.find('.userbar .laconic-search > a'),$laconicSearchFormButtonArrow:$header.find('.laconic-search-form-wrapper form > .arrow'),$laconicBlockBlurReplacement:$('body').add($header.find('.button-apply')),$boxBlocksClickPrevented:$header.find(boxBlocksSelector).filter(function(){return['exclude_keywords','seller'].indexOf($(this).attr('data-name'))!==-1;}),$boxSwitchers:$header.find('.laconic-search-form-wrapper .search-filter-block').prev(),$boxTitle:$laconicFilterBlock.find('span[data-name]'),$box:$header.find('.search-param-box'),$category:$laconicFilterBlock.find('input[name*="category"]'),$size:$laconicFilterBlock.find('input[name*="search_size"]'),$inputApply:$header.find('.box-type-text input[name*="seller"], .box-type-text input[name*="exclude_keywords"]'),$hasScroll:$header.find('.has-scroll')},color:{$input:$searchForms.find('input[name*="color"]'),$palette:$searchForms.find('i.search-palette'),$colorLabel:$searchForms.find('.color-label')},other:{$wrapper:$('.wrapper'),$forms:$searchForms.find('.search-form-main form'),$searchSettingsHolder:$('.search-holder .search-settings-holder')},placeholder:{$withSmallPlaceholder:$searchForms.find('input[data-small-placeholder]')},system:{$window:$(window)}};},_handlers:function(){var _this=this;return{advanced:{searchForms:{handler:function(e,param){switch(e.type){case'submit':e.preventDefault();_this._performSearch();break;case'set':_this._handleSearchSettingsButton(param);break;default:break;}},events:['submit','set']},input:{handler:function(e){_this._processDefault(this);if(_this._get('query')!==this.value||(e.keyCode===13&&this.value!=='')){_this._set('query',this.value,e.keyCode===13);}},events:['keydown','input','set','reset'],run:function(){if(_this._searchParams['query']){_this._set('query',_this._searchParams['query'],false);}
_this._processDefault(this.get(0));if(!!dp.config.isMobile){return;}
dp.tools.focusOnStraightBrowsersInput(this.filter('#d_search2'));if(dp.config.action!=='search'){dp.tools.focusOnStraightBrowsersInput(this.filter('#d_search4'));}
if(dp.config.search.result===0){dp.tools.focusOnStraightBrowsersInput(this);}}},typesHolder:{run:function(){var $this=$(this);$this.depositSearchTypes();$this.trigger('sync',[true,_this._searchParams]);}},typesApply:{handler:function(){_this.targets.advanced.$typesHolder.fadeOut('fast',function(){_this.targets.advanced.$typesButton.removeClass('active');});},events:'click'},fields:{handler:function(e,nosubmit){if(this.type==='radio'){_this.targets.advanced.$fields.filter('[name*="'+this.name+'"][data-default]').each(function(){_this._processDefault(this);});}else{if(this.getAttribute('data-only-one')!==null){_this._processOnlyOne(this);}}
_this._processField(this,e,nosubmit);},events:['input','set','change','reset'],run:function(){var processed=[];this.filter(function(){return!_this.isLaconicEl($(this));}).each(function(){if(processed.indexOf(this.name)===-1){if(this.type!=='radio')processed.push(this.name);_this._processValue(this);}});}},orientation:{run:function(){var $el=this;_this._reinitDepositCustomInput(this,function(){return{template:$('<i class="orientation-switcher'+(_this.isLaconicEl($el)?' green':'')+'"><i></i></i>')}});}},seller:{handler:function(e,nosubmit){_this._processField(this,e,nosubmit);},events:['input','set','reset'],run:function(){var $laconic=this.filter(function(){return _this.isLaconicEl($(this));});var $advanced=this.not($laconic);$laconic.each(function(){$(this).depositSearchHints({mode:'full',clickSubmit:true})});$advanced.each(function(){$(this).depositSearchHints({mode:'full',clickSubmit:false})});_this._processValue($laconic.get(0));}},boxSwitchers:{handler:function(e){var $this=$(this);var $wrapper=$this.parent();var $block=$wrapper.find('.search-filter-block');var isVisible=!$block.hasClass('active');_this._hideBoxes();if(isVisible){$block.addClass('active');$block.find('input[type="text"]').trigger('focus');$wrapper.find('.arrow').addClass('top').removeClass('bottom');}else{$block.removeClass('active');$wrapper.find('.arrow').removeClass('top').addClass('bottom');}
e.preventDefault();e.stopPropagation();},events:'click',run:function(){var $advanced=this.filter(function(){return!_this.isLaconicEl($(this));});$advanced.next().each(function(){var $this=$(this);if($this.find('input').hasClass('active')){$this.addClass('active').parent().find('.arrow').addClass('top').removeClass('bottom');}});}},reset:{handler:function(e){e.preventDefault();e.stopPropagation();_this._resetAll();},events:'click',run:function(){_this._calcParams();}},submitButton:{handler:function(e){e.preventDefault();_this._performSearch();},events:'click'},hideSearchForm:{handler:function(){_this._toggleSearchForm(this,false);},events:'click'},showSearchForm:{handler:function(){_this._toggleSearchForm(this,true);},events:'click'}},laconic:{laconicSearchFormButton:{handler:function(e,savePosition){var $button=$(this);var isVisible=_this.targets.laconic.$laconicSearchForm.is(':visible');if(_this.targets.other.$searchSettingsHolder.length){_this.targets.other.$searchSettingsHolder.hide();}
_this.targets.laconic.$laconicSearchForm[isVisible?'slideUp':'slideDown'](_this.options.laconicSearchSlideDelay,function(){$button.toggleClass('active').find('.arrow').toggleClass('bottom top');if(!savePosition)_this._setSearchSettings('hidelaconicsearchform',isVisible);if(isVisible){$button.removeClass('active').find('.arrow').removeClass('top').addClass('bottom');}else{$button.addClass('active').find('.arrow').removeClass('bottom').addClass('top');}
if(_this.targets.other.$searchSettingsHolder.length){_this._handleSearchSettingsButton(isVisible);}});},events:'click'},laconicSearchFormButtonArrow:{handler:function(){_this.targets.laconic.$laconicSearchFormButton.trigger('click');_this._setSearchSettings('hidelaconicsearchform',true);}},laconicBlockBlurReplacement:{handler:function(){_this.targets.laconic.$inputApply.filter(':visible').trigger('set');_this._hideBoxes();},events:'click'},boxBlocksClickPrevented:{handler:function(e){e.preventDefault();e.stopPropagation();},events:'click'},boxSwitchers:{run:function(){$(this).each(function(){var name=this.getAttribute('data-name');if(name){_this._reinitInputs(this,name);_this._laconicSetBox(name,true);}});if(_this.targets.laconic.$laconicSearchForm.is(':visible')&&_this.targets.other.$searchSettingsHolder.length){_this.targets.other.$wrapper.addClass('bottom-layer');}}},category:{run:function(){_this._reinitDepositCustomInput(this,{template:$('<i class="checked-icon"></i>')});}},size:{run:function(){_this._reinitDepositCustomInput(this,{template:$('<i class="size-label"><i>'+this.attr('data-value')+'</i></i>')});}},hasScroll:{handler:function(e){var delta=e.originalEvent.wheelDelta?-e.originalEvent.wheelDelta:e.originalEvent.deltaY;var deltaY=Math.abs(delta)<30?delta*40:delta;$(this).scrollTop(this.scrollTop+deltaY);e.stopPropagation();e.preventDefault();e.returnValue=false;return false;},events:['wheel','mousewheel']}},color:{input:{handler:function(e,nosubmit){var validateColor=function(color){if(color.search('#')===-1){color='#'+color;}
return _this.options.colorRegex.test(color)?color:'';};var color=validateColor(this.value);_this.targets.color.$input.val(color);_this._set('color',color,typeof nosubmit==='undefined'?true:!nosubmit);_this.targets.color.$colorLabel.parent().addClass('show-marker');if(color){_this._setColorValue(color);}else{_this.targets.color.$colorLabel.parent().removeClass('show-marker');}
_this._processDefault(this);if(_this.isLaconicEl(this)){_this._laconicSetBox(this.name,true);}},events:['change']},palette:{handler:function(){_this._paletteClickHandler(this);},run:function(){if(_this._searchParams.color){_this._paletteClickHandler(this.filter(function(){return $(this).attr('data-color')===_this._searchParams.color;}).get(0),true);_this._laconicSetBox(this.closest('[data-name]').attr('data-name'),true);}}}},other:{forms:{handler:function(e){e.preventDefault();_this._performSearch();},events:['submit']}},system:{window:{handler:function(){_this._resize();},events:'_resize',run:function(){_this._resize();}}}}},_handleSearchSettingsButton:function(isVisible){if(isVisible){this.targets.other.$wrapper.removeClass('bottom-layer');this.targets.other.$searchSettingsHolder.removeClass('laconic-form-open').show();}else{this.targets.other.$wrapper.addClass('bottom-layer');this.targets.other.$searchSettingsHolder.addClass('laconic-form-open').show();}},isLaconicEl:function(el){return!!$(el).parents('header').length;},_hideBoxes:function(){this.targets.laconic.$box.each(function(){var $wrapper=$(this).parent();$wrapper.find('.search-filter-block').removeClass('active');$wrapper.find('.arrow').addClass('bottom').removeClass('top');});},_processField:function(el,e,nosubmit){if(this.isLaconicEl($(el))){if(!(e.type==='input'&&el.type==='text')){this._hideBoxes();this._laconicSetBox($(el).closest('.search-param-box').attr('data-name'),false);}}else{if(el.getAttribute('data-default')!==null){this._processDefault(el);}}
var trigger=typeof nosubmit==='undefined'?e.type!=='input'&&typeof $(el).attr('data-nosubmit')==='undefined':!nosubmit;this._processValue(el,trigger);},_fillServerParams:function(){if(dp.config.search.params){var types=this.options.extraTypes;var type;for(var i=0;i<types.length;i++){type=(typeof dp.config.search.params.type==='undefined'||typeof dp.config.search.params.type[i]==='undefined')?1:dp.config.search.params.type[i];dp.config.search.params[i]=type;}
for(i in dp.config.search.params){if(!dp.config.search.params.hasOwnProperty(i)||!this._searchParams.hasOwnProperty(i))continue;this._searchParams[i]=dp.config.search.params[i]===''&&this.options.extraTypes.indexOf(i)!==-1?1:dp.config.search.params[i];}
this._searchParams.st=0;}},_setGlobalObject:function(){var _this=this;dp.search={get:function(key){return _this._get(key);},set:function(key,value,trigger,caller){return _this._set(key,value,trigger,caller);},setHidden:function(key,val){if(_this._searchParams.hasOwnProperty(key)){_this._hiddenSettings[key]=val;}}}},_get:function(key){return this._searchParams.hasOwnProperty(key)?this._searchParams[key]:false;},_set:function(keys,value,trigger,caller){var _this=this;var __set=function(key,val){if(_this._searchParams.hasOwnProperty(key)){_this._searchParams[key]=val;_this._sync(key,val);_this._setMarkedSearchParams(key,true);}};if(typeof keys==='object'){for(var i in keys){if(!keys.hasOwnProperty(i))continue;__set(i,keys[i]);}}else{__set(keys,value);}
var searchLink=(caller==='settings'&&(dp.config.action==='folder'||dp.url(window.location.href).data.attr.directory==='/folder/'))?'':dp.config.search.link;if(value===true||trigger===true){this._performSearch(false,searchLink);}
return this._searchParams;},_reinitInputs:function(el,name){var _this=this;var $parent=$(el).closest('[data-default]');var $input=$parent.find('input[name*="'+name+'"]');var filteredName=name.replace(_this.options.searchFormsTypes,'');if($input.length&&_this._searchParams[filteredName]){this._set(filteredName,_this._searchParams[filteredName]);}else{$parent.find('[data-only-one="'+name+'"]').each(function(){var $this=$(this);if(_this._searchParams[$this.attr('name').replace(_this.options.searchFormsTypes,'')]){$this.prop('checked',true);_this._processOnlyOne(this);}});}},_reinitDepositCustomInput:function($els,options){var _this=this;var name=$els.closest('[data-name]').attr('data-name');var filteredName=name.replace(_this.options.searchFormsTypes,'');if(_this._searchParams[filteredName]){$els.removeAttr('checked');$els.each(function(){var $this=$(this);if(_this._searchParams[filteredName]==$this.val()){$this.prop('checked',true);_this._laconicSetBox(name,true);}});}
$els.depositCustomInput(typeof options==='function'?options():options);},_sync:function(key,value){var _this=this;if(key==='image'||key==='vector'||key==='video')this.targets.advanced.$typesHolder.trigger('set',{key:key,value:value});var $targets=this.targets.advanced.$fields.add(this.targets.advanced.$input).add(this.targets.advanced.$seller).filter('[name*="'+key+'"]');$targets.each(function(){switch(this.type){case'checkbox':var boolValue=(value===1);if(this.checked!==boolValue){this.checked=boolValue;}
break;case'select':var $options=$(this).find('option');var selectedValue=$options.filter(':selected').val();if(selectedValue!==value){$options.prop('selected',false);$options.filter('option[value="'+value+'"]').prop('selected',true);}
break;case'radio':if(this.value===value&&this.checked!==true){this.checked='checked';}
break;default:if(this.value!==value){this.value=value;}
break;}
if(this.getAttribute('data-default')!==null&&!_this.isLaconicEl(this))_this._processDefault(this);});$targets.trigger('changed');return true;},_processValue:function(object,trigger){var type=object.type||'';var value=false;switch(type){case'checkbox':value=object.checked?1:0;break;case'radio':if(!object.checked)return false;value=object.value;break;default:value=object.value;break;}
this._set(object.name.replace(this.options.searchFormsTypes,''),value,trigger);},_isDefaultAdvancedVal:function(el){var defaultValue=el.getAttribute('data-default');var isDefault=false;switch(el.type){case'checkbox':isDefault=(el.checked===(defaultValue==='true'));break;case'radio':isDefault=(el.value===defaultValue||el.checked!==true);break;default:isDefault=(el.value===defaultValue);break;}
return isDefault;},_processDefault:function(el,sibling){var $reset=this._resets[el.id]||$();var $el=$(el);var isDefault=this._isDefaultAdvancedVal(el);$reset.remove();if(isDefault){$el.removeClass('active');}else{$el.addClass('active');if($el.parent().hasClass('select-wrapper')){$el.parent().addClass('active');}
this._createReset(el,sibling||el);}},_processOnlyOne:function(el){if(!el.checked)return false;var _this=this;var isLaconic=this.isLaconicEl(el);this.targets.advanced.$fields.filter('[data-only-one="'+el.getAttribute('data-only-one')+'"]').filter(function(){return!dp.tools.xor(isLaconic,_this.isLaconicEl(this));}).not(el).prop('checked',false).trigger('change',true);},_resetField:function(object,nosubmit){var _this=this;var type=object.type||'';var defaultValue=object.getAttribute('data-default');switch(type){case'checkbox':object.checked=defaultValue.length>0;break;case'radio':this.targets.advanced.$fields.filter('[name*="'+object.name+'"][data-default]').each(function(){if(this.value!==defaultValue){this.checked=false;_this._processDefault(this);}else{this.checked=true;object=this;}});break;case'text':object.value=defaultValue;dp.tools.focusOnStraightBrowsersInput($(object));default:object.value=defaultValue;break;}
$(object).trigger('reset',typeof nosubmit!=='undefined'?nosubmit:false);},_resetAll:function(){var $reset;for(var i in this._resets){$reset=this._resets[i];if(this.isLaconicEl($reset)&&!$reset.siblings().is(this.targets.advanced.$input)){$reset.trigger('click',true);}}
this._calcParams();this._performSearch(true);},_performSearch:function(isReset,searchLink){var params=[];var param;searchLink=(typeof searchLink==='undefined')?dp.config.search.link:searchLink;for(var i in this._searchParams){if(this._searchParams.hasOwnProperty(i)){param=this._searchParams[i]===''?this._hiddenSettings[i]:this._searchParams[i];if(param!==''&&typeof param!=='undefined'){params.push(i+'='+encodeURIComponent(param));}}}
var paramsString=params.join('&');this._trackSearch(isReset);console.log('Search requested: '+dp.config.search.link+'?'+paramsString);dp.observer.add('dpTrackSearchQuery','pushstate',this._selfRemovedTracking);this._hideBoxes();if((dp.config.action==='folder'||dp.url(window.location.href).data.attr.directory==='/folder/')&&searchLink===''){searchLink=dp.url(window.location.href).data.attr.path.replace(new RegExp(dp.config.pager.placeholder+'[0-9]+','gi'),'');}
dp.loader.ajax.load(searchLink+'?'+paramsString);},_trackSearch:function(isReset){var query=this._searchParams.query.toLowerCase();dp.track.fire(dp.config.isIndexPage?'main_search_click':'head_search_click',[query]);this._trackAdvancedSearchOptions(isReset);this._remarketingTrack();},_trackAdvancedSearchOptions:function(isReset){var eventCode=this.targets.laconic.$laconicSearchForm.is(':visible')?'advanced_vertical_filter_change':'advanced_horizontal_filter_change';if(dp.config.action==='index'){return false;}
if(isReset){dp.track.fire(eventCode,['Clear','Yes']);}else{var inspectCheckbox=function(val){return val?'On':'Off';};var searchParamsFilter={category:{trackName:'Category',getTrackingValue:function(val){return dp.config.search.categoriesList[val];}},color:{trackName:'Colour',getTrackingValue:function(val){return val?'Yes':'No'}},editorial_exclude:{trackName:'Exclude Editorial',getTrackingValue:inspectCheckbox},editorial_only:{trackName:'Only Editorial',getTrackingValue:inspectCheckbox},exclude_keywords:{trackName:'Exclude Keywords'},orientation:{trackName:'Orientation',getTrackingValue:function(val){var valueMap={all:'All',horizontal:'Horisontal',vertical:'Vertical',square:'Sqare'};return valueMap[val];}},search_size:{trackName:'Image Size',getTrackingValue:function(val){var valueMap={all:'All Sizes',3:'M',4:'L',5:'XL'};return valueMap[val];}},seller:{trackName:'Contributor'}};var trackingValue;for(var i in this._markedSearchParams){if(searchParamsFilter[i]){trackingValue=searchParamsFilter[i].getTrackingValue?searchParamsFilter[i].getTrackingValue(this._searchParams[i]):this._searchParams[i];if(trackingValue)dp.track.fire(eventCode,[searchParamsFilter[i].trackName,trackingValue]);}}
dp.track.fire(eventCode,['Search','Yes']);}
this._markedSearchParams={};},_setMarkedSearchParams:function(key,val){if(this._markedSearchParams){this._markedSearchParams[key]=val;}},_remarketingTrack:function(){for(var i in this._searchParams){if(this._searchParams[i]){dp.track.perform('remarketing','searchFilter.'+i);}}
dp.track.perform('remarketing','searchParams7');dp.track.perform('remarketing','searchParams30');},_selfRemovedTracking:function(){dp.track.trackSearchQuery();dp.observer.remove('dpTrackSearchQuery','pushstate');},_calcParams:function(){var _this=this;var paramsCount=this.targets.laconic.$laconicSearchForm.find('.reset').filter(function(){return _this.isLaconicEl(this)&&($(this).css('display')==='block'||$(this).css('display')==='inline-block');}).length;this.targets.advanced.$searchParamsCount.text(paramsCount);if(paramsCount){this.targets.advanced.$control.removeClass('hidden');}else{this.targets.advanced.$control.addClass('hidden');}},_createReset:function(el,sibling){var _this=this;var $reset=this.options.$resetTemplate.clone().insertAfter(sibling);if(this.isLaconicEl(sibling)){$reset.addClass('reset-icon');}
$reset.off('click.depositSearchForms').on('click.depositSearchForms',function(e,all){e.stopPropagation();e.preventDefault();_this._hideBoxes();_this._resetField(el,all);});this._resets[el.id]=$reset;},_laconicSetBox:function(boxName,action){var _this=this;var unifiedBoxName=boxName.replace(_this.options.searchFormsTypes,'');var $box=_this.targets.laconic.$box.filter('[data-name*="'+boxName+'"]');var getInput=function($box){var $input;switch(unifiedBoxName){case'editorial':$input=$box.find('input[type="checkbox"]:checked');break;case'category':case'orientation':case'search_size':$input=$box.find('input[name*="'+boxName+'"]:checked');break;default:$input=$box.find('input[name*="'+boxName+'"]');break;}
return $input;};var getVal=function($input,$box){var value=$input.val();if((value!==''||unifiedBoxName!=='editorial')&&(!value||!value.length||value==='all')){value=null;}else{switch(unifiedBoxName){case'editorial':value=$box.find('[data-name*="'+$input.attr('name')+'"]').text();break;case'color':value=_this._setColorValue(value).eq(0).parent();break;case'category':value=$box.find('[data-value="'+value+'"]').text();break;case'orientation':value=$('<i class="orientation-switcher green"><i></i></i>').addClass(value);break;case'search_size':value=$('<i class="size-label"><i>'+$input.attr('data-value')+'</i></i>');break;default:break;}}
return value;};var $input=getInput($box);var $titleBox=this.targets.laconic.$boxTitle.filter('[data-name*="'+boxName+'"]').find('> span');var value=getVal($input,$box);$titleBox.parent().find('> .reset').remove();if(value===null){$titleBox.text($titleBox.attr('data-default-title'));}else{this._processDefault($input.get(0),$titleBox.next());$titleBox.empty().append(value);}
if(action){this._calcParams();}},_setColorValue:function(value){return this.targets.color.$colorLabel.find('i').css('background',value);},_paletteClickHandler:function(el,noTrigger){this.targets.color.$palette.removeClass('active');$(el).addClass('active');var $input=this.targets.color.$input.filter('[data-id="'+el.getAttribute('data-id')+'"]').val(el.getAttribute('data-color'));if(!noTrigger){$input.filter(':eq(0)').trigger('change');}
this._hideBoxes();},_setSearchSettings:function(key,value){this._settings[key]=value;dp.storage.set('search_params',JSON.stringify(this._settings));dp.loader.ajax.cache.content.clear();dp.loader.ajax.__cacheRequestLocked=true;},_toggleSearchForm:function(el,show,fromScroll){var $content=$(el).closest('[data-role="content"]');if(show===true){$content.removeClass('right-stretched');}else{$content.addClass('right-stretched');}
if(dp.config.viewItemMode===2||dp.config.viewItemMode===3){this.targets.system.$window.trigger('_resize');}
if(typeof fromScroll==='undefined'){dp.storage.set('hideLeftSearchForm',show?0:1);}
dp.observer.fire('displayLeftSide');},_resize:function(){if(this.targets.placeholder.$withSmallPlaceholder.length){var $input=this.targets.placeholder.$withSmallPlaceholder;if(this.targets.system.$window.width()<=this.options.minWidthSmallPlaceholder){if(typeof $input.attr('data-general-placeholder')==='undefined'){$input.attr('data-general-placeholder',$input.attr('placeholder'));}
$input.attr('placeholder',$input.attr('data-small-placeholder'));}else if(typeof $input.attr('data-general-placeholder')!=='undefined'){$input.attr('placeholder',$input.attr('data-general-placeholder'));}}}});})(jQuery);
;(function($){$.widget('depositphotos.depositCustomInput',{options:{template:undefined},_init:function(){this.$this=this.element;this.type=this.$this.attr('type').toLowerCase();this.targets=this._gather();this.handlers=this._handlers();dp.core.binder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);},_destroy:function(){dp.core.unbinder(this.targets,this.handlers,this.widgetFullName||this.widgetBaseClass);this.targets=this.handlers=undefined;},_gather:function(){return{$input:this.$this,$placeholder:this._getTemplate()}},_handlers:function(){var _this=this;return{input:{handler:function(e,param){_this._sync(param);},events:['change','changed'],run:function(){_this._prepare();}},placeholder:{handler:function(e){e.preventDefault();if(_this.targets.$input.prop('checked')!==true){_this.targets.$input.prop('checked',true).trigger('change');}},events:'click'}}},_prepare:function(){this.targets.$placeholder.insertBefore(this.targets.$input.hide());this._sync();},_sync:function(){if(!this.targets)return;var $input=this.targets.$input;var $placeholder=this.targets.$placeholder;var name=$input.attr('name');var pref=(typeof this.$this.attr('data-pref')==='undefined')?'d-':this.$this.attr('data-pref');if($input.prop('checked')){$placeholder.addClass(pref+'active')}else{$placeholder.removeClass(pref+'active')}},_getTemplate:function(){if(this.targets&&this.targets.$placeholder){return this.targets.$placeholder.remove();}
var $template=this.options.template.clone();var pref=(typeof this.$this.attr('data-pref')==='undefined')?'d-':this.$this.attr('data-pref');var ns;if(this.type==='radio'){ns=pref+this.$this.val();}else{ns=pref+this.$this.attr('name');}
$template.addClass(ns);return $template;}});})(jQuery);
;